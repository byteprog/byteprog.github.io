{"meta":{"title":"ä¹±æ¶‚ä¹±ç”»çš„å°ç«™","subtitle":"","description":"shionåœ¨ Internet ä¸Šçš„ä¸ªäººåšå®¢","author":"shion","url":"http://www.postman.life","root":"/"},"pages":[{"title":"","date":"2021-06-14T13:55:19.737Z","updated":"2021-06-14T13:55:19.737Z","comments":true,"path":"404/index.html","permalink":"http://www.postman.life/404/index.html","excerpt":"","text":""},{"title":"contributors","date":"2021-06-14T13:23:58.000Z","updated":"2021-06-14T13:23:58.659Z","comments":true,"path":"contributors/index.html","permalink":"http://www.postman.life/contributors/index.html","excerpt":"","text":""},{"title":"about me","date":"2021-06-13T16:10:42.000Z","updated":"2021-06-14T13:52:50.057Z","comments":true,"path":"about/index.html","permalink":"http://www.postman.life/about/index.html","excerpt":"","text":"ğŸ’¡ Introduction Name @shion Profession Java &amp; Microservice Developer Experience Since 2018 Live Shang Hai Email &#x6b;&#x77;&#x6f;&#108;&#97;&#x6e;&#x67;&#x40;&#x67;&#x6d;&#x61;&#105;&#x6c;&#46;&#x63;&#x6f;&#109; ğŸ’¡ Interests Algorithms OS Street Photography"},{"title":"categories","date":"2021-06-14T13:23:15.000Z","updated":"2021-06-14T13:49:19.248Z","comments":true,"path":"categories/index.html","permalink":"http://www.postman.life/categories/index.html","excerpt":"","text":""},{"title":"faqs","date":"2021-06-14T13:21:28.000Z","updated":"2021-06-14T13:21:28.310Z","comments":true,"path":"faqs/index.html","permalink":"http://www.postman.life/faqs/index.html","excerpt":"","text":""},{"title":"tag","date":"2021-06-14T13:52:33.709Z","updated":"2021-06-14T13:52:33.709Z","comments":true,"path":"tags/index.html","permalink":"http://www.postman.life/tags/index.html","excerpt":"","text":""},{"title":"friends","date":"2021-06-14T13:53:39.000Z","updated":"2021-06-14T13:53:53.052Z","comments":true,"path":"friends/index.html","permalink":"http://www.postman.life/friends/index.html","excerpt":"","text":""},{"title":"examples","date":"2021-06-14T13:23:33.000Z","updated":"2021-06-14T13:23:33.830Z","comments":true,"path":"examples/index.html","permalink":"http://www.postman.life/examples/index.html","excerpt":"","text":""}],"posts":[{"title":"ElasticSearchå¸¸ç”¨æŒ‡ä»¤","slug":"ElasticSearchå¸¸ç”¨æŒ‡ä»¤","date":"2021-06-14T14:08:23.000Z","updated":"2021-06-14T14:10:28.721Z","comments":true,"path":"2021/06/14/ElasticSearchå¸¸ç”¨æŒ‡ä»¤/","link":"","permalink":"http://www.postman.life/2021/06/14/ElasticSearch%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/","excerpt":"","text":"ElasticSearchç”¨ä½œå…¨æ–‡æ£€ç´¢ï¼Œä¸€ç›´æ²¡æœ‰å¥½å¥½ç ”ç©¶å®ƒçš„å‘½ä»¤ï¼Œæ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™éƒ½è¦è°·æ­Œæœç´¢ï¼Œæ•ˆç‡å¤ªä½ã€‚ æœ¬æ–‡æŠŠä¸€äº›ç‰¹åˆ«å¸¸ç”¨çš„è¿ç»´åŠæ“ä½œå‘½ä»¤æ•´ç†ä¸€ä¸‹ï¼Œæ–¹ä¾¿å½’ç±»è®°å¿† ç®€å•æŸ¥è¯¢åˆ›å»ºIndexã€Type 12345678PUT /megacorp/employee/1&#123; &quot;first_name&quot; : &quot;John&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 25, &quot;about&quot; : &quot;I love to go rock climbing&quot;, &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]&#125; æ£€ç´¢æ–‡æ¡£ 12GET /megacorp/employee/1 //æŒ‡å®šGET /megacorp/employee/_search //è¿”å›æ‰€æœ‰ ç»“æœ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&#123; &quot;took&quot;: 6, &quot;timed_out&quot;: false, &quot;_shards&quot;: &#123; ... &#125;, &quot;hits&quot;: &#123; &quot;total&quot;: 3, &quot;max_score&quot;: 1, &quot;hits&quot;: [ &#123; &quot;_index&quot;: &quot;megacorp&quot;, &quot;_type&quot;: &quot;employee&quot;, &quot;_id&quot;: &quot;3&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: &#123; &quot;first_name&quot;: &quot;Douglas&quot;, &quot;last_name&quot;: &quot;Fir&quot;, &quot;age&quot;: 35, &quot;about&quot;: &quot;I like to build cabinets&quot;, &quot;interests&quot;: [ &quot;forestry&quot; ] &#125; &#125;, &#123; &quot;_index&quot;: &quot;megacorp&quot;, &quot;_type&quot;: &quot;employee&quot;, &quot;_id&quot;: &quot;1&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: &#123; &quot;first_name&quot;: &quot;John&quot;, &quot;last_name&quot;: &quot;Smith&quot;, &quot;age&quot;: 25, &quot;about&quot;: &quot;I love to go rock climbing&quot;, &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ] &#125; &#125;, &#123; &quot;_index&quot;: &quot;megacorp&quot;, &quot;_type&quot;: &quot;employee&quot;, &quot;_id&quot;: &quot;2&quot;, &quot;_score&quot;: 1, &quot;_source&quot;: &#123; &quot;first_name&quot;: &quot;Jane&quot;, &quot;last_name&quot;: &quot;Smith&quot;, &quot;age&quot;: 32, &quot;about&quot;: &quot;I like to collect rock albums&quot;, &quot;interests&quot;: [ &quot;music&quot; ] &#125; &#125; ] &#125;&#125; æ³¨æ„ï¼šè¿”å›ç»“æœä¸ä»…å‘ŠçŸ¥åŒ¹é…äº†å“ªäº›æ–‡æ¡£ï¼Œè¿˜åŒ…å«äº†æ•´ä¸ªæ–‡æ¡£æœ¬èº«ï¼šæ˜¾ç¤ºæœç´¢ç»“æœç»™æœ€ç»ˆç”¨æˆ·æ‰€éœ€çš„å…¨éƒ¨ä¿¡æ¯ã€‚ åˆ é™¤Index 1DELETE &#x2F;ecommerce æŸ¥è¯¢å­—ç¬¦ä¸² ï¼ˆquery-stringï¼‰ æœç´¢ï¼Œå› ä¸ºæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªURLå‚æ•°æ¥ä¼ é€’æŸ¥è¯¢ä¿¡æ¯ç»™æœç´¢æ¥å£ 1GET &#x2F;megacorp&#x2F;employee&#x2F;_search?q&#x3D;last_name:Smith æˆ‘ä»¬ä»ç„¶åœ¨è¯·æ±‚è·¯å¾„ä¸­ä½¿ç”¨ _search ç«¯ç‚¹ï¼Œå¹¶å°†æŸ¥è¯¢æœ¬èº«èµ‹å€¼ç»™å‚æ•° q= ã€‚è¿”å›ç»“æœç»™å‡ºäº†æ‰€æœ‰çš„ Smithï¼š 1234567891011121314151617181920212223242526272829&#123; ... &quot;hits&quot;: &#123; &quot;total&quot;: 2, &quot;max_score&quot;: 0.30685282, &quot;hits&quot;: [ &#123; ... &quot;_source&quot;: &#123; &quot;first_name&quot;: &quot;John&quot;, &quot;last_name&quot;: &quot;Smith&quot;, &quot;age&quot;: 25, &quot;about&quot;: &quot;I love to go rock climbing&quot;, &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ] &#125; &#125;, &#123; ... &quot;_source&quot;: &#123; &quot;first_name&quot;: &quot;Jane&quot;, &quot;last_name&quot;: &quot;Smith&quot;, &quot;age&quot;: 32, &quot;about&quot;: &quot;I like to collect rock albums&quot;, &quot;interests&quot;: [ &quot;music&quot; ] &#125; &#125; ] &#125;&#125; Query é¢†åŸŸç‰¹å®šè¯­è¨€ ï¼ˆDSLï¼‰ ä½¿ç”¨ JSON æ„é€ äº†ä¸€ä¸ªè¯·æ±‚ã€‚æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·é‡å†™ä¹‹å‰çš„æŸ¥è¯¢æ‰€æœ‰åä¸º Smith çš„æœç´¢ ï¼š 12345678GET /megacorp/employee/_search&#123; &quot;query&quot;: &#123; &quot;match&quot;: &#123; &quot;last_name&quot;: &quot;Fir&quot; &#125; &#125;&#125; è¿”å›ç»“æœä¸ä¹‹å‰çš„æŸ¥è¯¢ä¸€æ ·ï¼Œä½†è¿˜æ˜¯å¯ä»¥çœ‹åˆ°æœ‰ä¸€äº›å˜åŒ–ã€‚å…¶ä¸­ä¹‹ä¸€æ˜¯ï¼Œä¸å†ä½¿ç”¨ query-string å‚æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªè¯·æ±‚ä½“æ›¿ä»£ã€‚è¿™ä¸ªè¯·æ±‚ä½¿ç”¨ JSON æ„é€ ï¼Œå¹¶ä½¿ç”¨äº†ä¸€ä¸ª match æŸ¥è¯¢ï¼ˆå±äºæŸ¥è¯¢ç±»å‹ä¹‹ä¸€ï¼Œåé¢å°†ç»§ç»­ä»‹ç»ï¼‰ã€‚ æ›´å¤æ‚çš„æœç´¢ 1234567891011121314151617GET /megacorp/employee/_search&#123; &quot;query&quot; : &#123; &quot;bool&quot;: &#123; &quot;must&quot;: &#123; &quot;match&quot; : &#123; &quot;last_name&quot; : &quot;smith&quot; &#125; &#125;, &quot;filter&quot;: &#123; &quot;range&quot; : &#123; &quot;age&quot; : &#123; &quot;gt&quot; : 30 &#125; &#125; &#125; &#125; &#125;&#125; è¿™éƒ¨åˆ†ä¸æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„ match æŸ¥è¯¢ ä¸€æ ·ã€‚è¿™éƒ¨åˆ†æ˜¯ä¸€ä¸ª range è¿‡æ»¤å™¨ ï¼Œ å®ƒèƒ½æ‰¾åˆ°å¹´é¾„å¤§äº 30 çš„æ–‡æ¡£ï¼Œå…¶ä¸­ gt è¡¨ç¤ºå¤§äº(great than)ã€‚ å…¨æ–‡æŸ¥è¯¢match querymatch query ç”¨äºæœç´¢å•ä¸ªå­—æ®µï¼Œé¦–å…ˆä¼šé’ˆå¯¹æŸ¥è¯¢è¯­å¥è¿›è¡Œè§£æï¼ˆç»è¿‡ analyzerï¼‰ï¼Œä¸»è¦æ˜¯å¯¹æŸ¥è¯¢è¯­å¥è¿›è¡Œåˆ†è¯ï¼Œåˆ†è¯åæŸ¥è¯¢è¯­å¥çš„ä»»ä½•ä¸€ä¸ªè¯é¡¹è¢«åŒ¹é…ï¼Œæ–‡æ¡£å°±ä¼šè¢«æœåˆ°ï¼Œé»˜è®¤æƒ…å†µä¸‹ç›¸å½“äºå¯¹åˆ†è¯åè¯é¡¹è¿›è¡Œ or åŒ¹é…æ“ä½œã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950è¯­æ³•1GET article/_search&#123; &quot;query&quot;: &#123; &quot;match&quot;: &#123; &quot;title&quot;: &#123; &quot;query&quot;: &quot;Elasticsearch æŸ¥è¯¢ä¼˜åŒ–&quot; &#125; &#125; &#125;&#125;è¯­æ³•2GET /product_center_foreground_delivery/product_center_foreground_delivery&#123; &quot;query&quot; : &#123; &quot;match&quot; : &#123; &quot;categoryType&quot; : &#123; &quot;query&quot; : &quot;13&quot; &#125; &#125; &#125;&#125;ç­‰åŒäº or åŒ¹é…æ“ä½œï¼Œå¦‚ä¸‹ï¼šGET article/_search&#123; &quot;query&quot;: &#123; &quot;match&quot;: &#123; &quot;title&quot;: &#123; &quot;query&quot;: &quot;Elasticsearch æŸ¥è¯¢ä¼˜åŒ–&quot;, &quot;operator&quot;: &quot;or&quot; &#125; &#125; &#125;&#125;å¦‚æœæƒ³æŸ¥è¯¢åŒ¹é…æ‰€æœ‰å…³é”®è¯çš„æ–‡æ¡£ï¼Œå¯ä»¥ç”¨ and æ“ä½œç¬¦è¿æ¥ï¼Œå¦‚ä¸‹ï¼šGET article/_search&#123; &quot;query&quot;: &#123; &quot;match&quot;: &#123; &quot;title&quot;: &#123; &quot;query&quot;: &quot;Elasticsearch æŸ¥è¯¢ä¼˜åŒ–&quot;, &quot;operator&quot;: &quot;and&quot; &#125; &#125; &#125;&#125; çŠ¶æ€æŸ¥è¯¢ è·å–æ‰€æœ‰_catç³»åˆ—çš„æ“ä½œ 1234567891011121314151617181920212223242526272829curl http://localhost:9200/_cat=^.^=/_cat/allocation/_cat/shards/_cat/shards/&#123;index&#125;/_cat/master/_cat/nodes/_cat/tasks/_cat/indices/_cat/indices/&#123;index&#125;/_cat/segments/_cat/segments/&#123;index&#125;/_cat/count/_cat/count/&#123;index&#125;/_cat/recovery/_cat/recovery/&#123;index&#125;/_cat/health/_cat/pending_tasks/_cat/aliases/_cat/aliases/&#123;alias&#125;/_cat/thread_pool/_cat/thread_pool/&#123;thread_pools&#125;/_cat/plugins/_cat/fielddata/_cat/fielddata/&#123;fields&#125;/_cat/nodeattrs/_cat/repositories/_cat/snapshots/&#123;repository&#125;/_cat/templates å¯ä»¥åé¢åŠ ä¸€ä¸ªvï¼Œè®©è¾“å‡ºå†…å®¹è¡¨æ ¼æ˜¾ç¤ºè¡¨å¤´; prettyåˆ™è®©è¾“å‡ºç¼©è¿›æ›´è§„èŒƒ é›†ç¾¤çŠ¶æ€ é›†ç¾¤çŠ¶æ€ 1curl -X GET &quot;localhost:9200/_cluster/health?pretty&quot; èŠ‚ç‚¹çŠ¶æ€ èŠ‚ç‚¹ç®€è¦ä¿¡æ¯ 12345curl -X GET &quot;localhost:9200/_cat/nodes?pretty&amp;v&quot;ip heap.percent ram.percent cpu load_1m load_5m load_15m node.role master name192.168.58.101 69 99 71 12.67 12.25 11.71 mdi - node-101192.168.58.103 23 99 70 14.64 13.45 12.68 mdi - node-103192.168.58.105 60 97 69 11.17 10.96 10.88 mdi * node-105 èŠ‚ç‚¹è¯¦ç»†ä¿¡æ¯ 1curl -X GET &quot;localhost:9200/_nodes/stats/http?pretty&quot; åé¢çš„httpæ˜¯æŸ¥çœ‹çš„å±æ€§ï¼Œå¦å¤–è¿˜æœ‰indices, fs, http, jvm, os, process, thread_pool, discoveryç­‰ï¼Œæ”¯æŒç»„åˆï¼ˆå¦‚indices,fs,httpï¼‰ åˆ†ç‰‡çŠ¶æ€ åˆ†ç‰‡ 123456curl -X GET &quot;localhost:9200/_cat/shards?v&amp;pretty&quot;index shard prirep state docs store ip nodetenmao_index_153915944934 1 p STARTED 39931 4.1mb 172.17.0.14 35S66p1tenmao_index_153915944934 1 r STARTED 39931 4mb 172.17.0.3 DPKsmMNtenmao_index_153915944934 0 p STARTED 39634 4mb 172.17.0.2 PE8QHxztenmao_index_153915944934 0 r STARTED 39634 4mb 172.17.0.3 DPKsmMN åˆ†ç‰‡ä¸­å¦‚æœå­˜åœ¨æœªåˆ†é…çš„åˆ†ç‰‡ï¼Œ å¯ä»¥æŸ¥çœ‹æœªåˆ†ç‰‡çš„åŸå› ï¼š_cat/shards?h=index,shard,prirep,state,unassigned.reason&amp;v ç´¢å¼•ç´¢å¼•ç®¡ç† ç´¢å¼•åˆ—è¡¨ 123curl -X GET &quot;localhost:9200/_cat/indices?v&quot;health status index uuid pri rep docs.count docs.deleted store.size pri.store.sizegreen open tenmao_index_153915944934 Z6BV1VaMRc-tC-7IucJE2w 5 1 198444 0 40.9mb 20.4mb æ¡ä»¶è¿‡æ»¤ï¼š_cat/indices?v&amp;health=yellow æ’åºï¼š_cat/indices?v&amp;health=yellow&amp;s=docs.count:desc ç´¢å¼•è¯¦ç»†ä¿¡æ¯ 1curl -X GET &quot;localhost:9200/chat_index_alias/_stats?pretty&quot; æ•°æ®é‡ 1curl -X GET &quot;localhost:9200/_cat/count/chat_index_alias?v&amp;pretty&quot; æ–°å»ºç´¢å¼• 123456789curl -X PUT &quot;localhost:9200/my_index&quot; -d &#x27;&#123; &quot;settings&quot; : &#123; &quot;index&quot; : &#123; &quot;number_of_shards&quot; : 3, &quot;number_of_replicas&quot; : 2 &#125; &#125;&#125;&#x27; åˆ é™¤ç´¢å¼• 123curl -X DELETE &quot;localhost:9200/tenmao_index&quot;curl -X DELETE &quot;localhost:9200/tenmao_index_1504520299944&quot; ç´¢å¼•ä½¿ç”¨ åˆ†è¯æœç´¢ 12345678curl -X POST &quot;localhost:9200/chat_index_alias/_search&quot; -d &#x27;&#123; &quot;query&quot;: &#123; &quot;match&quot;: &#123; &quot;question&quot;: &quot;åƒé¥­äº†å—&quot; &#125; &#125;&#125;&#x27; å®Œå…¨åŒ¹é…æœç´¢ 12345678curl -X POST &quot;localhost:9200/chat_index_alias/_search&quot; -d &#x27;&#123; &quot;query&quot;: &#123; &quot;match_phrase&quot;: &#123; &quot;question&quot;: &quot;ä½ åƒé¥­äº†&quot; &#125; &#125;&#125;&#x27; åˆ«å æŸ¥çœ‹åˆ«å 1curl -X GET &quot;localhost:9200/_alias/chat_index_alias?pretty&quot; å¢åŠ åˆ«å 1curl -X PUT &quot;localhost:9200/my_index/_alias/my_index_alias?pretty&quot; åˆ é™¤åˆ«å 123456curl -X POST &#x27;http://localhost:9200/_aliases&#x27; -d &#x27;&#123; &quot;actions&quot;: [ &#123;&quot;remove&quot;: &#123;&quot;index&quot;: &quot;my_index&quot;, &quot;alias&quot;: &quot;my_index_alias&quot;&#125;&#125; ]&#125;&#x27; ä¸€èˆ¬çº¯åˆ é™¤åˆ«åä½¿ç”¨çš„æ¯”è¾ƒå°‘ï¼Œä¸€èˆ¬æ˜¯åˆ«åé‡æ–°ç»‘å®šï¼ˆåˆ é™¤å’Œç»‘å®šä¸ºä¸€ä¸ªåŸå­æ“ä½œï¼‰ åˆ«åé‡æ–°ç»‘å®š 1234567curl -XPOST &#x27;http://localhost:9200/_aliases&#x27; -d &#x27;&#123; &quot;actions&quot; : [ &#123; &quot;remove&quot; : &#123; &quot;index&quot; : &quot;my_index&quot;, &quot;alias&quot; : &quot;my_index_alias&quot; &#125; &#125;, &#123; &quot;add&quot; : &#123; &quot;index&quot; : &quot;my_index_v2&quot;, &quot;alias&quot; : &quot;my_index_alias&quot; &#125; &#125; ]&#125;&#x27;","categories":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"http://www.postman.life/categories/ElasticSearch/"}],"tags":[]},{"title":"Linuxå¸¸ç”¨å‘½ä»¤","slug":"Linuxå¸¸ç”¨å‘½ä»¤","date":"2021-06-13T18:18:15.000Z","updated":"2021-06-14T13:59:51.355Z","comments":true,"path":"2021/06/14/Linuxå¸¸ç”¨å‘½ä»¤/","link":"","permalink":"http://www.postman.life/2021/06/14/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","excerpt":"","text":"å‰è¨€æœ¬æ–‡ç‰¹ç‚¹ æˆä¹‹ä»¥æ¸”ï¼šäº†è§£å‘½ä»¤å­¦ä¹ æ–¹æ³•ã€ç”¨é€”ï¼šä¸å†æ­»è®°ç¡¬èƒŒï¼Œæ‹’ç»æ¼«æ— ç›®çš„ï¼› å‡†ç¡®æ— è¯¯ï¼šæ‰€æœ‰å‘½ä»¤æ‰§è¡Œé€šè¿‡ï¼ˆç¯å¢ƒä¸ºcentos7ï¼‰ï¼Œæ‹’ç»å¤åˆ¶ç²˜è´´ï¼› å®ç”¨æ€§é«˜ï¼šå‘½ä»¤å¤šä¸ºå®é™…å·¥ä½œä¸­ç”¨åˆ°çš„ï¼Œå®ä¾‹è®²è§£ï¼Œæ‹’ç»çº¯ç†è®ºï¼› æ¡ç†æ¸…æ™°ï¼šåˆ†ç±»å½’çº³ï¼Œå¿«é€Ÿæ‰¾åˆ°æƒ³è¦çš„å‘½ä»¤ï¼Œæ‹’ç»å¤©é©¬è¡Œç©ºï¼› æ€»ç»“æ€§å¼ºï¼šåªåˆ—å¸¸ç”¨è¯­æ³•ï¼Œæ˜“é”™æƒ…å†µå¼ºè°ƒï¼Œæ‹’ç»ç…§æ¬ç…§å¥—ã€‚ å­¦å‰é¡»çŸ¥ é€‚ç”¨äººç¾¤ï¼šå¼€å‘ã€æµ‹è¯•ã€è¿ç»´ç­‰ç­‰ æ–‡æ¡£ç”¨é€”ï¼šlinuxå…¥é—¨å­¦ä¹ ã€å‘½ä»¤å¤‡å¿˜å½•ã€é¢è¯•å¤ä¹  å­¦ä¹ é€”å¾„ï¼šä¹¦ç±ï¼ˆé¸Ÿå“¥çš„Linuxç§æˆ¿èœï¼‰ã€è§†é¢‘ï¼šæ…•è¯¾ç½‘ç­‰ã€ç™¾åº¦è°·æ­Œæœç´¢ã€qqç¾¤ç­‰ å­¦ä¹ ç¯å¢ƒï¼šè™šæ‹ŸæœºVirtualBox+centos7 å­¦ä¹ è®°å½•ï¼šå¤šåŠ¨æ‰‹ï¼Œå¤šè”æƒ³ï¼Œå¤šè®°å½•ï¼Œç‰¹åˆ«æ˜¯é‡åˆ°é—®é¢˜æ—¶ é‡åˆ°é—®é¢˜ï¼šç™¾åº¦è°·æ­Œæœç´¢ã€ç³»ç»Ÿæ—¥å¿—ï¼ˆ/var/log/ï¼‰ã€qqç¾¤ å­¦å‰ç†è®º linuxä¸»è¦ç‰¹å¾ ï¼šä¸€åˆ‡ä¸”æ–‡ä»¶ï¼ˆç›®å½•ã€ç¡¬ç›˜ç­‰éƒ½æ˜¯æ–‡ä»¶ï¼‰ï¼›ç¡¬ä»¶éƒ½åœ¨/dev ç›®å½•ï¼Œå¦‚ç¡¬ç›˜ã€Uç›˜ä¸º/dev/sd[a-d]ï¼› /dev/sr0ï¼ˆ/dev/cdromï¼‰æ˜¯å…‰é©±çš„è®¾å¤‡åï¼ˆdfå‘½ä»¤æŸ¥çœ‹ï¼‰ï¼Œä¸ºè®¾å¤‡æ–‡ä»¶ï¼Œä»£è¡¨çš„æ˜¯å…‰é©±æœ¬èº«ï¼Œå¾—æŠŠè¿™ä¸ªè®¾å¤‡æŒ‚è½½åˆ°ç›®å½•ä¸‹ï¼ˆä¸€èˆ¬ä¸º/mntï¼‰(æ–‡ä»¶ç³»ç»Ÿçš„ä¸´æ—¶æŒ‚è½½ç‚¹)ï¼Œæ‰èƒ½å¯¹è®¾å¤‡ä¸Šçš„æ–‡ä»¶è¿›è¡Œè¯»å†™ç­‰æ“ä½œï¼› ä¸æ‡‚çš„å‘½ä»¤ ï¼šman å‘½ä»¤ï¼ˆæŸ¥ç”¨æ³•ã€å…¨ç§°ï¼‰ï¼Œåªè®°å¾—å…³é”®è¯ï¼Œå¯ç”¨man -k å…³é”®è¯ï¼› Linuxå‘½ä»¤å¸¸ç”¨ç»“æ„ ï¼šCommand [-option] [argument]Commandï¼šå³æ˜¯è¦è¿è¡Œçš„å‘½ä»¤çš„æœ¬èº«ï¼Œè¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªè½¯ä»¶ï¼ˆç¨‹åºï¼‰ï¼›Optionï¼šæ˜¯é€‰é¡¹ï¼ˆå¯é€‰ï¼‰ï¼Œé€‰é¡¹æ˜¯æ§åˆ¶å‘½ä»¤è¿è¡ŒçŠ¶æ€å’Œè¡Œä¸ºçš„ï¼ˆå¯å¤šä¸ªé€‰é¡¹ä¸€èµ·ï¼Œå¦‚df -hTï¼‰ï¼›Argumentï¼šæ˜¯å‚æ•°ï¼ˆå¯é€‰ï¼‰ï¼Œæ˜¯å‘½ä»¤è¦æ“ä½œå¯¹è±¡å¦‚æ–‡ä»¶ã€è·¯å¾„ã€æ•°æ®ã€ç›®å½•ç­‰ï¼›åœ¨æŒ‡ä»¤çš„ç¬¬ä¸€éƒ¨åˆ†æŒ‰[tab]é”®ä¸€ä¸‹ä¸º[å‘½ä»¤è¡¥å…¨]ï¼Œä¸¤ä¸‹ä¸ºæ‰€æœ‰å‘½ä»¤é€‰æ‹©ï¼Œåœ¨éç¬¬ä¸€éƒ¨åˆ†æŒ‰[tab]é”®ä¸¤ä¸‹ä¸º[æ–‡ä»¶è¡¥å…¨]ï¼› linuxå‘½ä»¤åŒºåˆ†å¤§å°å†™ï¼› å¼€å…³æœº sync ï¼šæŠŠå†…å­˜ä¸­çš„æ•°æ®å†™åˆ°ç£ç›˜ä¸­ï¼ˆå…³æœºã€é‡å¯å‰éƒ½éœ€å…ˆæ‰§è¡Œsyncï¼‰ shutdown -r nowæˆ–reboot ï¼šç«‹åˆ»é‡å¯ shutdown -h now ï¼šç«‹åˆ»å…³æœº shutdown -h 20:00 ï¼šé¢„å®šæ—¶é—´å…³é—­ç³»ç»Ÿï¼ˆæ™šä¸Š8ç‚¹å…³æœºï¼Œå¦‚æœç°åœ¨è¶…è¿‡8ç‚¹ï¼Œåˆ™æ˜æ™š8ç‚¹ï¼‰ shutdown -h +10 ï¼šé¢„å®šæ—¶é—´å…³é—­ç³»ç»Ÿï¼ˆ10åˆ†é’Ÿåå…³æœºï¼‰ shutdown -c ï¼šå–æ¶ˆæŒ‰é¢„å®šæ—¶é—´å…³é—­ç³»ç»Ÿ ç³»ç»Ÿä¿¡æ¯ who am i ï¼šæŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ç»ˆç«¯ who æˆ– w ï¼š æŸ¥çœ‹æ‰€æœ‰ç»ˆç«¯ uname -m ï¼šæ˜¾ç¤ºæœºå™¨çš„å¤„ç†å™¨æ¶æ„ï¼ˆå¦‚x86_64ï¼‰ cat /proc/version ï¼šæŸ¥çœ‹linuxç‰ˆæœ¬ä¿¡æ¯ uname -r ï¼šæ˜¾ç¤ºæ­£åœ¨ä½¿ç”¨çš„å†…æ ¸ç‰ˆæœ¬ lsb_release -a ï¼šæŸ¥çœ‹ç³»ç»Ÿå‘è¡Œç‰ˆæœ¬ï¼ˆå¦‚CentOS7ï¼‰ï¼ˆæ²¡è¿™ä¸ªå‘½ä»¤å…ˆå®‰è£…yum install -y redhat-lsb-coreï¼‰ rpm -qa | grep kernel-devel ï¼šæŸ¥çœ‹kernel-develç‰ˆæœ¬ï¼ˆå®‰è£…è½¯ä»¶æ—¶ç¼–è¯‘å†…æ ¸ç”¨ï¼Œæ•…éœ€è¦ä¿æŒå†…æ ¸ç‰ˆæœ¬ä¸€è‡´æ€§ï¼‰ **yum install -y â€œkernel-devel-uname-r == $(uname -r)â€**ï¼šå®‰è£…å’ŒLinuxå†…æ ¸ç‰ˆæœ¬åŒ¹é…çš„kernel-devel hostnamectl set-hostname ä¸»æœºåï¼šä¿®æ”¹ä¸»æœºåï¼ˆåŒ…æ‹¬é™æ€ã€ç¬æ€å’Œçµæ´»ä¸»æœºåï¼Œå¦‚æœ‰åŸŸåè§£æè®°å¾—æ‰‹åŠ¨æ›´æ–°/etc/hostsï¼‰ date ï¼šæ˜¾ç¤ºç³»ç»Ÿæ—¥æœŸ ï¼ˆdate +%Y/%m/%d : æ˜¾ç¤ºæ•ˆæœå¦‚2018/01/01ï¼‰ date 070314592018.00 ï¼šè®¾ç½®æ—¶é—´ï¼ˆæ ¼å¼ä¸ºæœˆæ—¥æ—¶åˆ†å¹´.ç§’ ï¼‰ clock -w ï¼šå°†æ—¶é—´ä¿®æ”¹ä¿å­˜åˆ° BIOS cal 2018 ï¼šæ˜¾ç¤º2018å¹´çš„æ—¥å†è¡¨ clear ï¼šæ¸…ç©ºå‘½ä»¤è¡Œ ifconfig ï¼šæ˜¾ç¤ºæˆ–è®¾ç½®ç½‘å¡ï¼ˆæŸ¥ipç­‰ï¼‰ï¼ˆç±»ä¼¼windowsä¸­ipconfigï¼‰ ping -c 3 www.baidu.com ï¼šæµ‹è¯•ç™¾åº¦ä¸æœ¬æœºçš„è¿æ¥æƒ…å†µï¼ˆ -c 3è¡¨ç¤ºæµ‹è¯•3æ¬¡ï¼‰ cat /proc/cpuinfo ï¼šæ˜¾ç¤ºCPUçš„ä¿¡æ¯ cat /proc/cpuinfo| grep â€œphysical idâ€| sort| uniq| wc -l ï¼šæŸ¥çœ‹ç‰©ç†CPUä¸ªæ•° cat /proc/cpuinfo| grep â€œcpu coresâ€| uniq ï¼šæŸ¥çœ‹æ¯ä¸ªç‰©ç†CPUçš„æ ¸æ•° cat /proc/cpuinfo| grep â€œprocessorâ€| wc -l ï¼šæŸ¥çœ‹é€»è¾‘CPUä¸ªæ•°å³çº¿ç¨‹æ•° ç³»ç»Ÿæ€§èƒ½ top ï¼šåŠ¨æ€å®æ—¶æ˜¾ç¤ºcpuã€å†…å­˜ã€è¿›ç¨‹ç­‰ä½¿ç”¨æƒ…å†µï¼ˆç±»ä¼¼windowsä¸‹çš„ä»»åŠ¡ç®¡ç†å™¨ï¼‰ top -d 2 -p 7427 ï¼š-dä¸ºç”»é¢æ›´æ–°çš„ç§’æ•°ï¼Œé»˜è®¤5ç§’ï¼Œ-pä¸ºæŒ‡å®šè¿›ç¨‹pidçš„ä¿¡æ¯ vmstat 2 10 ï¼šæ¯éš”2ç§’é‡‡é›†ä¸€æ¬¡æœåŠ¡å™¨çŠ¶æ€ï¼Œé‡‡é›†10æ¬¡ï¼ˆæŸ¥çœ‹å†…å­˜ã€ioè¯»å†™çŠ¶æ€ã€cpuï¼‰ free -h :æŸ¥çœ‹ç³»ç»Ÿå†…å­˜åŠè™šæ‹Ÿå†…å­˜ä½¿ç”¨æƒ…å†µ df -h :æ˜¾ç¤ºç£ç›˜çš„ç©ºé—´ä½¿ç”¨æƒ…å†µ iostat ï¼šå¯æŸ¥ioè¯»å†™ã€cpuä½¿ç”¨æƒ…å†µ sar -u 3 5 :æŸ¥çœ‹cpuä½¿ç”¨æƒ…å†µï¼ˆ3ç§’ä¸€æ¬¡ï¼Œå…±5æ¬¡ï¼‰ sar -d 2 3 ï¼šè¯„ä¼°ç£ç›˜æ€§èƒ½ ps aux|grep firefox ï¼šè·å–ç«ç‹çš„è¿›ç¨‹å·ï¼ˆPIDï¼‰ï¼ˆå¯æŸ¥çœ‹è¿›ç¨‹å ç”¨cpuã€å†…å­˜ç™¾åˆ†æ¯”åŠè¿›ç¨‹è§¦å‘æŒ‡ä»¤çš„è·¯å¾„ï¼‰ kill -9 è¿›ç¨‹å· ï¼šå¼ºåˆ¶æ€æ­»è¿›ç¨‹ systemctl ï¼šæŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„æœåŠ¡ æ–‡ä»¶å’Œç›®å½• cd:æ˜¯Change Directoryçš„ç¼©å†™ï¼Œç”¨æ¥åˆ‡æ¢å·¥ä½œç›®å½•ï¼Œè¯­æ³•ï¼šcd [ç›¸å¯¹æˆ–ç»å¯¹è·¯å¾„æˆ–ç‰¹æ®Šç¬¦å·] cd ï¼šè¿›å…¥è¯¥ç”¨æˆ·çš„ä¸»ç›®å½• ~ï¼ˆrootç”¨æˆ·ä¸º/root,å…¶ä»–ç”¨æˆ·ä¸º/home/ç”¨æˆ·åï¼‰ cd .. ï¼šè¿”å›ä¸Šä¸€çº§ç›®å½•ï¼ˆæ³¨æ„è¦ç©ºæ ¼ï¼‰ cd - ï¼šè¿”å›ä¸Šæ¬¡æ‰€åœ¨ç›®å½• cd / ï¼šè¿”å›æ ¹ç›®å½• ï¼ˆç»å¯¹è·¯å¾„ï¼‰ cd ./ç›®å½•1/ç›®å½•2 ï¼šè¿›å…¥å½“å‰ç›®å½•ä¸‹çš„å­ç›®å½•ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰ pwd ï¼šæ˜¾ç¤ºå·¥ä½œè·¯å¾„ï¼ˆPrint Working Directory çš„ç¼©å†™ï¼‰ ls:æ˜¯Listçš„ç¼©å†™ï¼Œç”¨äºåˆ—å‡ºç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œè¯­æ³•ï¼šls [é€‰é¡¹][ç›®å½•æˆ–æ–‡ä»¶å] ls -a :åˆ—å‡ºæ–‡ä»¶ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬ä»¥â€œ.â€œå¼€å¤´çš„éšè—æ–‡ä»¶ *ls -lh .log :åˆ—å‡ºæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼ˆ.logç»“å°¾ï¼Œ*ä¸ºé€šé…ç¬¦ä»£è¡¨ä»»æ„å¤šä¸ªå­—ç¬¦ï¼‰ file æ–‡ä»¶æˆ–ç›®å½• ï¼šæ˜¾ç¤ºæ–‡ä»¶çš„ç±»å‹ï¼ˆç›®å½•ã€textã€zipã€shellè„šæœ¬ç­‰ï¼‰ mkdir dir1 :åˆ›å»ºç›®å½•(dir1)ï¼ˆmkdirä¸ºmake directoryçš„ç¼©å†™ï¼‰ mkdir -p ./dir1/dir2 :é€’å½’åˆ›å»ºç›®å½•ï¼ˆ-pï¼šçˆ¶ç›®å½•ä¸å­˜åœ¨æ—¶ï¼ŒåŒæ—¶å»ºç«‹ï¼‰ touch a.txt :åˆ›å»ºæ–‡ä»¶a.txt rm:å¯ä»¥åˆ é™¤ä¸€ä¸ªç›®å½•ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼Œä¹Ÿå¯ä»¥å°†æŸä¸ªç›®å½•åŠå…¶ä¸‹å±çš„æ‰€æœ‰æ–‡ä»¶åŠå…¶å­ç›®å½•å‡åˆ é™¤æ‰; è¯­æ³•ï¼šrm (é€‰é¡¹)(å‚æ•°)ï¼ˆæ³¨ï¼šå¦‚æœå‚æ•°ä¸­å«æœ‰ç›®å½•ï¼Œåˆ™å¿…é¡»åŠ ä¸Š-ré€‰é¡¹ï¼‰ï¼› rm æ–‡ä»¶ ï¼šåˆ é™¤æ–‡ä»¶ rm -r ç›®å½•æˆ–æ–‡ä»¶ ï¼šåˆ é™¤ç›®å½•ï¼ˆåŠç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼‰ï¼ˆéç©ºä¹Ÿå¯ä»¥ï¼‰ rm -rf ç›®å½•æˆ–æ–‡ä»¶ ï¼šå¼ºåˆ¶åˆ é™¤ï¼Œå¦‚ï¼šrm -rf * ä¸ºåˆ é™¤å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ find -inum 1842601 -exec rm -rf {} ; ï¼šåˆ é™¤ä¹±ç æ–‡ä»¶æˆ–ç›®å½•(ä¼šæç¤ºæ‰¾ä¸åˆ°æ­¤æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ä½†å…¶å®å·²ç»åˆ é™¤äº†)ï¼ˆä¸Šä¼ ä¸­æ–‡æ–‡ä»¶ä¼šä¹±ç ï¼Œrmå‘½ä»¤åˆ é™¤ä¸äº†ï¼‰ï¼ˆå…ˆä½¿ç”¨ls -iå‘½ä»¤æ‰¾åˆ°inodeï¼Œå³æ–‡ä»¶æˆ–ç›®å½•å‰é¢çš„æ•°å­—å­—ç¬¦ä¸²,å¦‚1842601;ï¼‰ mvï¼šæ˜¯moveçš„ç¼©å†™ï¼Œå¯ä»¥ç”¨æ¥å‰ªåˆ‡ç§»åŠ¨æ–‡ä»¶ã€ç›®å½•æˆ–è€…å°†æ–‡ä»¶æ”¹åï¼› è¯­æ³•ï¼šmv æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶ï¼ˆæ”¹åï¼‰æˆ–ç›®å½•ï¼ˆç§»åŠ¨ï¼‰ï¼› mv a b :ç§»åŠ¨æˆ–è€…é‡å‘½åä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•ï¼ˆå­˜åœ¨å³ç§»åŠ¨ç›®å½•æˆ–è¦†ç›–æ–‡ä»¶ï¼Œä¸å­˜åœ¨å³æ”¹åï¼‰ mv /opt/git/g /opt/a ï¼šç§»åŠ¨gåˆ°optç›®å½•ä¸‹å¹¶æ”¹åä¸ºaï¼ˆaç›®å½•ä¸å­˜åœ¨ï¼Œè‹¥å­˜åœ¨åˆ™ä¸ºç§»åŠ¨gåˆ°aç›®å½•ä¸‹ï¼‰ mv -t ./test a.txt b.txt ï¼šç§»åŠ¨å¤šä¸ªæ–‡ä»¶åˆ°æŸç›®å½•ä¸‹ cp:å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•ï¼›cpå‘½ä»¤å¯ä»¥å°†å•ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶å¤åˆ¶åˆ°ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç›®å½•ä¸‹ï¼› å¸¸ç”¨ï¼šcp -ai æ–‡ä»¶æˆ–ç›®å½• ç›®æ ‡ç›®å½•; cp -ai /opt/abc /opt/git/ ï¼šå¤åˆ¶abcç›®å½•ï¼ˆæˆ–æ–‡ä»¶ï¼‰åˆ°gitç›®å½•ä¸‹ï¼ˆé€‰é¡¹aè¡¨ç¤ºæ–‡ä»¶çš„å±æ€§ä¹Ÿå¤åˆ¶ã€ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶éƒ½å¤åˆ¶ï¼›iè¡¨ç¤ºè¦†ç›–å‰è¯¢é—®ï¼‰ lnï¼šlinkçš„ç¼©å†™ï¼Œç”¨äºå»ºç«‹ç¡¬ï¼ˆè½¯ï¼‰é“¾æ¥ï¼Œå¸¸ç”¨äºè½¯ä»¶å®‰è£…æ—¶å»ºè½¯é“¾æ¥(ç±»ä¼¼å¿«æ·æ–¹å¼)åˆ°PATH; è¯­æ³•ï¼šln [-s] æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶ ln -s /opt/a.txt /opt/git/ :å¯¹æ–‡ä»¶åˆ›å»ºè½¯é“¾æ¥ï¼ˆå¿«æ·æ–¹å¼ä¸æ”¹åè¿˜æ˜¯a.txtï¼‰ ln -s /opt/a.txt /opt/git/b :ï¼ˆå¿«æ·æ–¹å¼æ”¹åä¸ºbï¼‰ï¼ˆä¸‹é¢çš„ä¸€æ ·å¯ä»¥æ”¹åï¼‰ ln -s /opt/mulu /opt/git/ :å¯¹ç›®å½•åˆ›å»ºè½¯é“¾æ¥ ln /opt/a.txt /opt/git/ :å¯¹æ–‡ä»¶åˆ›å»ºç¡¬é“¾æ¥ æ–‡ä»¶æƒé™ chmod [-R] 777æ–‡ä»¶æˆ–ç›®å½• ï¼šè®¾ç½®æƒé™ï¼ˆchmod a+rwx a=chmod ugo +rwx a=chmod 777 aï¼‰ æ³¨ï¼š rï¼ˆreadï¼‰å¯¹åº”4ï¼Œwï¼ˆwriteï¼‰å¯¹åº”2ï¼Œxï¼ˆexecuteï¼‰æ‰§è¡Œå¯¹åº”1ï¼›-Rï¼šé€’å½’æ›´æ”¹æ–‡ä»¶å±ç»„ï¼Œå°±æ˜¯åœ¨æ›´æ”¹æŸä¸ªç›®å½•æ–‡ä»¶çš„å±ç»„æ—¶ï¼Œå¦‚æœåŠ ä¸Š-Rçš„å‚æ•°ï¼Œé‚£ä¹ˆè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶çš„å±ç»„éƒ½ä¼šæ›´æ”¹ï¼‰ chmod [{ugoa}{+-=}{rwx}][æ–‡ä»¶æˆ–ç›®å½•] ï¼šå¦‚chmod u-w,g+x,o=r test.txtä¸ºuserï¼ˆæ‹¥æœ‰è€…ï¼‰å»æ‰å†™æƒé™ï¼Œgroup(æ‰€å±ç»„)åŠ ä¸Šæ‰§è¡Œæƒé™ï¼Œother(å…¶ä»–äºº)æƒé™ç­‰äºåªè¯»ï¼› chown [-R] admin:root /opt/ ï¼šå˜æ›´æ–‡ä»¶åŠç›®å½•çš„æ‹¥æœ‰è€…å’Œæ‰€å±ç»„ï¼ˆ-Ré€’å½’å¤„ç†æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œadminä¸ºæ‹¥æœ‰è€…ï¼Œrootä¸ºæ‰€å±è€…ï¼‰ æ–‡ä»¶æŸ¥æ‰¾ locate a.txt ï¼šåœ¨ç³»ç»Ÿå…¨å±€èŒƒå›´å†…æŸ¥æ‰¾æ–‡ä»¶ååŒ…å«a.txtå­—æ ·çš„æ–‡ä»¶ï¼ˆæ¯”findå¿«ï¼‰; locate:åŸç†æ˜¯updatedbä¼šæŠŠæ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¿¡æ¯å­˜æ”¾åˆ°æ•°æ®åº“databasesä¸­ï¼ˆä½†ä¸€èˆ¬ä¸€å¤©æ‰æ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥locateæ‰¾ä¸åˆ°æ–°åˆ›å»ºçš„æ–‡ä»¶ï¼Œéœ€è¦å…ˆæ‰‹åŠ¨æ‰§è¡Œupdatedbï¼Œå†æ‰§è¡Œlocateï¼‰,locateä»æ•°æ®åº“ä¸­è¯»æ•°æ®; findï¼šåœ¨ç›®å½•ç»“æ„ä¸­æœç´¢æ–‡ä»¶ï¼Œå¹¶æ‰§è¡ŒæŒ‡å®šçš„æ“ä½œ è¯­æ³•ï¼šfind pathname -options [-print -exec â€¦] pathname ï¼šä¸º findå‘½ä»¤æ‰€æŸ¥æ‰¾çš„ç›®å½•è·¯å¾„ã€‚ä¾‹å¦‚ç”¨.æ¥è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œç”¨/æ¥è¡¨ç¤ºç³»ç»Ÿæ ¹ç›®å½•ï¼ˆfindæŸ¥æ‰¾èŒƒå›´ä¸ºç›®æ ‡ç›®å½•åŠå…¶å­ç›®å½•æ‰€æœ‰æ–‡ä»¶åŠç›®å½•ï¼‰ï¼› -execï¼š findå‘½ä»¤å¯¹åŒ¹é…çš„æ–‡ä»¶æ‰§è¡Œè¯¥å‚æ•°æ‰€ç»™å‡ºçš„shellå‘½ä»¤ã€‚ç›¸åº”å‘½ä»¤çš„å½¢å¼ä¸ºâ€™commandâ€™ { } ;ï¼Œæ³¨æ„{ }å’Œ\\ï¼›ä¹‹é—´çš„ç©ºæ ¼ï¼› -printï¼š findå‘½ä»¤å°†åŒ¹é…çš„æ–‡ä»¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼› find /home -mtime -2 ï¼šåœ¨/homeä¸‹æŸ¥æœ€è¿‘2*24å°æ—¶å†…æ”¹åŠ¨è¿‡çš„æ–‡ä»¶ find . -size +100M ï¼šåœ¨å½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹æŸ¥æ‰¾å¤§äº100Mçš„æ–‡ä»¶ find . -type f ï¼šfè¡¨ç¤ºæ–‡ä»¶ç±»å‹ä¸ºæ™®é€šæ–‡ä»¶ï¼ˆb/d/c/p/l/f åˆ†åˆ«ä¸ºå—è®¾å¤‡ã€ç›®å½•ã€å­—ç¬¦è®¾å¤‡ã€ç®¡é“ã€ç¬¦å·é“¾æ¥ã€æ™®é€šæ–‡ä»¶ï¼‰ find . -mtime +2 -exec rm {} ; :æŸ¥å‡ºæ›´æ”¹æ—¶é—´åœ¨2*24å°æ—¶ä»¥å‰çš„æ–‡ä»¶å¹¶åˆ é™¤å®ƒ** find . -name â€˜*.logâ€™ -exec grep -i hello {} ; -print :åœ¨å½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹æŸ¥å‡ºæ–‡ä»¶ååç¼€ä¸º.logçš„æ–‡ä»¶å¹¶ä¸”è¯¥æ–‡ä»¶å†…å®¹åŒ…å«äº†helloå­—æ ·å¹¶æ‰“å°ï¼Œ-exec å‘½ä»¤ {} \\è¡¨ç¤ºå¯¹æŸ¥å‡ºæ–‡ä»¶æ“ä½œï¼Œ-iè¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ï¼› find . -name â€˜*.logâ€™|grep hello :åœ¨å½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹æŸ¥å‡ºæ–‡ä»¶ååç¼€ä¸º.logçš„æ–‡ä»¶å¹¶ä¸”æ–‡ä»¶ååŒ…å«äº†helloå­—æ ·ï¼ˆgrepç”¨æ¥å¤„ç†å­—ç¬¦ä¸²ï¼‰ï¼› grep -i â€˜HELLOâ€™ . -r -n ï¼šåœ¨å½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹æŸ¥æ‰¾æ–‡ä»¶å†…å®¹ä¸­åŒ…å«helloçš„æ–‡ä»¶å¹¶æ˜¾ç¤ºæ–‡ä»¶è·¯å¾„ï¼ˆ-iè¡¨ç¤ºå¿½ç•¥å¤§å°å†™ï¼‰ which java ï¼šåœ¨ç¯å¢ƒå˜é‡$PATHè®¾ç½®çš„ç›®å½•é‡ŒæŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶ï¼Œå¹¶æ˜¾ç¤ºè·¯å¾„ï¼ˆæŸ¥è¯¢è¿è¡Œæ–‡ä»¶æ‰€åœ¨è·¯å¾„ï¼‰ whereis java :æŸ¥çœ‹å®‰è£…çš„è½¯ä»¶çš„æ‰€æœ‰çš„æ–‡ä»¶è·¯å¾„ï¼ˆwhereis åªèƒ½ç”¨äºæŸ¥æ‰¾äºŒè¿›åˆ¶æ–‡ä»¶ã€æºä»£ç æ–‡ä»¶å’Œmanæ‰‹å†Œé¡µï¼Œä¸€èˆ¬æ–‡ä»¶çš„å®šä½éœ€ä½¿ç”¨locateå‘½ä»¤ï¼‰ æ‹·è´æ–‡ä»¶ cp -r /usr/iais-files/backupsAudit /root/iais-files/backups åˆ é™¤æ–‡ä»¶ rm -rf backupsAudit æ–‡ä»¶å¤¹æŸ¥æ‰¾ find / -name â€˜backupsAuditâ€™ -type d æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹ cat [-n] æ–‡ä»¶å :æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼Œè¿è¡Œå·ä¸€èµ·æ˜¾ç¤º less æ–‡ä»¶å ï¼šä¸€é¡µä¸€é¡µçš„æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼ˆæœç´¢ç¿»é¡µåŒmanå‘½ä»¤ï¼‰ head [-n] æ–‡ä»¶å ï¼šæ˜¾ç¤ºæ–‡ä»¶å¤´nè¡Œå†…å®¹ï¼ŒnæŒ‡å®šæ˜¾ç¤ºå¤šå°‘è¡Œ tail [-nf] æ–‡ä»¶å:æ˜¾ç¤ºæ–‡ä»¶å°¾å‡ è¡Œå†…å®¹,næŒ‡å®šæ˜¾ç¤ºå¤šå°‘è¡Œ,fç”¨äºå®æ—¶è¿½è¸ªæ–‡ä»¶çš„æ‰€æœ‰æ›´æ–°ï¼Œå¸¸ç”¨äºæŸ¥é˜…æ­£åœ¨æ”¹å˜çš„æ—¥å¿—æ–‡ä»¶ï¼ˆå¦‚tail -f -n 3 a.log è¡¨ç¤ºå¼€å§‹æ˜¾ç¤ºæœ€å3è¡Œï¼Œå¹¶åœ¨æ–‡ä»¶æ›´æ–°æ—¶å®æ—¶è¿½åŠ æ˜¾ç¤ºï¼Œæ²¡æœ‰-né»˜è®¤10è¡Œï¼‰ sed -n â€˜2,$pâ€™ ab ï¼šæ˜¾ç¤ºç¬¬äºŒè¡Œåˆ°æœ€åä¸€è¡Œï¼› sed -n â€˜/æœç´¢çš„å…³é”®è¯/pâ€™ a.txt ï¼šæ˜¾ç¤ºåŒ…æ‹¬å…³é”®è¯æ‰€åœ¨è¡Œ less a.txt |grep æœç´¢çš„å…³é”®è¯ ï¼šæ˜¾ç¤ºåŒ…æ‹¬å…³é”®è¯æ‰€åœ¨è¡Œ cat -n a.txt |grep æœç´¢çš„å…³é”®è¯ ï¼šæ˜¾ç¤ºåŒ…æ‹¬å…³é”®è¯æ‰€åœ¨è¡Œï¼ˆè¿è¡Œå·ä¸€èµ·æ˜¾ç¤ºï¼‰ cat filename |grep abc -A10 ï¼šæŸ¥çœ‹filenameä¸­å«æœ‰abcæ‰€åœ¨è¡Œå10è¡Œï¼ˆA10ï¼‰ã€å‰10è¡Œï¼ˆB10ï¼‰å†…å®¹ less a.txt|grep git ï¼šæ˜¾ç¤ºå…³é”®è¯æ‰€åœ¨è¡Œï¼Œç®¡é“ç¬¦â€|â€å®ƒåªèƒ½å¤„ç†ç”±å‰é¢ä¸€ä¸ªæŒ‡ä»¤ä¼ å‡ºçš„æ­£ç¡®è¾“å‡ºä¿¡æ¯ï¼Œå¯¹é”™è¯¯ä¿¡æ¯ä¿¡æ¯æ²¡æœ‰ç›´æ¥å¤„ç†èƒ½åŠ›ã€‚ç„¶åä¼ é€’ç»™ä¸‹ä¸€ä¸ªå‘½ä»¤ï¼Œä½œä¸ºæ ‡å‡†çš„è¾“å…¥ï¼› cat /etc/passwd |awk -F â€˜:â€™ â€˜{print $1}â€™ ï¼šæ˜¾ç¤ºç¬¬ä¸€åˆ— æ–‡æœ¬å¤„ç† ls -l&gt;file ï¼šè¾“å‡ºé‡å®šå‘&gt;ï¼ˆæ”¹å˜åŸæ¥ç³»ç»Ÿå‘½ä»¤çš„é»˜è®¤æ‰§è¡Œæ–¹å¼ï¼‰ï¼šls -lå‘½ä»¤ç»“æœè¾“å‡ºåˆ°fileæ–‡ä»¶ä¸­ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™è¦†ç›– cat file1 &gt;&gt;file ï¼šè¾“å‡ºé‡å®šå‘ä¹‹catå‘½ä»¤ç»“æœè¾“å‡ºè¿½åŠ åˆ°fileæ–‡ä»¶(&gt;è¡¨ç¤ºè¦†ç›–åŸæ–‡ä»¶å†…å®¹ï¼Œ&gt;&gt;è¡¨ç¤ºè¿½åŠ å†…å®¹) ls fileno 2&gt;file ï¼š 2&gt;è¡¨ç¤ºé‡å®šå‘æ ‡å‡†é”™è¯¯è¾“å‡ºï¼ˆæ–‡ä»¶ä¸å­˜åœ¨ï¼ŒæŠ¥é”™ä¿¡æ¯ä¿å­˜è‡³fileæ–‡ä»¶ï¼‰ï¼› cowsay &lt;a.txt :é‡å®šå‘æ ‡å‡†è¾“å…¥â€™å‘½ä»¤&lt;æ–‡ä»¶â€™è¡¨ç¤ºå°†æ–‡ä»¶åšä¸ºå‘½ä»¤çš„è¾“å…¥ï¼ˆä¸ºä»æ–‡ä»¶è¯»æ•°æ®ä½œä¸ºè¾“å…¥ï¼‰ sed -i â€˜4,$dâ€™ a.txt ï¼šåˆ é™¤ç¬¬å››è¡Œåˆ°æœ€åä¸€è¡Œï¼ˆ$è¡¨ç¤ºæœ€åä¸€è¡Œï¼‰ï¼ˆsedå¯ä»¥å¢åˆ æ”¹æŸ¥æ–‡ä»¶å†…å®¹ï¼‰ sed -i â€˜$a å¢åŠ çš„å­—ç¬¦ä¸²â€™ a.txt ï¼šåœ¨æœ€åä¸€è¡Œçš„ä¸‹ä¸€è¡Œå¢åŠ å­—ç¬¦ä¸² sed -i â€˜s/old/new/gâ€™ a.txt :æ›¿æ¢å­—ç¬¦ä¸²ï¼›æ ¼å¼ä¸ºsed â€˜s/è¦æ›¿æ¢çš„å­—ç¬¦ä¸²/æ–°çš„å­—ç¬¦ä¸²/gâ€™ ä¿®æ”¹çš„æ–‡ä»¶ grep -o â€˜å…³é”®è¯â€™ test.log|wc -l :ç»Ÿè®¡æŸä¸ªå…³é”®è¯åœ¨æŸä¸ªæ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°ï¼ˆå¦‚å‡ºç°3æ¬¡è¾“å‡º3ï¼‰ vim æ–‡ä»¶ï¼šç¼–è¾‘æŸ¥çœ‹æ–‡ä»¶ï¼ˆåŒviï¼‰ ç”¨æˆ·ä¸æƒé™ useradd ç”¨æˆ·å ï¼šåˆ›å»ºç”¨æˆ· userdel -r ç”¨æˆ·å :åˆ é™¤ç”¨æˆ·ï¼šï¼ˆ-rè¡¨ç¤ºæŠŠç”¨æˆ·çš„ä¸»ç›®å½•ä¸€èµ·åˆ é™¤ï¼‰ usermod -g ç»„å ç”¨æˆ·å ï¼šä¿®æ”¹ç”¨æˆ·çš„ç»„ usermod -aG ç»„å ç”¨æˆ·å ï¼šå°†ç”¨æˆ·æ·»åŠ åˆ°ç»„ groups test ï¼šæŸ¥çœ‹testç”¨æˆ·æ‰€åœ¨çš„ç»„ cat /etc/group |grep test ï¼šæŸ¥çœ‹testç”¨æˆ·è¯¦æƒ…ï¼šç”¨æˆ·å:å£ä»¤:ç”¨æˆ·æ ‡è¯†å·:ç»„æ ‡è¯†å·:æ³¨é‡Šæ€§æè¿°:ä¸»ç›®å½•:ç™»å½•Shell passwd [ludf] ç”¨æˆ·å ï¼šç”¨æˆ·æ”¹è‡ªå·±å¯†ç ï¼Œä¸éœ€è¦è¾“å…¥ç”¨æˆ·åï¼Œé€‰é¡¹-d:æŒ‡å®šç©ºå£ä»¤,-l:ç¦ç”¨æŸç”¨æˆ·ï¼Œ-uè§£ç¦æŸç”¨æˆ·ï¼Œ-fï¼šå¼ºè¿«ç”¨æˆ·ä¸‹æ¬¡ç™»å½•æ—¶ä¿®æ”¹å£ä»¤ groupadd ç»„å ï¼šåˆ›å»ºç”¨æˆ·ç»„ groupdel ç”¨æˆ·ç»„ ï¼šåˆ é™¤ç»„ groupmod -n æ–°ç»„å æ—§ç»„å ï¼šä¿®æ”¹ç”¨æˆ·ç»„åå­— su - ç”¨æˆ·åï¼šå®Œæ•´çš„åˆ‡æ¢åˆ°ä¸€ä¸ªç”¨æˆ·ç¯å¢ƒï¼ˆç›¸å½“äºç™»å½•ï¼‰ï¼ˆå»ºè®®ç”¨è¿™ä¸ªï¼‰ï¼ˆé€€å‡ºç”¨æˆ·ï¼šexitï¼‰ su ç”¨æˆ·å :åˆ‡æ¢åˆ°ç”¨æˆ·çš„èº«ä»½ï¼ˆç¯å¢ƒå˜é‡ç­‰æ²¡å˜ï¼Œå¯¼è‡´å¾ˆå¤šå‘½ä»¤è¦åŠ ä¸Šç»å¯¹è·¯å¾„æ‰èƒ½æ‰§è¡Œï¼‰ sudo å‘½ä»¤ ï¼šä»¥rootçš„èº«ä»½æ‰§è¡Œå‘½ä»¤ï¼ˆè¾“å…¥ç”¨æˆ·è‡ªå·±çš„å¯†ç ï¼Œè€Œsuä¸ºè¾“å…¥è¦åˆ‡æ¢ç”¨æˆ·çš„å¯†ç ï¼Œæ™®é€šç”¨æˆ·éœ€è®¾ç½®/etc/sudoersæ‰å¯ç”¨sudoï¼‰ SSH å…å¯†ç™»å½• ï¼š 1234567891011#ä½¿ç”¨OpenSSHç”Ÿæˆå¯†é’¥ssh-keygen -t rsa#å…¬é’¥ä¿¡æ¯å†™å…¥authorized_keysæ–‡ä»¶ä¸­å¹¶è®¾ç½®æƒé™cd ~/.sshcat id_rsa.pub &gt;&gt; authorized_keyschmod 700 ~/.sshchmod 600 ~/.ssh/authorized_keys#ç”Ÿæˆputtyçš„ç§é’¥ï¼ˆPuttyä½¿ç”¨çš„ç§é’¥æ ¼å¼å’ŒOpenSSHç”Ÿæˆçš„æœ‰ç‚¹ä¸åŒï¼Œéœ€è¦è½¬æ¢ä¸€ä¸‹puttyæ‰èƒ½ä½¿ç”¨ï¼‰æŠŠç§é’¥id_rsaä¸‹è½½åˆ°æœ¬åœ°ååç¼€æ”¹æˆ.ppkï¼Œå¦‚id_rsa_ip_commonuser.ppkä½¿ç”¨puttygenå·¥å…·çš„â€œLoadâ€è¯»å–id_rsaæ–‡ä»¶ï¼Œç‚¹å‡»â€œSave private keyâ€ä¿ç•™ç§é’¥ï¼›puttyå…³è”ç§é’¥æ–‡ä»¶å³å¯ç™»é™†æœåŠ¡å™¨ ç£ç›˜ç®¡ç† fdisk -l :æŸ¥çœ‹ç£ç›˜ä¿¡æ¯(å¯æŸ¥å„ä¸ªç¡¬ç›˜å®¹é‡å¤§å°ã€å¯æŸ¥å„ç¡¬ç›˜åˆ†åŒºæƒ…å†µ)ï¼ˆå„ç¡¬ç›˜æˆ–ç¡¬ç›˜ä¸‹åˆ†åŒºå¿…é¡»æŒ‚è½½åˆ°æŸä¸ªç›®å½•æ‰èƒ½è¢«ä½¿ç”¨ï¼‰ fdisk /dev/sdb :å¯¹ç¡¬ç›˜sdbåˆ›å»ºåˆ†åŒº mkfs.ext4 /dev/vdb1 :ä¿®æ”¹æ ¼å¼åŒ–ç¡¬ç›˜åˆ†åŒºvdb1çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ä¸ºext4 df -TH :æ˜¾ç¤ºç£ç›˜çš„ç©ºé—´ä½¿ç”¨æƒ…å†µã€æ–‡ä»¶ç³»ç»Ÿç±»å‹ã€æŒ‚è½½ç‚¹ï¼ˆç¡¬ç›˜æŒ‚è½½äº†æ‰ä¼šæ˜¾ç¤ºï¼‰ df -h /var/log :ï¼ˆæ˜¾ç¤ºlogæ‰€åœ¨åˆ†åŒºï¼ˆæŒ‚è½½ç‚¹ï¼‰ã€ç›®å½•æ‰€åœ¨ç£ç›˜åŠå¯ç”¨çš„ç£ç›˜å®¹é‡ï¼‰ *du -sm /var/log/ | sort -rn** : æ ¹æ®å ç”¨ç£ç›˜ç©ºé—´å¤§å°æ’åºï¼ˆMBï¼‰æŸç›®å½•ä¸‹æ–‡ä»¶å’Œç›®å½•å¤§å° mount /dev/sda1 /mnt ï¼šç¡¬ç›˜sda1æŒ‚è½½åˆ°/mntç›®å½•ï¼ˆmount è£…ç½®æ–‡ä»¶å æŒ‚è½½ç‚¹ï¼‰ mount -t cifs -o username=luolanguo,password=winç”¨æˆ·è´¦å·å¯†ç ,vers=3.0 //10.2.1.178/G /mnt/usb :è¿œç¨‹linux å…±äº«æŒ‚è½½windowsçš„Uç›˜,Gä¸ºUç›˜å…±äº«åï¼Œéœ€è®¾ç½®Uç›˜å…±äº« mount -o loop /opt/soft/CentOS-7-x86_64-DVD-1708.iso /media/CentOS ï¼šæŒ‚è½½isoæ–‡ä»¶ umount /dev/sda1 ï¼šå–æ¶ˆæŒ‚è½½ï¼ˆumount è£…ç½®æ–‡ä»¶åæˆ–æŒ‚è½½ç‚¹ï¼‰ å‹ç¼©ã€è§£å‹å’Œæ‰“åŒ…å¤‡ä»½ å•çº¯tarä»…ä¸ºæ‰“åŒ…ï¼ˆå¤šä¸ªæ–‡ä»¶åŒ…æˆä¸€ä¸ªå¤§æ–‡ä»¶ï¼‰ï¼ŒåŠ ä¸Šå‚æ•°-j(bzip2æ ¼å¼.bz2)ã€-zï¼ˆgzipæ ¼å¼.gzï¼‰å¯ä»¥å¤‡ä»½ã€å‹ç¼©(-c)ã€è§£å‹ï¼ˆ-xï¼‰ï¼Œå¤‡ä»½ä¸€èˆ¬æ¯”å‹ç¼©å¤šåŠ å‚æ•°-pï¼ˆä¿ç•™åŸæœ¬æ–‡ä»¶çš„æƒé™ä¸å±æ€§ï¼‰ï¼Œ-Cå¯ä»¥æŒ‡å®šè§£å‹åˆ°ç‰¹å®šç›®å½•ï¼›bzip2ã€gzipåªèƒ½å¯¹å•ä¸€æ–‡ä»¶å‹ç¼©ï¼› file æ–‡ä»¶å ï¼šæŸ¥æ–‡ä»¶ç±»å‹ï¼ˆå¯çœ‹æ˜¯ç”¨å“ªä¸€ç§æ–¹å¼å‹ç¼©çš„ï¼‰ tar -zxvf a.tar.gz -C ./test ï¼šè§£å‹tar.gzåˆ°å½“å‰ç›®å½•ä¸‹çš„testç›®å½• tar -zcvf /opt/c.tar.gz ./a/ ï¼šå‹ç¼©tar.gzï¼ˆæŠŠå½“å‰ç›®å½•ä¸‹çš„aç›®å½•åŠç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å‹ç¼©ä¸º /opt/ç›®å½•ä¸‹çš„c.tar.gzï¼Œè¿™æ ·tar -zxvf c.tar.gzè§£å‹å‡ºæ¥å¸¦æœ‰ç›®å½•aï¼‰ tar -jxvf a.tar.bz2 ï¼šè§£å‹tar.bz2ï¼ˆåˆ°å½“å‰ç›®å½•ï¼‰ tar -jcvf c.tar.bz2 ./a/ ï¼šå‹ç¼©tar.bz2ï¼ˆæŠŠå½“å‰ç›®å½•ä¸‹çš„aç›®å½•åŠç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å‹ç¼©åˆ°å½“å‰ç›®å½•ä¸‹ä¸ºc.tar.gz2ï¼‰ unzip a.zip ï¼šè§£å‹zipï¼ˆåˆ°å½“å‰ç›®å½•ï¼‰ unzip -o mdmtest.war -d /opt/mdm ï¼šæ¨èä½¿ç”¨unzipè§£å‹waråŒ…ï¼ˆ-oè¦†ç›–åŸæœ‰æ–‡ä»¶ï¼Œ-dæŒ‡å®šæ–‡ä»¶è§£å‹åå­˜å‚¨çš„ç›®å½•ï¼‰ zip -r c.zip ./a/ :å‹ç¼©zip(æŠŠå½“å‰ç›®å½•ä¸‹çš„aç›®å½•åŠç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å‹ç¼©åˆ°å½“å‰ç›®å½•ä¸‹ä¸ºc.zip bzip2 -k file1 ï¼š å‹ç¼©ä¸€ä¸ª â€˜file1â€™ çš„æ–‡ä»¶ï¼ˆ-kè¡¨ç¤ºä¿ç•™æºæ–‡ä»¶ï¼‰ï¼ˆbzip2æ ¼å¼ï¼Œæ¯”gzipå¥½ï¼‰ bzip2 -d -k file1.bz2 ï¼š è§£å‹ä¸€ä¸ªå«åš â€˜file1.bz2â€™çš„æ–‡ä»¶ gzip file1 ï¼š å‹ç¼©ä¸€ä¸ªå«åš â€˜file1â€™çš„æ–‡ä»¶ï¼ˆgzipæ ¼å¼ï¼‰ï¼ˆä¸èƒ½ä¿ç•™æºæ–‡ä»¶ï¼‰ gzip -9 file1 ï¼š æœ€å¤§ç¨‹åº¦å‹ç¼© gzip -d file1.gz ï¼š è§£å‹ç¼©ä¸€ä¸ªå«åš â€˜file1â€™çš„æ–‡ä»¶ è½¯ä»¶å®‰è£… å°½é‡ç”¨yumæºï¼ˆapt-getï¼‰å®‰è£…ï¼Œä¸è¡Œå°±rpmã€debåŒ…å®‰è£…ï¼Œèƒ½ä¸æ‰‹åŠ¨ç¼–è¯‘çš„å°±ä¸è¦æ‰‹åŠ¨ç¼–è¯‘ï¼› dpkgåªèƒ½å®‰è£…å·²ç»ä¸‹è½½åˆ°æœ¬åœ°æœºå™¨ä¸Šçš„debåŒ…. apt-getèƒ½åœ¨çº¿ä¸‹è½½å¹¶å®‰è£…debåŒ…,èƒ½æ›´æ–°ç³»ç»Ÿ,ä¸”è¿˜èƒ½è‡ªåŠ¨å¤„ç†åŒ…ä¸åŒ…ä¹‹é—´çš„ä¾èµ–é—®é¢˜,è¿™ä¸ªæ˜¯dpkgå·¥å…·æ‰€ä¸å…·å¤‡çš„ï¼› rpm åªèƒ½å®‰è£…å·²ç»ä¸‹è½½åˆ°æœ¬åœ°æœºå™¨ä¸Šçš„rpm åŒ…. yumèƒ½åœ¨çº¿ä¸‹è½½å¹¶å®‰è£…rpmåŒ…,èƒ½æ›´æ–°ç³»ç»Ÿ,ä¸”è¿˜èƒ½è‡ªåŠ¨å¤„ç†åŒ…ä¸åŒ…ä¹‹é—´çš„ä¾èµ–é—®é¢˜,è¿™ä¸ªæ˜¯rpm å·¥å…·æ‰€ä¸å…·å¤‡çš„; yumã€rpmå®‰è£…æ–‡ä»¶åˆ†å¸ƒåœ¨/usrçš„binã€libã€shareä¸åŒç›®å½•ï¼Œä¸ç”¨é…ç½®PATHï¼Œç›´æ¥ç”¨å‘½ä»¤ï¼Œä½†å¯ç”¨å‘½ä»¤å¸è½½æ›´æ–°ï¼› æ‰‹åŠ¨ç¼–è¯‘è½¯ä»¶ï¼Œé»˜è®¤ä½ç½®ä¸º/usr/localä¸‹ä¸åŒå­ç›®å½•ä¸‹,ä¸ç”¨é…ç½®PATHç›´æ¥ç”¨å‘½ä»¤ï¼ˆæ‰‹åŠ¨æŒ‡å®šå®‰è£…è·¯å¾„éœ€è¦åŠ PATHï¼‰ï¼Œä½¿å¾—è½¯ä»¶æ›´æ–°å’Œåˆ é™¤å˜å¾—å¾ˆéº»çƒ¦ã€‚ç¼–è¯‘å®‰è£…çš„è½¯ä»¶æ²¡æœ‰å¸è½½å‘½ä»¤ï¼Œå¸è½½å°±æ˜¯æŠŠæ‰€æœ‰è¿™ä¸ªè½¯ä»¶çš„æ–‡ä»¶åˆ é™¤ã€‚ äºŒè¿›åˆ¶(Binaries)åŒ…yumå®‰è£… åœ¨çº¿ä¸‹è½½å¹¶å®‰è£…rpmåŒ…ï¼Œé€‚ç”¨äºCentOSã€Fedoraã€RedHatåŠç±»ä¼¼ç³»ç»Ÿ yum install epel-releas ï¼šå®‰è£…ç¬¬ä¸‰æ–¹yumæºEPELï¼ˆä¼ä¸šç‰ˆ Linux é™„åŠ è½¯ä»¶åŒ…çš„ç®€ç§°ï¼‰ yum repolist enabled ï¼šæ˜¾ç¤ºå¯ç”¨çš„æºä»“åº“ï¼ˆ/etc/yum.repos.d/ç›®å½•ä¸‹é…ç½®ï¼‰ yum install yum-fastestmirror ï¼šè‡ªåŠ¨é€‰æ‹©æœ€å¿«çš„yumæº yum list installed |grep java ï¼šåˆ—å‡ºå·²å®‰è£…çš„è½¯ä»¶ï¼ˆæŸ¥çœ‹å·²å®‰è£…çš„JDKï¼‰ yum remove java-1.8.0-openjdk.x86_64 ï¼šå¸è½½è½¯ä»¶ï¼ˆå¸è½½JDKï¼‰ *yum list java ** ï¼šåˆ—å‡ºå·²å®‰è£…å’Œå¯å®‰è£…çš„è½¯ä»¶ï¼ˆæŸ¥çœ‹yumåº“ä¸­çš„JDKåŒ…ï¼‰ yum install [-y] java-1.8.0-openjdk ï¼šå®‰è£…è½¯ä»¶JDK(-yè‡ªåŠ¨å®‰è£…)ï¼ˆæ¨èè¿™ç§æ–¹å¼å®‰è£…ï¼‰ yum install docker-ce-18.03.1.ce ï¼šå®‰è£…æŒ‡å®šç‰ˆæœ¬çš„è½¯ä»¶ï¼ˆå·²çŸ¥docker-ce.x86_64 18.03.1.ce-1.el7.centosï¼Œåˆ™rpmåŒ…åä¸ºdocker-ce-18.03.1.ce-1.el7.centos.x86_64.rpmï¼‰ **yum check-update [kernel] ** ï¼šåˆ—å‡ºæ‰€æœ‰å¯æ›´æ–°çš„è½¯ä»¶ï¼ˆæ£€æŸ¥æ›´æ–°kernelï¼‰ yum update tomcat ï¼šæ›´æ–°è½¯ä»¶ï¼ˆå¯æ‰€æœ‰ï¼‰ rpm -ql è½¯ä»¶åç§° ï¼šæŸ¥è¯¢yumå®‰è£…è·¯å¾„ï¼ˆè½¯ä»¶åç§°å¯é€šè¿‡rpm -qa|grep javaï¼‰ yum info kernel ï¼šæŸ¥çœ‹è½¯ä»¶ï¼ˆkernelï¼‰çš„ä¿¡æ¯ yum clean all ï¼šï¼ˆæ¸…é™¤ç¼“å­˜ï¼Œä½¿æœ€æ–°çš„yumé…ç½®ç”Ÿæ•ˆï¼‰ yumå®‰è£…å¸¸ç”¨å·¥å…· yum install -y unzip zip ï¼šå®‰è£…å‹ç¼©ã€è§£å‹ç¼©å‘½ä»¤ï¼ˆzipã€unzipï¼‰ rpmåŒ…æ‰‹åŠ¨ä¸‹è½½å®‰è£… yumä¸­æ²¡æœ‰æ—¶ç”¨ï¼Œé€‚ç”¨äºCentOSã€Fedoraã€RedHatåŠç±»ä¼¼ç³»ç»Ÿï¼› wget -P /opt https://ç½‘å€ ï¼šä¸‹è½½åˆ°/optç›®å½• rpm -ivh wps-office-ç‰ˆæœ¬.x86_64.rpm :å®‰è£…rpmåŒ…ï¼ˆåŒ…è¦å…ˆä¸‹è½½ï¼‰ï¼ˆè¦å…ˆè£…ä¾èµ–åŒ…ï¼‰ rpm -e wps-office ï¼šå¸è½½è½¯ä»¶ï¼ˆæ³¨æ„ä¸è¦è½¯ä»¶åä¸è¦ç‰ˆæœ¬å·ï¼‰ rpm -qa |grep wps ï¼šæŸ¥çœ‹å®‰è£…çš„rpmåŒ…ï¼ˆå¯ç”¨äºæŸ¥è¯¢rpmåŒ…æ˜¯å¦è¢«å®‰è£…ï¼‰ rpm -ql è½¯ä»¶åç§° ï¼šæŸ¥çœ‹rpmåŒ…å®‰è£…è·¯å¾„ï¼ˆè½¯ä»¶åç§°å¯é€šè¿‡rpm -qa|grep javaï¼‰ aptæ–¹å¼å®‰è£… å®‰è£…debåŒ…ï¼Œç±»ä¼¼yumå®‰è£…ï¼Œé€‚ç”¨äºDebian, Ubuntu ä»¥åŠç±»ä¼¼ç³»ç»Ÿï¼› apt-get install aptitude ï¼šå®‰è£…aptitudeå·¥å…·,å®ç°ä¾èµ–è‡ªåŠ¨å®‰è£…ï¼Œä¾èµ–ç‰ˆæœ¬è‡ªåŠ¨é™çº§æˆ–å‡çº§ aptitude install è½¯ä»¶ ï¼šå®‰è£…è½¯ä»¶ï¼ˆæ¨èè¿™ç§æ–¹å¼å®‰è£…ï¼‰ apt-cache search è½¯ä»¶ ï¼šæœç´¢è½¯ä»¶ apt-get install è½¯ä»¶ ï¼šå®‰è£…è½¯ä»¶ apt-get purge è½¯ä»¶ ï¼šå¸è½½è½¯ä»¶ï¼ˆåŒ…æ‹¬é…ç½®æ–‡ä»¶ï¼Œåªåˆ é™¤è½¯ä»¶purgeæ¢æˆremoveï¼‰ apt-get upgrade ï¼šæ›´æ–°æ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶åŒ… apt-get update ï¼šå‡çº§åˆ—è¡¨ä¸­çš„è½¯ä»¶åŒ… apt-get clean ï¼šä»ä¸‹è½½çš„è½¯ä»¶åŒ…ä¸­æ¸…ç†ç¼“å­˜ debåŒ…å®‰è£… é€‚ç”¨äºDebian, Ubuntu ä»¥åŠç±»ä¼¼ç³»ç»Ÿï¼› dpkg -i package.deb ï¼šå®‰è£…ä¸€ä¸ª deb åŒ… dpkg -r package_name ï¼šä»ç³»ç»Ÿåˆ é™¤ä¸€ä¸ª deb åŒ… dpkg -l |grep chrome ï¼šæŸ¥è¯¢ç³»ç»Ÿä¸­æ‰€æœ‰å·²ç»å®‰è£…çš„ deb åŒ… dpkg -L è½¯ä»¶åç§° ï¼šæŸ¥è½¯ä»¶å®‰è£…çš„æ–‡ä»¶ è§£å‹å³ç”¨ å¤§å¤šæ•°éå¼€æºçš„å•†ä¸šè½¯ä»¶éƒ½é‡‡å–è¿™ç§åŠæ³•ï¼› äºŒè¿›åˆ¶ï¼ˆBinariesï¼‰åŒ…å¦‚apache-jmeter-3.3.tgzï¼Œä¸‹è½½å¤åˆ¶è§£å‹åˆ°/optï¼Œç„¶åç„¶åå°†è¯¥è½¯ä»¶çš„ bin ç›®å½•åŠ å…¥åˆ° PATH ä¸­å³å¯ï¼ˆvim /etc/profile export PATH=$PATH:/opt/apache-jmeter-3.3/binï¼‰ï¼› è½¯ä»¶è‡ªå·±çš„æ¨¡å—/åŒ…ç®¡ç†å™¨ å¦‚pythonï¼šç³»ç»Ÿçš„æºä¸­ä¸å¯èƒ½åŒ…å«è¯¥è½¯ä»¶çš„æ‰€æœ‰æ¨¡å—ï¼› ç³»ç»Ÿçš„æºä¸­è¯¥è½¯ä»¶çš„æ¨¡å—çš„æ›´æ–°è¦è¿œè¿œæ»åäºæœ€æ–°ç‰ˆæœ¬ï¼›æ‰‹åŠ¨å®‰è£…pythonï¼Œå¹¶ç”¨Python è‡ªå¸¦çš„ pip å®‰è£…æ¨¡å—ï¼ˆç±»ä¼¼yumï¼‰ï¼› **pip install redis ** ï¼šå®‰è£…pythonè½¯ä»¶åŒ…redis **pip unstall redis ** :å¸è½½ **pip show â€“files redis ** :pipæŸ¥çœ‹å·²å®‰è£…çš„åŒ… pip list â€“outdated :æ£€æŸ¥æ›´æ–° æºä»£ç (Source)åŒ…ç¼–è¯‘å®‰è£… æºä»£ç åŒ…ï¼ˆä¸€èˆ¬æœ‰installæ–‡ä»¶ï¼‰å¦‚hello-2.2.tar.bz2ï¼Œä¸‹è½½å¤åˆ¶åˆ°/opt; tar -jxvf hello-2.2.tar.bz2 :è§£å‹ ./configure â€“prefix=/opt/è½¯ä»¶ç›®å½•åç§° :ä¸ºç¼–è¯‘åšå¥½å‡†å¤‡ï¼ŒåŠ ä¸Š prefix æ‰‹åŠ¨æŒ‡å®šå®‰è£…è·¯å¾„ make ï¼šç¼–è¯‘ make install ï¼šå®‰è£… make clean ï¼šåˆ é™¤å®‰è£…æ—¶äº§ç”Ÿçš„ä¸´æ—¶æ–‡ä»¶ vim /etc/profile export PATH=$PATH:/opt/ç›®å½•/bin ï¼šæ‰‹åŠ¨æŒ‡å®šå®‰è£…è·¯å¾„éœ€è¦åŠ path hello ï¼šæ‰§è¡Œè½¯ä»¶ï¼šçœ‹INSTALLå’ŒREADMEæ–‡ä»¶ï¼ˆæ˜¯å¦æºç åŒ…ã€å¦‚ä½•å®‰è£…ã€æ‰§è¡Œéƒ½çœ‹è¿™ä¸¤ä¸ªï¼‰ rm -rf è½¯ä»¶ç›®å½•åç§° :å¸è½½è½¯ä»¶ æœåŠ¡ä¸è¿›ç¨‹ netstat -ntlp :æŸ¥çœ‹æœåŠ¡å™¨æ‰€æœ‰è¢«å ç”¨ç«¯å£ netstat -lnp|grep ç«¯å£å·/è¿›ç¨‹å·/è¿›ç¨‹å :æ ¹æ®æŸ¥ç«¯å£æ˜¯å¦æ‰“å¼€ç¡®è®¤æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼Œé…åˆpså‘½ä»¤å¯æŸ¥æœåŠ¡å ç”¨çš„ç«¯å£å¸¸ç”¨å‚æ•°ï¼š-pï¼šè·å–è¿›ç¨‹åã€è¿›ç¨‹å·ï¼›-nï¼šç¦ç”¨åŸŸåè§£æåŠŸèƒ½ï¼ŒæŸ¥å‡ºIPä¸”é€Ÿåº¦å¿«ï¼›-lï¼šåªåˆ—å‡ºç›‘å¬ä¸­çš„è¿æ¥ï¼›-tï¼šåªåˆ—å‡º TCPåè®®çš„è¿æ¥ã€‚ç¤ºä¾‹ï¼šps aux|grep tomcat netstat -lnp|grep è¿›ç¨‹å· ï¼šæŸ¥tomcatæœåŠ¡å ç”¨çš„ç«¯å£ï¼› ps aux|grep è¿›ç¨‹å·/è¿›ç¨‹å¯åŠ¨å‘½ä»¤/æœåŠ¡å :è¿›ç¨‹æŸ¥çœ‹å‘½ä»¤ps(å¯æŸ¥è¿›ç¨‹çŠ¶æ€ï¼›è¿›ç¨‹å ç”¨cpuã€å†…å­˜ï¼›é…åˆnetstatæ ¹æ®æŸæœåŠ¡ç«¯å£æŸ¥å‡ºè¿›ç¨‹å·ç”¨äºæ€è¿›ç¨‹ï¼ŒæŸ¥æœåŠ¡å¯åŠ¨å‘½ä»¤åŠæœåŠ¡è·¯å¾„ ï¼‰ æŸ¥çœ‹æ–‡æœ¬catï¼šä»ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºå…¨éƒ¨çš„æ–‡æœ¬å†…å®¹ï¼›tacï¼šä»æœ€åä¸€è¡Œå¼€å§‹ï¼Œæ˜¾ç¤ºå…¨éƒ¨åˆ†æ–‡æœ¬å†…å®¹ï¼Œä¸catç›¸åï¼›nl:æ˜¾ç¤ºæ–‡æœ¬æ—¶ï¼Œå¯ä»¥è¾“å‡ºè¡Œå·ï¼›more:æŒ‰é¡µæ˜¾ç¤ºæ–‡æœ¬å†…å®¹ï¼›less:ä¸moreå·®ä¸å¤šï¼Œä¹Ÿæ˜¯æŒ‰é¡µæ˜¾ç¤ºæ–‡æœ¬å†…å®¹ï¼ŒåŒºåˆ«æ˜¯lesså¯ä»¥ä¸€è¡Œä¸€è¡Œçš„å›é€€ï¼Œmoreå›é€€åªèƒ½ä¸€é¡µä¸€é¡µå›é€€ï¼›head:ä»å¤´å¼€å§‹æ˜¾ç¤ºæ–‡ä»¶æŒ‡å®šçš„è¡Œæ•°ï¼›tail:æ˜¾ç¤ºæ–‡ä»¶æŒ‡å®šçš„ç»“å°¾çš„è¡Œæ•°ï¼Œä½†æ¯ä¸€è¡Œçš„ä½ç½®è¿˜æ˜¯åŸæ–‡ä»¶ä¸­çš„ä½ç½®ï¼Œä¸ä¼šåƒtacé‚£æ ·ä¸åŸæ–‡ä»¶ç›¸åã€‚vi: NBçš„Linuxæ–‡æœ¬ç¼–è¾‘å™¨ã€‚","categories":[{"name":"Linux","slug":"Linux","permalink":"http://www.postman.life/categories/Linux/"}],"tags":[]},{"title":"Debianä¸‹Bochså®‰è£…è®°å½•","slug":"Debianä¸‹Bochså®‰è£…è®°å½•","date":"2021-06-13T15:31:08.000Z","updated":"2021-06-14T14:20:30.055Z","comments":true,"path":"2021/06/13/Debianä¸‹Bochså®‰è£…è®°å½•/","link":"","permalink":"http://www.postman.life/2021/06/13/Debian%E4%B8%8BBochs%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/","excerpt":"","text":"ä¸‹è½½åœ°å€ address:https://sourceforge.net/projects/bochs/files/bochs/2.6.9/ å®‰è£…Bochsç¬¬ä¸€ç§å®‰è£…æ–¹å¼ï¼Œéœ€è¦ç¼–è¯‘ä¸‹è½½ curl -O https://nchc.dl.sourceforge.net/project/bochs/bochs/2.6.9/bochs-2.6.9.tar.gz è§£å‹ tar -zxvf bochs-2.6.9.tar.gz cdè¿›å…¥ç›®å½• cd bochs-2.6.9 é…ç½®ç¼–è¯‘é€‰é¡¹ ./configure â€“with-x11 â€“with-wx â€“enable-debugger â€“enable-disasm â€“enable-all-optimizations â€“enable-readline â€“enable-long-phy-address â€“enable-ltdl-install â€“enable-idle-hack â€“enable-plugins â€“enable-a20-pin â€“enable-x86-64 â€“enable-smp â€“enable-cpu-level=6 â€“enable-large-ramfile â€“enable-repeat-speedups â€“enable-fast-function-calls â€“enable-handlers-chaining â€“enable-trace-linking â€“enable-configurable-msrs â€“enable-show-ips â€“enable-cpp â€“enable-debugger-gui â€“enable-iodebug â€“enable-logging â€“enable-assert-checks â€“enable-fpu â€“enable-vmx=2 â€“enable-svm â€“enable-3dnow â€“enable-alignment-check â€“enable-monitor-mwait â€“enable-avx â€“enable-evex â€“enable-x86-debugger â€“enable-pci â€“enable-usb â€“enable-voodoo MakeFileé…ç½®å®Œä¹‹åè¾“å…¥makeå‘½ä»¤ç¼–è¯‘ 1make æŠ¥é”™è§£å†³æ–¹æ³• 1make: *** No rule to make target &#x27;misc/bximage.cc&#x27;, needed by &#x27;misc/bximage.o&#x27;. Stop. è§£å†³æ–¹æ¡ˆä¸ºï¼š 1cp misc&#x2F;bximage.cpp misc&#x2F;bximage.cc æ¥ä¸‹æ¥è¿˜æœ‰ç±»ä¼¼çš„No rule to make target â€˜xxxxâ€™ï¼Œè§£å†³æ–¹æ¡ˆç±»ä¼¼ã€‚ 12345cp iodev/hdimage/hdimage.cpp iodev/hdimage/http://hdimage.cccp iodev/hdimage/vmware3.cpp iodev/hdimage/http://vmware3.cccp iodev/hdimage/vmware4.cpp iodev/hdimage/http://vmware4.cccp iodev/hdimage/vpc-img.cpp iodev/hdimage/http://vpc-img.cccp iodev/hdimage/vbox.cpp iodev/hdimage/http://vbox.cc makeæ‰§è¡ŒæˆåŠŸåï¼Œå®‰è£… make install ç¬¬äºŒç§å®‰è£…æ–¹å¼ï¼Œæˆ‘é€‰æ‹©çš„123apt-get install bochsapt-get install bochs-x å®‰è£…å®Œæˆä¹‹åï¼Œé…ç½®ä¼šåœ¨/etc/bochs-init ç›®å½•ä¸‹ æˆ‘ä»¬å¯ä»¥çœ‹çœ‹ ç›®å½•ä¸‹åŒ…å«äº†å“ªäº›æ–‡ä»¶ 1bochsrc init.sh ä»¥åŠ/usr/local/share/bochs/ç›®å½•ä¸‹åŒ…å«äº†å“ªäº›æ–‡ä»¶ 1234bios.bin-1.7.5 SeaBIOS-README VGABIOS-lgpl-latest-cirrusBIOS-bochs-latest VGABIOS-elpin-2.40 VGABIOS-lgpl-latest-cirrus-debugBIOS-bochs-legacy VGABIOS-elpin-LICENSE VGABIOS-lgpl-latest-debugkeymaps VGABIOS-lgpl-latest VGABIOS-lgpl-README éœ€è¦ç¨å¾®å¯¹è¿™ä¸¤ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ä½œä¸€ç‚¹è¯´æ˜ã€‚/etc/bochs-init/ç›®å½•é‡Œçš„bochsrcæ˜¯bochsçš„é…ç½®æ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ–‡ä»¶ï¼Œå®ƒå¿…é¡»è®¾ç½®å‡†å¤‡å¦åˆ™æ— æ³•è¿è¡Œbochsï¼Œè¿™ä¸ªæˆ‘ä»¬ç­‰ä¼šè¿˜éœ€è¦è¿›ä¸€æ­¥åœ°è®²è§£bochsrcæ–‡ä»¶ï¼›/usr/local/share/bochs/ç›®å½•é‡Œçš„å‡ ä¸ªæ–‡ä»¶æ˜¯bochsåœ¨åŠ è½½å†…æ ¸imageæ—¶çš„bioså¼•å¯¼ç”¨çš„æ¨¡æ‹Ÿç¨‹åºï¼Œä¹Ÿå°±æ˜¯è¯´å½“bochsæƒ³è¦è¿è¡Œbochsæ—¶ï¼Œå†…æ ¸imageçš„å¼•å¯¼è¿‡ç¨‹æ˜¯ç”±è¿™ä¸ªç›®å½•ä¸­çš„BIOS-bochs-latestå’ŒBIOS-bochs-legacyæ¥å®Œæˆçš„ã€‚ å¦‚æœè¿è¡Œbochså‡ºç°é”™è¯¯: display library â€˜sdlâ€™ not available åªéœ€è¦å°†bochsé…ç½®æ–‡ä»¶bochrcä¸­display_library:sdlåˆ é™¤æˆ–è€…æ”¹æˆxå³å¯ bochsrc é…ç½®æ–‡ä»¶ config_interface: textconfigdisplay_library : xromimage: file=/usr/share/bochs/BIOS-bochs-latestboot:floppymegs: 32vgaromimage: file=/usr/share/vgabios/vgabios.binfloppya:type=1_44, 1_44=â€/etc/bochs-init/boot.imgâ€, status=insertedata0: enabled=1, ioaddr1=0x1f0, ioaddr2=0x3f0, irq=14ata1: enabled=0, ioaddr1=0x170, ioaddr2=0x370, irq=15ata2: enabled=0, ioaddr1=0x1e8, ioaddr2=0x3e0, irq=11ata3: enabled=0, ioaddr1=0x168, ioaddr2=0x360, irq=9#ata0-master: type=disk, path=â€â€, mode=flat, cylinders=1024, heads=16, spt=63ata0-slave: type=cdrom, path=â€/dev/cdromâ€, status=inserted boot:floppy #ips: 1000000floppy_bootsig_check: disabled=0log: /dev/stdoutpanic: action=askerror: action=reportinfo: action=reportdebug: action=ignoredebugger_log: -com1: enabled=1, dev=/dev/ttyS0parport1: enabled=1, file=â€/dev/lp0â€sb16: midimode=1, midi=/dev/midi00, wavemode=1, wave=/dev/dsp, loglevel=2, log=/dev/stdout, dmatimer=600000#vga_update_interval: 300000#keyboard_serial_delay: 250#keyboard_paste_delay: 100000#floppy_command_delay: 500mouse: enabled=0#private_colormap: enabled=0#ne2k: ioaddr=0x240, irq=9, mac=b0:c4:20:00:00:00, ethmod=linux, ethdev=eth0#keyboard_mapping: enabled=0, map=/usr/share/bochs/keymaps/x11-pc-de.map#keyboard_type: mf#user_shortcut: keys=ctrlaltdel#magic_break: enabled=1#cmosimage: cmos.img#load32bitOSImage: os=nullkernel, path=../kernel.img, iolog=../vga_io.log#load32bitOSImage: os=linux, path=../linux.img, iolog=../vga_io.log, initrd=../initrd.img#i440fxsupport: enabled=1#usb1: enabled=1, ioaddr=0xFF80, irq=10#text_snapshot_check: enable Imgå¼•å¯¼å¯åŠ¨è½¯ç›˜åˆ¶ä½œå®‰è£…äº†bochsåï¼Œè¯¥è½¯ä»¶æä¾›ä¸€ä¸ªbximageå·¥å…·å¯ä»¥åˆ¶ä½œimgæ–‡ä»¶ã€‚ åˆ¶ä½œæ­¥éª¤å¦‚ä¸‹ï¼š bximage -&gt; [1] -&gt; 1.44M -&gt; boot.img","categories":[{"name":"Linux","slug":"Linux","permalink":"http://www.postman.life/categories/Linux/"},{"name":"Bochs","slug":"Linux/Bochs","permalink":"http://www.postman.life/categories/Linux/Bochs/"}],"tags":[]},{"title":"Springç¬”è®°","slug":"spring-application","date":"2021-05-25T16:22:10.000Z","updated":"2021-05-25T16:29:06.020Z","comments":true,"path":"2021/05/26/spring-application/","link":"","permalink":"http://www.postman.life/2021/05/26/spring-application/","excerpt":"","text":"Springç¬”è®°BeanFactoryå’ŒApplicationContextä¹‹é—´çš„å…³ç³» BeanFactoryå’ŒApplicationContextæ˜¯Springçš„ä¸¤å¤§æ ¸å¿ƒæ¥å£ï¼Œè€Œå…¶ä¸­ApplicationContextæ˜¯BeanFactoryçš„å­æ¥å£ã€‚å®ƒä»¬éƒ½å¯ä»¥å½“åšSpringçš„å®¹å™¨ï¼ŒSpringå®¹å™¨æ˜¯ç”ŸæˆBeanå®ä¾‹çš„å·¥å‚ï¼Œå¹¶ç®¡ç†å®¹å™¨ä¸­çš„Beanã€‚åœ¨åŸºäºSpringçš„Java EEåº”ç”¨ä¸­ï¼Œæ‰€æœ‰çš„ç»„ä»¶éƒ½è¢«å½“æˆBeanå¤„ç†ï¼ŒåŒ…æ‹¬æ•°æ®æºï¼ŒHibernateçš„SessionFactoryã€äº‹åŠ¡ç®¡ç†å™¨ç­‰ã€‚ ç”Ÿæ´»ä¸­æˆ‘ä»¬ä¸€èˆ¬ä¼šæŠŠç”Ÿäº§äº§å“çš„åœ°æ–¹ç§°ä¸ºå·¥å‚ï¼Œè€Œåœ¨è¿™é‡Œbeanå¯¹è±¡çš„åœ°æ–¹å®˜æ–¹å–åä¸ºBeanFactoryï¼Œç›´è¯‘Beanå·¥å‚ï¼ˆcom.springframework.beans.factory.BeanFactoryï¼‰ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§°BeanFactoryä¸ºIoCå®¹å™¨ï¼Œè€Œç§°ApplicationContextä¸ºåº”ç”¨ä¸Šä¸‹æ–‡ã€‚ Springçš„æ ¸å¿ƒæ˜¯å®¹å™¨ï¼Œè€Œå®¹å™¨å¹¶ä¸å”¯ä¸€ï¼Œæ¡†æ¶æœ¬èº«å°±æä¾›äº†å¾ˆå¤šä¸ªå®¹å™¨çš„å®ç°ï¼Œå¤§æ¦‚åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šä¸€ç§æ˜¯ä¸å¸¸ç”¨çš„BeanFactoryï¼Œè¿™æ˜¯æœ€ç®€å•çš„å®¹å™¨ï¼Œåªèƒ½æä¾›åŸºæœ¬çš„DIåŠŸèƒ½ï¼›ä¸€ç§å°±æ˜¯ç»§æ‰¿äº†BeanFactoryåæ´¾ç”Ÿè€Œæ¥çš„ApplicationContext(åº”ç”¨ä¸Šä¸‹æ–‡)ï¼Œå®ƒèƒ½æä¾›æ›´å¤šä¼ä¸šçº§çš„æœåŠ¡ï¼Œä¾‹å¦‚è§£æé…ç½®æ–‡æœ¬ä¿¡æ¯ç­‰ç­‰ï¼Œè¿™ä¹Ÿæ˜¯ApplicationContextå®ä¾‹å¯¹è±¡æœ€å¸¸è§çš„åº”ç”¨åœºæ™¯ã€‚ å®¹å™¨ç¯å¢ƒStandalone XML application context (ClassPathXmlApplicationContext) ç±»å›¾ 12345ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;spring/dubbo-consumer.xml&quot;);context.start();DemoService demoService = context.getBean(&quot;demoService&quot;, DemoService.class);String hello = demoService.sayHello(&quot;world&quot;);System.out.println(&quot;result: &quot; + hello); DefaultListableBeanFactoryç±»å›¾ BeanFactoryBeanFactory æ˜¯ Spring çš„â€œå¿ƒè„â€ã€‚å®ƒå°±æ˜¯ Spring IoC å®¹å™¨çš„çœŸé¢ç›®ã€‚Spring ä½¿ç”¨ BeanFactory æ¥å®ä¾‹åŒ–ã€é…ç½®å’Œç®¡ç† Beanã€‚ BeanFactoryï¼šæ˜¯IOCå®¹å™¨çš„æ ¸å¿ƒæ¥å£ï¼Œ å®ƒå®šä¹‰äº†IOCçš„åŸºæœ¬åŠŸèƒ½ï¼Œæˆ‘ä»¬çœ‹åˆ°å®ƒä¸»è¦å®šä¹‰äº†getBeanæ–¹æ³•ã€‚getBeanæ–¹æ³•æ˜¯IOCå®¹å™¨è·å–beanå¯¹è±¡å’Œå¼•å‘ä¾èµ–æ³¨å…¥çš„èµ·ç‚¹ã€‚æ–¹æ³•çš„åŠŸèƒ½æ˜¯è¿”å›ç‰¹å®šçš„åç§°çš„Beanã€‚ BeanFactoryåŸºæœ¬çš„ç±»ä½“ç³»ç»“æ„ï¼Œè¿™é‡Œæ²¡æœ‰åŒ…æ‹¬å¼ºå¤§çš„ApplicationContextä½“ç³»ã€‚å…·ä½“ï¼š 1ã€BeanFactoryä½œä¸ºä¸€ä¸ªä¸»æ¥å£ä¸ç»§æ‰¿ä»»ä½•æ¥å£ï¼Œæš‚ä¸”ç§°ä¸ºä¸€çº§æ¥å£ã€‚ 2ã€æœ‰3ä¸ªå­æ¥å£ç»§æ‰¿äº†å®ƒï¼Œè¿›è¡ŒåŠŸèƒ½ä¸Šçš„å¢å¼ºã€‚è¿™3ä¸ªå­æ¥å£ç§°ä¸ºäºŒçº§æ¥å£ã€‚ 3ã€ConfigurableBeanFactoryå¯ä»¥è¢«ç§°ä¸ºä¸‰çº§æ¥å£ï¼Œå¯¹äºŒçº§æ¥å£HierarchicalBeanFactoryè¿›è¡Œäº†å†æ¬¡å¢å¼ºï¼Œå®ƒè¿˜ç»§æ‰¿äº†å¦ä¸€ä¸ªå¤–æ¥çš„æ¥å£SingletonBeanRegistry 4ã€ConfigurableListableBeanFactoryæ˜¯ä¸€ä¸ªæ›´å¼ºå¤§çš„æ¥å£ï¼Œç»§æ‰¿äº†ä¸Šè¿°çš„æ‰€æœ‰æ¥å£ï¼Œæ— æ‰€ä¸åŒ…ï¼Œç§°ä¸ºå››çº§æ¥å£ã€‚ ï¼ˆè¿™4çº§æ¥å£æ˜¯BeanFactoryçš„åŸºæœ¬æ¥å£ä½“ç³»ã€‚ç»§ç»­ï¼Œä¸‹é¢æ˜¯ç»§æ‰¿å…³ç³»çš„2ä¸ªæŠ½è±¡ç±»å’Œ2ä¸ªå®ç°ç±»ï¼šï¼‰ 5ã€AbstractBeanFactoryä½œä¸ºä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ç°äº†ä¸‰çº§æ¥å£ConfigurableBeanFactoryå¤§éƒ¨åˆ†åŠŸèƒ½ã€‚ 6ã€AbstractAutowireCapableBeanFactoryåŒæ ·æ˜¯æŠ½è±¡ç±»ï¼Œç»§æ‰¿è‡ªAbstractBeanFactoryï¼Œå¹¶é¢å¤–å®ç°äº†äºŒçº§æ¥å£AutowireCapableBeanFactory 7ã€DefaultListableBeanFactoryç»§æ‰¿è‡ªAbstractAutowireCapableBeanFactoryï¼Œå®ç°äº†æœ€å¼ºå¤§çš„å››çº§æ¥å£ConfigurableListableBeanFactoryï¼Œå¹¶å®ç°äº†ä¸€ä¸ªå¤–æ¥æ¥å£BeanDefinitionRegistryï¼Œå®ƒå¹¶éæŠ½è±¡ç±»ã€‚ 8ã€æœ€åæ˜¯æœ€å¼ºå¤§çš„XmlBeanFactoryï¼Œç»§æ‰¿è‡ªDefaultListableBeanFactoryï¼Œé‡å†™äº†ä¸€äº›åŠŸèƒ½ï¼Œä½¿è‡ªå·±æ›´å¼ºå¤§ã€‚ æ€»ç»“ï¼š BeanFactoryçš„ç±»ä½“ç³»ç»“æ„çœ‹ä¼¼ç¹æ‚æ··ä¹±ï¼Œå®é™…ä¸Šç”±ä¸Šè€Œä¸‹äº•äº•æœ‰æ¡ï¼Œéå¸¸å®¹æ˜“ç†è§£ã€‚ 1234567891011121314151617181920212223242526272829303132public interface BeanFactory &#123; /** * ç”¨æ¥å¼•ç”¨ä¸€ä¸ªå®ä¾‹ï¼Œæˆ–æŠŠå®ƒå’Œå·¥å‚äº§ç”Ÿçš„BeanåŒºåˆ†å¼€ï¼Œå°±æ˜¯è¯´ï¼Œå¦‚æœä¸€ä¸ªFactoryBeançš„åå­—ä¸ºaï¼Œé‚£ä¹ˆï¼Œ&amp;aä¼šå¾—åˆ°é‚£ä¸ªFactory */ String FACTORY_BEAN_PREFIX = &quot;&amp;&quot;; /* * å››ä¸ªä¸åŒå½¢å¼çš„getBeanæ–¹æ³•ï¼Œè·å–å®ä¾‹ */ Object getBean(String name) throws BeansException; &lt;T&gt; T getBean(String name, Class&lt;T&gt; requiredType) throws BeansException; &lt;T&gt; T getBean(Class&lt;T&gt; requiredType) throws BeansException; Object getBean(String name, Object... args) throws BeansException; boolean containsBean(String name); // æ˜¯å¦å­˜åœ¨ boolean isSingleton(String name) throws NoSuchBeanDefinitionException;// æ˜¯å¦ä¸ºå•å®ä¾‹ boolean isPrototype(String name) throws NoSuchBeanDefinitionException;// æ˜¯å¦ä¸ºåŸå‹ï¼ˆå¤šå®ä¾‹ï¼‰ boolean isTypeMatch(String name, Class&lt;?&gt; targetType) throws NoSuchBeanDefinitionException;// åç§°ã€ç±»å‹æ˜¯å¦åŒ¹é… Class&lt;?&gt; getType(String name) throws NoSuchBeanDefinitionException; // è·å–ç±»å‹ String[] getAliases(String name);// æ ¹æ®å®ä¾‹çš„åå­—è·å–å®ä¾‹çš„åˆ«å&#125; å…·ä½“ï¼š 1ã€4ä¸ªè·å–å®ä¾‹çš„æ–¹æ³•ã€‚getBeançš„é‡è½½æ–¹æ³•ã€‚ 2ã€4ä¸ªåˆ¤æ–­çš„æ–¹æ³•ã€‚åˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œæ˜¯å¦ä¸ºå•ä¾‹ã€åŸå‹ï¼Œåç§°ç±»å‹æ˜¯å¦åŒ¹é…ã€‚ 3ã€1ä¸ªè·å–ç±»å‹çš„æ–¹æ³•ã€ä¸€ä¸ªè·å–åˆ«åçš„æ–¹æ³•ã€‚æ ¹æ®åç§°è·å–ç±»å‹ã€æ ¹æ®åç§°è·å–åˆ«åã€‚ä¸€ç›®äº†ç„¶ï¼æ€»ç»“ï¼š è¿™10ä¸ªæ–¹æ³•ï¼Œå¾ˆæ˜æ˜¾ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„å·¥å‚æ¨¡å¼çš„å·¥å‚æ¥å£ã€‚ BeanFactoryæœ€å¸¸è§çš„å®ç°ç±»ä¸ºXmlBeanFactoryï¼Œå¯ä»¥ä»classpathæˆ–æ–‡ä»¶ç³»ç»Ÿç­‰è·å–èµ„æºã€‚ 123File file = new File(&quot;fileSystemConfig.xml&quot;);Resource resource = new FileSystemResource(file);BeanFactory beanFactory = new XmlBeanFactory(resource); 12Resource resource = new ClassPathResource(&quot;classpath.xml&quot;); BeanFactory beanFactory = new XmlBeanFactory(resource); XmlBeanFactoryå¯ä»¥åŠ è½½xmlçš„é…ç½®æ–‡ä»¶ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªCarç±»ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152public class Car &#123; private String brand; private String color; private int maxSpeed; public String getBrand() &#123; return brand; &#125; public void setBrand(String brand) &#123; this.brand = brand; &#125; public String getColor() &#123; return color; &#125; public void setColor(String color) &#123; this.color = color; &#125; public int getMaxSpeed() &#123; return maxSpeed; &#125; public void setMaxSpeed(int maxSpeed) &#123; this.maxSpeed = maxSpeed; &#125; public String toString()&#123; return &quot;the car is:&quot;+ getBrand() + &quot;, color is:&quot; +getColor() +&quot;, maxspeed is:&quot;+getMaxSpeed(); &#125; public Car() &#123; &#125; public Car(String brand, String color, int maxSpeed) &#123; this.brand = brand; this.color = color; this.maxSpeed = maxSpeed; &#125; public void introduce() &#123; System.out.println(&quot;brand:&quot; + brand + &quot;;color:&quot; + color + &quot;;maxSpeed:&quot; + maxSpeed); &#125;&#125; æˆ‘ä»¬é€šè¿‡åœ¨applicationContext.xmlä¸­é…ç½®ï¼š 1234&lt;bean id&#x3D;&quot;car1&quot; class&#x3D;&quot;spring.ioc.demo1.Car&quot; p:brand&#x3D;&quot;springæ³¨å…¥-çº¢æ——001&quot; p:color&#x3D;&quot;springæ³¨å…¥-ç´«è‰²&quot; p:maxSpeed&#x3D;&quot;520&quot; &#x2F;&gt; é€šè¿‡XmlBeanFactoryå®ç°å¯åŠ¨Spring IoCå®¹å™¨ï¼š 12345678910public static void main(String[] args) &#123; ResourcePatternResolver resolver = new PathMatchingResourcePatternResolver(); Resource res = resolver.getResource(&quot;classpath:applicationContext.xml&quot;); BeanFactory factory = new XmlBeanFactory(res); //ApplicationContext factory=new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;); Car car = factory.getBean(&quot;car1&quot;,Car.class); System.out.println(&quot;carå¯¹è±¡å·²ç»åˆå§‹åŒ–å®Œæˆ&quot;); System.out.println(car.getMaxSpeed());&#125; XmlBeanFactoryé€šè¿‡Resourceè£…è½½Springé…ç½®ä¿¡æ¯å†°å¯åŠ¨IoCå®¹å™¨ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡factory.getBeanä»IoCå®¹å™¨ä¸­è·å–Beanäº†ã€‚ é€šè¿‡BeanFactoryå¯åŠ¨IoCå®¹å™¨æ—¶ï¼Œå¹¶ä¸ä¼šåˆå§‹åŒ–é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„Beanï¼Œåˆå§‹åŒ–åŠ¨ä½œå‘ç”Ÿåœ¨ç¬¬ä¸€ä¸ªè°ƒç”¨æ—¶ã€‚ å¯¹äºå•å®ä¾‹ï¼ˆsingletonï¼‰çš„Beanæ¥è¯´ï¼ŒBeanFactoryä¼šç¼“å­˜Beanå®ä¾‹ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡ä½¿ç”¨getBeanæ—¶ç›´æ¥ä»IoCå®¹å™¨ç¼“å­˜ä¸­è·å–Beanã€‚ ApplicationContextï¼ˆå®ä¾‹åŒ–ã€é…ç½®ã€ç»„è£…Beanï¼‰å¦‚æœè¯´BeanFactoryæ˜¯Springçš„å¿ƒè„ï¼Œé‚£ä¹ˆApplicationContextå°±æ˜¯å®Œæ•´çš„èº¯ä½“äº†ï¼ŒApplicationContextç”±BeanFactoryæ´¾ç”Ÿè€Œæ¥ï¼Œæä¾›äº†æ›´å¤šé¢å‘å®é™…åº”ç”¨çš„åŠŸèƒ½ã€‚åœ¨BeanFactoryä¸­ï¼Œå¾ˆå¤šåŠŸèƒ½éœ€è¦ä»¥ç¼–ç¨‹çš„æ–¹å¼å®ç°ï¼Œè€Œåœ¨ApplicationContextä¸­åˆ™å¯ä»¥é€šè¿‡é…ç½®å®ç°ã€‚ BeanFactortyæ¥å£æä¾›äº†é…ç½®æ¡†æ¶åŠåŸºæœ¬åŠŸèƒ½ï¼Œä½†æ˜¯æ— æ³•æ”¯æŒspringçš„aopåŠŸèƒ½å’Œwebåº”ç”¨ã€‚è€ŒApplicationContextæ¥å£ä½œä¸ºBeanFactoryçš„æ´¾ç”Ÿï¼Œå› è€Œæä¾›BeanFactoryæ‰€æœ‰çš„åŠŸèƒ½ã€‚è€Œä¸”ApplicationContextè¿˜åœ¨åŠŸèƒ½ä¸Šåšäº†æ‰©å±•ï¼Œç›¸è¾ƒäºBeanFactortyï¼ŒApplicationContextè¿˜æä¾›äº†ä»¥ä¸‹çš„åŠŸèƒ½ï¼š ï¼ˆ1ï¼‰MessageSource, æä¾›å›½é™…åŒ–çš„æ¶ˆæ¯è®¿é—®ï¼ˆ2ï¼‰èµ„æºè®¿é—®ï¼Œå¦‚URLå’Œæ–‡ä»¶ï¼ˆ3ï¼‰äº‹ä»¶ä¼ æ’­ç‰¹æ€§ï¼Œå³æ”¯æŒaopç‰¹æ€§ï¼ˆ4ï¼‰è½½å…¥å¤šä¸ªï¼ˆæœ‰ç»§æ‰¿å…³ç³»ï¼‰ä¸Šä¸‹æ–‡ ï¼Œä½¿å¾—æ¯ä¸€ä¸ªä¸Šä¸‹æ–‡éƒ½ä¸“æ³¨äºä¸€ä¸ªç‰¹å®šçš„å±‚æ¬¡ï¼Œæ¯”å¦‚åº”ç”¨çš„webå±‚ ApplicationContextï¼šæ˜¯IOCå®¹å™¨å¦ä¸€ä¸ªé‡è¦æ¥å£ï¼Œ å®ƒç»§æ‰¿äº†BeanFactoryçš„åŸºæœ¬åŠŸèƒ½ï¼Œ åŒæ—¶ä¹Ÿç»§æ‰¿äº†å®¹å™¨çš„é«˜çº§åŠŸèƒ½ï¼Œå¦‚ï¼šMessageSourceï¼ˆå›½é™…åŒ–èµ„æºæ¥å£ï¼‰ã€ResourceLoaderï¼ˆèµ„æºåŠ è½½æ¥å£ï¼‰ã€ApplicationEventPublisherï¼ˆåº”ç”¨äº‹ä»¶å‘å¸ƒæ¥å£ï¼‰ç­‰ã€‚ äºŒè€…åŒºåˆ«1.BeanFactroyé‡‡ç”¨çš„æ˜¯å»¶è¿ŸåŠ è½½å½¢å¼æ¥æ³¨å…¥Beançš„ï¼Œå³åªæœ‰åœ¨ä½¿ç”¨åˆ°æŸä¸ªBeanæ—¶(è°ƒç”¨getBean())ï¼Œæ‰å¯¹è¯¥Beanè¿›è¡ŒåŠ è½½å®ä¾‹åŒ–ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸èƒ½å‘ç°ä¸€äº›å­˜åœ¨çš„Springçš„é…ç½®é—®é¢˜ã€‚è€ŒApplicationContextåˆ™ç›¸åï¼Œå®ƒæ˜¯åœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€æ¬¡æ€§åˆ›å»ºäº†æ‰€æœ‰çš„Beanã€‚è¿™æ ·ï¼Œåœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç°Springä¸­å­˜åœ¨çš„é…ç½®é”™è¯¯ã€‚ ç›¸å¯¹äºåŸºæœ¬çš„BeanFactoryï¼ŒApplicationContext å”¯ä¸€çš„ä¸è¶³æ˜¯å ç”¨å†…å­˜ç©ºé—´ã€‚å½“åº”ç”¨ç¨‹åºé…ç½®Beanè¾ƒå¤šæ—¶ï¼Œç¨‹åºå¯åŠ¨è¾ƒæ…¢ã€‚ BeanFacotryå»¶è¿ŸåŠ è½½,å¦‚æœBeançš„æŸä¸€ä¸ªå±æ€§æ²¡æœ‰æ³¨å…¥ï¼ŒBeanFacotryåŠ è½½åï¼Œç›´è‡³ç¬¬ä¸€æ¬¡ä½¿ç”¨è°ƒç”¨getBeanæ–¹æ³•æ‰ä¼šæŠ›å‡ºå¼‚å¸¸ï¼›è€ŒApplicationContextåˆ™åœ¨åˆå§‹åŒ–è‡ªèº«æ˜¯æ£€éªŒï¼Œè¿™æ ·æœ‰åˆ©äºæ£€æŸ¥æ‰€ä¾èµ–å±æ€§æ˜¯å¦æ³¨å…¥ï¼›æ‰€ä»¥é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ ApplicationContextã€‚åº”ç”¨ä¸Šä¸‹æ–‡åˆ™ä¼šåœ¨ä¸Šä¸‹æ–‡å¯åŠ¨åé¢„è½½å…¥æ‰€æœ‰çš„å•å®ä¾‹Beanã€‚é€šè¿‡é¢„è½½å…¥å•å®ä¾‹bean ,ç¡®ä¿å½“ä½ éœ€è¦çš„æ—¶å€™ï¼Œä½ å°±ä¸ç”¨ç­‰å¾…ï¼Œå› ä¸ºå®ƒä»¬å·²ç»åˆ›å»ºå¥½äº†ã€‚ 2.BeanFactoryå’ŒApplicationContextéƒ½æ”¯æŒBeanPostProcessorã€BeanFactoryPostProcessorçš„ä½¿ç”¨ï¼Œä½†ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«æ˜¯ï¼šBeanFactoryéœ€è¦æ‰‹åŠ¨æ³¨å†Œï¼Œè€ŒApplicationContextåˆ™æ˜¯è‡ªåŠ¨æ³¨å†Œã€‚ï¼ˆApplicationcontextæ¯” beanFactory åŠ å…¥äº†ä¸€äº›æ›´å¥½ä½¿ç”¨çš„åŠŸèƒ½ã€‚è€Œä¸” beanFactory çš„è®¸å¤šåŠŸèƒ½éœ€è¦é€šè¿‡ç¼–ç¨‹å®ç°è€Œ Applicationcontext å¯ä»¥é€šè¿‡é…ç½®å®ç°ã€‚æ¯”å¦‚åå¤„ç† bean ï¼Œ Applicationcontext ç›´æ¥é…ç½®åœ¨é…ç½®æ–‡ä»¶å³å¯è€Œ beanFactory è¿™è¦åœ¨ä»£ç ä¸­æ˜¾ç¤ºçš„å†™å‡ºæ¥æ‰å¯ä»¥è¢«å®¹å™¨è¯†åˆ«ã€‚ ï¼‰ 3.beanFactoryä¸»è¦æ˜¯é¢å¯¹ä¸ spring æ¡†æ¶çš„åŸºç¡€è®¾æ–½ï¼Œé¢å¯¹ spring è‡ªå·±ã€‚è€Œ Applicationcontex ä¸»è¦é¢å¯¹ä¸ spring ä½¿ç”¨çš„å¼€å‘è€…ã€‚åŸºæœ¬éƒ½ä¼šä½¿ç”¨ Applicationcontex å¹¶é beanFactory ã€‚ æ€»ç»“ä½œç”¨ï¼š BeanFactoryè´Ÿè´£è¯»å–beané…ç½®æ–‡æ¡£ï¼Œç®¡ç†beançš„åŠ è½½ï¼Œå®ä¾‹åŒ–ï¼Œç»´æŠ¤beanä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œè´Ÿè´£beançš„å£°æ˜å‘¨æœŸã€‚ ApplicationContexté™¤äº†æä¾›ä¸Šè¿°BeanFactoryæ‰€èƒ½æä¾›çš„åŠŸèƒ½ä¹‹å¤–ï¼Œè¿˜æä¾›äº†æ›´å®Œæ•´çš„æ¡†æ¶åŠŸèƒ½ï¼ša. å›½é™…åŒ–æ”¯æŒb. èµ„æºè®¿é—®ï¼šResource rs = ctx. getResource(â€œclasspath:config.propertiesâ€), â€œfile:c:/config.propertiesâ€c. äº‹ä»¶ä¼ é€’ï¼šé€šè¿‡å®ç°ApplicationContextAwareæ¥å£ å¸¸ç”¨çš„è·å–ApplicationContext FileSystemXmlApplicationContextï¼šä»æ–‡ä»¶ç³»ç»Ÿæˆ–è€…urlæŒ‡å®šçš„xmlé…ç½®æ–‡ä»¶åˆ›å»ºï¼Œå‚æ•°ä¸ºé…ç½®æ–‡ä»¶åæˆ–æ–‡ä»¶åæ•°ç»„ï¼Œæœ‰ç›¸å¯¹è·¯å¾„ä¸ç»å¯¹è·¯å¾„ã€‚ 12ApplicationContext factory&#x3D;new FileSystemXmlApplicationContext(&quot;src&#x2F;applicationContext.xml&quot;);ApplicationContext factory&#x3D;new FileSystemXmlApplicationContext(&quot;E:&#x2F;Workspaces&#x2F;MyEclipse 8.5&#x2F;Hello&#x2F;src&#x2F;applicationContext.xml&quot;); ClassPathXmlApplicationContextï¼šä»classpathçš„xmlé…ç½®æ–‡ä»¶åˆ›å»ºï¼Œå¯ä»¥ä»jaråŒ…ä¸­è¯»å–é…ç½®æ–‡ä»¶ã€‚ClassPathXmlApplicationContext ç¼–è¯‘è·¯å¾„æ€»æœ‰ä¸‰ç§æ–¹å¼ï¼š 123ApplicationContext factory &#x3D; new ClassPathXmlApplicationContext(&quot;classpath:applicationContext.xml&quot;);ApplicationContext factory &#x3D; new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;); ApplicationContext factory &#x3D; new ClassPathXmlApplicationContext(&quot;file:E:&#x2F;Workspaces&#x2F;MyEclipse8.5&#x2F;Hello&#x2F;src&#x2F;applicationContext.xml&quot;); XmlWebApplicationContextï¼šä»webåº”ç”¨çš„æ ¹ç›®å½•è¯»å–é…ç½®æ–‡ä»¶ï¼Œéœ€è¦å…ˆåœ¨web.xmlä¸­é…ç½®ï¼Œå¯ä»¥é…ç½®ç›‘å¬å™¨æˆ–è€…servletæ¥å®ç° 123&lt;listener&gt;&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;&#x2F;listener-class&gt;&lt;&#x2F;listener&gt; æˆ– 12345&lt;servlet&gt;&lt;servlet-name&gt;context&lt;&#x2F;servlet-name&gt;&lt;servlet-class&gt;org.springframework.web.context.ContextLoaderServlet&lt;&#x2F;servlet-class&gt;&lt;load-on-startup&gt;1&lt;&#x2F;load-on-startup&gt;&lt;&#x2F;servlet&gt; è¿™ä¸¤ç§æ–¹å¼éƒ½é»˜è®¤é…ç½®æ–‡ä»¶ä¸ºweb-inf/applicationContext.xmlï¼Œä¹Ÿå¯ä½¿ç”¨context-paramæŒ‡å®šé…ç½®æ–‡ä»¶ 1234&lt;context-param&gt;&lt;param-name&gt;contextConfigLocation&lt;&#x2F;param-name&gt;&lt;param-value&gt;&#x2F;WEB-INF&#x2F;myApplicationContext.xml&lt;&#x2F;param-value&gt;&lt;&#x2F;context-param&gt; ä¾èµ–æ³¨å…¥ IoC is also known as dependency injection (DI).org.springframework.beansã€org.springframework.contextæ˜¯IOCå®¹å™¨çš„åŸºç¡€åŒ… BeanFactoryæ¥å£æä¾›äº†ä¸€ç§é«˜çº§çš„é…ç½®æœºåˆ¶ï¼Œèƒ½å¤Ÿç®¡ç†ä»»ä½•ç±»å‹çš„å¯¹è±¡ã€‚ é¢å‘åˆ‡é¢ AOP","categories":[],"tags":[]},{"title":"How to work by tomcat","slug":"How-to-work-by-tomcat","date":"2021-05-25T16:17:02.000Z","updated":"2021-06-19T09:43:50.065Z","comments":true,"path":"2021/05/26/How-to-work-by-tomcat/","link":"","permalink":"http://www.postman.life/2021/05/26/How-to-work-by-tomcat/","excerpt":"","text":"åˆ†æTomcatæºç çš„ç¬¬ä¸€æ­¥é¦–å…ˆè®©æˆ‘ä»¬å¼„æ‡‚Tomcatæ¶æ„ä½“ç³»![](How-to-work-by-tomcat/Tomcat architecture.jpg) The Serverï¼šTomcatå®ƒè‡ªèº«ï¼Œå±äºWeb Serverçš„ä¸€ä¸ªå®ä¾‹(instance)ã€‚å±äºæœ€ä¸Šå±‚çš„ç»„ä»¶ã€‚å¯ä»¥é€šè¿‡ç«¯å£æ‰“å¼€/å…³é—­ï¼Œå¯ä»¥åˆ‡æ¢æˆDebugæ¨¡å¼ã€‚åœ¨JVMä¸­ï¼Œåªèƒ½åˆ›å»ºä¸€ä¸ªServer Instanceã€‚é€šè¿‡ç«¯å£çš„è®¾ç½®ç”¨ä»¥è¾¾åˆ°åœ¨ä¸€å°æœºå­è¿è¡Œä¸åŒç«¯å£çš„Serverï¼Œæ¯å°Serverç›¸äº’ç‹¬ç«‹ï¼Œæœ‰è‡ªå·±çš„åº”ç”¨é…ç½®ï¼Œåº”ç”¨ä¹‹é—´ä¸ä¼šé€ æˆç›¸äº’çš„å½±å“ã€‚ Serviceï¼šServiceæ˜¯Engineå®¹å™¨çš„ä¸Šå±‚ç»„ä»¶ï¼Œå°è£…äº†å¤šä¸ªæ¥å—è¯·æ±‚çš„Connectorï¼ˆè¿æ¥å™¨ï¼‰å’Œä¸€ä¸ªEngineå®¹å™¨ã€‚åœ¨Catalinaï¼ˆ**Servlet** ï¼‰å®¹å™¨é‡Œä¸­ï¼Œå®ƒé€šè¿‡Httpå¤„ç†Servletçš„è¯·æ±‚å¹¶å†³å®šå°†è¯·æ±‚ä¼ é€’åˆ°è™šæ‹Ÿä¸»æœºè¿˜æ˜¯ä¸Šä¸‹æ–‡(Context)ã€‚ æ¯ä¸ªServiceä»£è¡¨ä¸€ç»„Connectorå’Œä¸€ä¸ªContainerï¼ˆå®¹å™¨ï¼‰ï¼Œç”¨ä»¥ç®¡ç†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ã€‚è¿™äº›å®¹å™¨æ¥å—è¿æ¥å™¨çš„è¯·æ±‚å¹¶å¤„ç†è¿™äº›è¯·æ±‚ã€‚å®¹å™¨åŒ…å«Webåº”ç”¨ç¨‹åºã€‚ å®ƒè´Ÿè´£æ¥å—è¯·æ±‚ï¼Œå°†è¯·æ±‚è·¯ç”±åˆ°æŒ‡å®šçš„Webåº”ç”¨ç¨‹åºå’Œç‰¹å®šèµ„æºï¼Œå¹¶è¿”å›è¯·æ±‚å¤„ç†çš„ç»“æœã€‚ è¿æ¥å™¨ä½äºå‘å‡ºè¯·æ±‚çš„å®¢æˆ·ç«¯å’Œå®¹å™¨ä¹‹é—´ï¼Œå¯ä»¥æä¾›ä¸€äº›æœåŠ¡ï¼Œä¾‹å¦‚SSLæ”¯æŒã€‚ Connectors ï¼šè¿æ¥å™¨å¯ä»¥é“¾æ¥åº”ç”¨ç¨‹åºä¸å®¢æˆ·ç«¯ï¼Œå¤„ç†è¯·æ±‚å’Œè¿”å›å¯¹è±¡ã€‚é»˜è®¤çš„ç«¯å£æ˜¯8080ï¼Œå¦‚æœä¸æŒ‡å®šé»˜è®¤ç«¯å£åˆ™ä¸º80ã€‚ Enginesï¼šè™šæ‹Ÿä¸»æœºå¼•æ“ï¼Œä¸€ä¸ªTomcat Serveråªæœ‰ä¸€ä¸ªå¼•æ“ã€‚å¼•æ“å°†è¿æ¥å™¨çš„æ‰€æœ‰è¯·æ±‚äº¤ç»™ç›¸åº”çš„ï¼ˆHostï¼‰è™šæ‹Ÿä¸»æœºå»å¤„ç†ã€‚åœ¨å¤šå®¿ä¸»æœºå™¨ä¸­ã€‚ å¼•æ“å¯èƒ½åŒ…å«ä»£è¡¨ä¸€ç»„Webåº”ç”¨ç¨‹åºçš„ä¸»æœºå’Œä»£è¡¨å•ä¸ªWebåº”ç”¨ç¨‹åºçš„ä¸Šä¸‹æ–‡ã€‚ Host - è™šæ‹Ÿä¸»æœºï¼Œé€šè¿‡å…¶IPåœ°å€æˆ–ä¸»æœºåæ¥åŒºåˆ† Contexts - Web Application Realmsï¼šç®¡ç†å¼•æ“çš„User Authentication And Authorization(ç”¨æˆ·èº«ä»½éªŒè¯å’Œæˆæƒ), é€šè¿‡åº”ç”¨é…ç½®ï¼Œå…è®¸ç®¡ç†å‘˜å¯¹ä¸€ä¸ªèµ„æºæˆ–ä¸€ç»„èµ„æºè®¾ç½®æƒé™ã€‚Valvesï¼šA Valve element represents a component that will be inserted into the request processing pipeline for the associated Catalina container (Engine, Host, or Context). Individual Valves have distinct processing capabilities æ¯ä¸ªå±‚çº§çš„å®¹å™¨ï¼ˆEngine, Hostã€Context, Wrapper ï¼‰å‡æœ‰å¯¹åº”çš„åŸºç¡€Valveå®ç°ï¼ŒåŒæ—¶ç»´æŠ¤äº†ä¸€ä¸ªPipelineå®ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•å±‚çº§çš„å®¹å™¨ ä¸Šé’ˆå¯¹è¯·æ±‚å¤„ç†è¿›è¡Œæ‰©å±•https://zhuanlan.zhihu.com/p/127824362 Access Log org.apache.catalina.valves.AccessLogValve å®ƒåˆ›å»ºæ—¥å¿—æ–‡ä»¶ä»¥è·Ÿè¸ªå®¢æˆ·ç«¯è®¿é—®ä¿¡æ¯ã€‚ Remote Address Filter org.apache.catalina.filters.RemoteAddrFilter å…è®¸å°†æäº¤è¯·æ±‚çš„å®¢æˆ·æœºçš„IPåœ°å€ä¸ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶å…è®¸è¯¥è¯·æ±‚ç»§ç»­æˆ–æ‹’ç»å¤„ç†æ¥è‡ªæ­¤å®¢æˆ·æœºçš„è¯·æ±‚ã€‚ Remote Host Filter org.apache.catalina.filters.RemoteHostFilter å…è®¸å°†æäº¤æ­¤è¯·æ±‚çš„å®¢æˆ·æœºçš„ä¸»æœºåä¸ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶å…è®¸è¯·æ±‚ç»§ç»­æˆ–æ‹’ç»å¤„ç†æ¥è‡ªæ­¤å®¢æˆ·æœºçš„è¯·æ±‚ Request Dumper org.apache.catalina.filters.RequestDumperFilter è®°å½•æ¥è‡ªè¯·æ±‚å’Œå“åº”å¯¹è±¡çš„ä¿¡æ¯ æ›´å¤šè¯¦ç»†çš„å¯ä»¥åœ¨å®˜æ–¹æ–‡æ¡£æ‰¾åˆ° &lt;http://tomcat.apache.org/tomcat-9.0-doc/config/filter.html Loggersï¼šåœ¨Tomcatä¸­ï¼Œä½¿ç”¨çš„æ˜¯Apcache Commonçš„Juliæ—¥å¿—æ¡†æ¶ã€‚ä»¥ç¡®ä¿Tomcatçš„å†…éƒ¨æ—¥å¿—å’ŒWeb Applicationçš„æ—¥å¿—éš”ç¦»å¼€æ¥ã€‚ JVMä¸­çš„ç±»åŠ è½½æœºåˆ¶ Javaé€šè¿‡ç±»åŠ è½½å™¨åŠ¨æ€çš„å°†ClassåŠ è½½åˆ°è™šæ‹Ÿæœºä¸­ï¼Œè€Œé»˜è®¤çš„ç±»åŠ è½½æœºåˆ¶æ˜¯é€šè¿‡åŒäº²å§”æ´¾çš„æ–¹å¼æ¥å®ç°ã€‚ Classå¹¶ä¸ä¼šä¸€æ¬¡æ€§å…¨éƒ½åŠ è½½åˆ°å†…å­˜é‡Œé¢ï¼Œåªæ˜¯å½“è¢«ç”¨åˆ°äº†æ‰ä¼šè¢«åŠ è½½ã€‚ åŠ è½½è¿‡ç¨‹ï¼š åŠ è½½-&gt;é“¾æ¥-&gt;åˆå§‹åŒ– (Loading, Linking, and Initializing)ã€‚ é€šè¿‡åŠ è½½ç±»æˆ–è€…æ¥å£çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé“¾æ¥å¹¶ç»„åˆç±»å’Œæ¥å£åˆ°è™šæ‹Ÿæœºä»¥ä¾¿æ‰§è¡Œã€‚åˆå§‹åŒ–æ˜¯æ‰§è¡Œç±»å’Œæ¥å£çš„çš„åˆå§‹åŒ–æ–¹æ³• æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œæ¥æŸ¥çœ‹ä¸€å¤§å †è¢«åŠ è½½å™¨åŠ è½½çš„ç±» -verbose:class ç”±ä¸Šå›¾æˆ‘ä»¬çŸ¥é“ï¼ŒJVMå†…ç½®äº†ä¸‰ä¸ªç±»åŠ è½½å™¨ Boostrap ClassLoader ï¼ˆjre\\lib\\rt.jar or specify parametersï¼‰ -Xbootclasspath å‚æ•°æŒ‡å®š Extension ClassLoader (jre\\lib\\ext*.jar or specify parameters) java.ext.dirs ç³»ç»Ÿå˜é‡æ‰€æŒ‡å®šçš„è·¯å¾„ä¸‹çš„jar Application ClassLoader (classpath) ç±»åˆ†åˆ«è¢«ä¸åŒçš„åŠ è½½å™¨åŠ è½½ï¼Œé€šè¿‡ getClassLoader()æˆ‘ä»¬å¯ä»¥çŸ¥é“åŠ è½½ç±»çš„åŠ è½½å™¨æ˜¯å“ªä¸€ä¸ªã€‚ é€šè¿‡è‡ªåº•å‘ä¸ŠæŸ¥çœ‹ç±»æ˜¯å¦è¢«åŠ è½½è¿‡ï¼Œç±»åŠ è½½å™¨åœ¨é€šè¿‡åç§°åŠ è½½ç±»ï¼Œå¦‚æœçˆ¶ç±»åŠ è½½å™¨æ‰¾ä¸åˆ°ï¼Œå°±ä¼šä»å­ç±»åŠ è½½å™¨å¼€å§‹æ‰¾ï¼Œä¸€ç›´æ‰¾ä¸åˆ°å°±ä¼šæŠ›å‡ºä¸€ä¸ªNoClassDefFoundErroræˆ–ClassNotFoundExceptionã€‚ è®©æˆ‘ä»¬å†çœ‹Tomcatçš„ç±»åŠ è½½å™¨ 1234567 Bootstrap | System | Common &#x2F; \\Webapp1 Webapp2 ... Bootstrapè¯¥ç±»åŠ è½½å™¨åŒ…å«Javaè™šæ‹Ÿæœºæä¾›çš„åŸºæœ¬è¿è¡Œæ—¶ç±»ï¼Œä»¥åŠç³»ç»Ÿæ‰©å±•ç›®å½•ï¼ˆ$ JAVA_HOME / jre / lib / extï¼‰ä¸­å­˜åœ¨çš„JARæ–‡ä»¶ä¸­çš„æ‰€æœ‰ç±»ã€‚ æ³¨æ„ï¼šæŸäº›JVMå¯èƒ½å°†å…¶å®ç°ä¸ºå¤šä¸ªç±»åŠ è½½å™¨ï¼Œæˆ–è€…å¯èƒ½æ ¹æœ¬ä¸å¯è§ï¼ˆä½œä¸ºç±»åŠ è½½å™¨ï¼‰ Systemè¿™ä¸ªç±»è£…å…¥å™¨é€šå¸¸æ˜¯ä»ç±»è·¯å¾„ç¯å¢ƒå˜é‡çš„å†…å®¹åˆå§‹åŒ–çš„ã€‚æ‰€æœ‰è¿™äº›ç±»å¯¹Tomcatå†…éƒ¨ç±»å’Œwebåº”ç”¨ç¨‹åºéƒ½æ˜¯å¯è§çš„ã€‚ä½†æ˜¯ï¼Œæ ‡å‡†çš„Tomcatå¯åŠ¨è„šæœ¬($CATALINA_HOME/bin/catalina.shæˆ–%CATALINA_HOME%\\bin\\catalina.bat)å®Œå…¨å¿½ç•¥äº†ç±»è·¯å¾„ç¯å¢ƒå˜é‡æœ¬èº«çš„å†…å®¹ï¼Œè€Œæ˜¯ä»ä»¥ä¸‹åº“æ„å»ºç³»ç»Ÿç±»åŠ è½½å™¨: $CATALINA_HOME/bin/bootstrap.jar -åŒ…å«ç”¨äºåˆå§‹åŒ–TomcatæœåŠ¡å™¨çš„main()æ–¹æ³•ï¼Œä»¥åŠå®ƒæ‰€ä¾èµ–çš„ç±»åŠ è½½å™¨å®ç°ç±» $ CATALINA_BASE / bin / tomcat-juli.jaræˆ–$ CATALINA_HOME / bin / tomcat-juli.jar â€”è®°å½•å®ç°ç±»ã€‚ å…¶ä¸­åŒ…æ‹¬å¯¹java.util.logging APIçš„å¢å¼ºç±»ï¼Œç§°ä¸ºTomcat JULI $ CATALINA_HOME / bin / commons-daemon.jar â€” Apache Commons Daemoné¡¹ç›®ä¸­çš„ç±»ã€‚ è¿™ Commonè¯¥ç±»åŠ è½½å™¨åŒ…å«è®©Tomcatå†…éƒ¨ç±»å’Œæ‰€æœ‰Webåº”ç”¨ç¨‹åºéƒ½å¯ç”¨çš„ç±» é€šå¸¸ï¼Œä¸åº”å°†åº”ç”¨ç¨‹åºç±»æ”¾åœ¨è¿™é‡Œã€‚ æ­¤ç±»åŠ è½½å™¨æœç´¢çš„ä½ç½®ç”±$ CATALINA_BASE / conf / catalina.propertiesä¸­çš„common.loaderå±æ€§å®šä¹‰ã€‚ é»˜è®¤è®¾ç½®å°†æŒ‰åˆ—å‡ºçš„é¡ºåºæœç´¢ä»¥ä¸‹ä½ç½®ï¼š $ CATALINA_BASE / libä¸­è§£å‹ç¼©çš„ç±»å’Œèµ„æº $ CATALINA_BASE / libä¸­çš„JARæ–‡ä»¶ $ CATALINA_HOME / libä¸­è§£å‹ç¼©çš„ç±»å’Œèµ„æº $ CATALINA_HOME / libä¸­çš„JARæ–‡ä»¶ é»˜è®¤æƒ…å†µï¼Œä¼šåŠ è½½tomcat/binçš„æ‰€æœ‰jaråŒ…ã€‚ WebappX ä¸ºåœ¨å•ä¸ªTomcatå®ä¾‹ä¸­éƒ¨ç½²çš„æ¯ä¸ªWebåº”ç”¨ç¨‹åºåˆ›å»ºçš„ä¸€ä¸ªç±»åŠ è½½å™¨ã€‚ Webåº”ç”¨ç¨‹åºçš„/ WEB-INF / classesç›®å½•ä¸­çš„æ‰€æœ‰è§£å‹ç¼©çš„ç±»å’Œèµ„æºï¼Œä»¥åŠWebåº”ç”¨ç¨‹åºçš„/ WEB-INF / libç›®å½•ä¸‹çš„JARæ–‡ä»¶ä¸­çš„ç±»å’Œèµ„æºï¼Œè¿™äº›ç±»å’Œèµ„æºå¯¹åº”ç”¨ç¨‹åºæ˜¯å¯è®¿é—®çš„ï¼Œä½†æ˜¯å¤–éƒ¨æ˜¯ä¸èƒ½è®¿é—®çš„ã€‚ ä¹Ÿå°±æ˜¯è¯´ä¸åŒçš„Webåº”ç”¨ç¨‹åºæ˜¯ä¸èƒ½äº’ç›¸è®¿é—®çš„ é™¤äº†ä¸Šè¿°åŠ è½½å™¨ï¼ŒTomcatè¿˜æœ‰ä¸¤ä¸ªè‡ªå®šä¹‰åŠ è½½å™¨ 12Catalina è´Ÿè´£åŠ è½½Tomcatå†…éƒ¨çš„ç±»Shared è´Ÿè´£åŠ è½½Tomcatä¸‹æ‰€æœ‰Webåº”ç”¨ç¨‹åºå¤ç”¨ç±» å›åˆ°Bootstrap.init()æ–¹æ³• ä½¿ç”¨CatalinaåŠ è½½å™¨åˆå§‹åŒ–Catalinaç±» è¿™è¾¹æ˜¯åŠ è½½å‘½ä»¤è¡Œçš„å‘½ä»¤ é‡è¦çš„æ˜¯åœ¨å¯åŠ¨æ—¶å€™çš„load()æ–¹æ³• é€šè¿‡ä¿å­˜ä¸€ä¸ªObjectçš„å¼•ç”¨ï¼Œå†ç”¨åå°„å»è°ƒç”¨äº†Catalina.load()ï¼Œå®ç°äº†ä»£ç çš„è§£è€¦ã€‚Servier.xmlçš„åŠ è½½ä¸è§£æ server.xmlæ˜¯æ”¾ç½®Tomcatä¸€äº›å‚æ•°çš„åœ°æ–¹ã€‚å½“æ‰¾ä¸åˆ°ä¼šå»åŠ è½½server-embed.xml åœ¨åŠ è½½å®ŒTomcatBaseConfigä¹‹åï¼Œä¹Ÿä¼šåŠ è½½ä¸€ä¸ªç»„ä»¶[Digester]Digesteræ˜¯è§£æserver.xmlå‚æ•°çš„åœ°æ–¹ã€‚ åœ¨Javaä¸­ï¼Œè§£æXMLçš„æ–¹å¼æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯å°†æ–‡ä»¶è¯»å–åˆ°å†…å­˜ä¸­ï¼Œæ„é€ ä¸€ä¸ªDOMæ ‘ï¼ˆå¯¹è±¡æ¨¡å‹é›†åˆï¼‰ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¿—ç§°çš„DOMè§£æï¼Œæœ€å¸¸ç”¨çš„å°±æ˜¯DOM4Jã€‚å¦å¤–ä¸€ç§SAXè§£æï¼Œä¸€è¡Œä¸€è¡Œçš„è¯»å–XMLæ–‡ä»¶ï¼Œé€šè¿‡ç›‘å¬è·å–èŠ‚ç‚¹ã€‚åœ¨è¯»å–å®Œæ¯•åé‡Šæ”¾å†…å­˜ï¼Œåªä¼šåœ¨æŸä¸€æ—¶åˆ»å­˜åœ¨ä¸€è¡Œçš„å†…å­˜æ•°æ®ã€‚ æœ‰å…´è¶£å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  https://www.cnblogs.com/jiaan-geng/p/4866009.html Digesterä¸»è¦æ˜¯å¯¹SAXçš„å°è£…å’ŒæŠ½è±¡è®©æˆ‘ä»¬çœ‹ä¸‹é¢è¿™ä¸€ç»„å‚æ•°ï¼š 123&lt;Server port=&quot;8005&quot; shutdown=&quot;SHUTDOWN&quot;&gt; &lt;Listener className=&quot;org.apache.catalina.startup.VersionLoggerListener&quot; /&gt;&lt;/&gt; Catalina.createStartDigester()ä¸­ 123456&#x2F;&#x2F; Configure the actions we will be usingdigester.addObjectCreate(&quot;Server&quot;, &quot;org.apache.catalina.core.StandardServer&quot;, &quot;className&quot;);digester.addSetProperties(&quot;Server&quot;);digester.addSetNext(&quot;Server&quot;, &quot;setServer&quot;,&quot;org.apache.catalina.Server&quot;); è·å–Serverå‰ç¼€çš„ä¸€ç»„å‚æ•°ï¼Œè¯»å–åˆ°StandardServerç±»ä¸­ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªç§æœ‰å˜é‡port,é»˜è®¤å€¼æ˜¯8005ï¼Œè¿˜æœ‰ä¸€ä¸ªç§æœ‰å˜é‡addressï¼Œåˆå§‹åŒ–å€¼æ˜¯â€localhostâ€,è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆtomcaté»˜è®¤çš„hostæ˜¯æœ¬æœºäº†ã€‚ åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸç»„ä»¶ LifeCycleæœ€ä¸Šå±‚çš„æ¥å£å®šä¹‰ï¼Œä»¥åŠç”Ÿå‘½å‘¨æœŸçš„å¸¸é‡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165public interface Lifecycle &#123; // ----------------------------------------------------- Manifest Constants /** * The LifecycleEvent type for the &quot;component before init&quot; event. */ public static final String BEFORE_INIT_EVENT = &quot;before_init&quot;; /** * The LifecycleEvent type for the &quot;component after init&quot; event. */ public static final String AFTER_INIT_EVENT = &quot;after_init&quot;; /** * The LifecycleEvent type for the &quot;component start&quot; event. */ public static final String START_EVENT = &quot;start&quot;; /** * The LifecycleEvent type for the &quot;component before start&quot; event. */ public static final String BEFORE_START_EVENT = &quot;before_start&quot;; /** * The LifecycleEvent type for the &quot;component after start&quot; event. */ public static final String AFTER_START_EVENT = &quot;after_start&quot;; /** * The LifecycleEvent type for the &quot;component stop&quot; event. */ public static final String STOP_EVENT = &quot;stop&quot;; /** * The LifecycleEvent type for the &quot;component before stop&quot; event. */ public static final String BEFORE_STOP_EVENT = &quot;before_stop&quot;; /** * The LifecycleEvent type for the &quot;component after stop&quot; event. */ public static final String AFTER_STOP_EVENT = &quot;after_stop&quot;; /** * The LifecycleEvent type for the &quot;component after destroy&quot; event. */ public static final String AFTER_DESTROY_EVENT = &quot;after_destroy&quot;; /** * The LifecycleEvent type for the &quot;component before destroy&quot; event. */ public static final String BEFORE_DESTROY_EVENT = &quot;before_destroy&quot;; /** * The LifecycleEvent type for the &quot;periodic&quot; event. */ public static final String PERIODIC_EVENT = &quot;periodic&quot;; /** * The LifecycleEvent type for the &quot;configure_start&quot; event. Used by those * components that use a separate component to perform configuration and * need to signal when configuration should be performed - usually after * &#123;@link #BEFORE_START_EVENT&#125; and before &#123;@link #START_EVENT&#125;. */ public static final String CONFIGURE_START_EVENT = &quot;configure_start&quot;; /** * The LifecycleEvent type for the &quot;configure_stop&quot; event. Used by those * components that use a separate component to perform configuration and * need to signal when de-configuration should be performed - usually after * &#123;@link #STOP_EVENT&#125; and before &#123;@link #AFTER_STOP_EVENT&#125;. */ public static final String CONFIGURE_STOP_EVENT = &quot;configure_stop&quot;; // --------------------------------------------------------- Public Methods /** * æ·»åŠ ç›‘å¬å™¨ * * @param listener The listener to add */ public void addLifecycleListener(LifecycleListener listener); /** * è·å–æ‰€æœ‰çš„ç›‘å¬å™¨ * * @return An array containing the life cycle listeners associated with this * life cycle. If this component has no listeners registered, a * zero-length array is returned. */ public LifecycleListener[] findLifecycleListeners(); /** * ç§»é™¤å½“å‰çš„ç›‘å¬å™¨ * * @param listener The listener to remove */ public void removeLifecycleListener(LifecycleListener listener); /** * åˆå§‹åŒ–æ–¹æ³•ï¼Œåœ¨INIT_EVENTæˆåŠŸä¹‹åæ‰§è¡Œ * * @exception LifecycleException if this component detects a fatal error * that prevents this component from being used */ public void init() throws LifecycleException; /** * å¯åŠ¨æ–¹æ³•ï¼Œåœ¨è°ƒç”¨publicä¹‹å¤–çš„æ–¹æ³•ä¹‹å‰ã€‚æ‰§è¡Œé¡ºåºBEFORE_START_EVENTã€START_EVENTã€ * AFTER_START_EVENT */ public void start() throws LifecycleException; /** * åœ¨STOP_EVENTæ—¶è§¦å‘ï¼Œä¼˜é›…çš„å…³é—­ã€‚ */ public void stop() throws LifecycleException; /** * åœ¨å®ŒæˆDESTROY_EVENTçŠ¶æ€æ—¶ï¼Œè°ƒç”¨é”€æ¯æ–¹æ³• */ public void destroy() throws LifecycleException; /** * è·å–å½“å‰ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ */ public LifecycleState getState(); /** * è·å–Stringç±»å‹çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ */ public String getStateName(); /** * Marker interface used to indicate that the instance should only be used * once. Calling &#123;@link #stop()&#125; on an instance that supports this interface * will automatically call &#123;@link #destroy()&#125; after &#123;@link #stop()&#125; * completes. */ public interface SingleUse &#123; &#125;&#125; ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ1234567891011121314151617181920212223242526272829303132333435363738394041424344public enum LifecycleState &#123; NEW(false, null), //æ–°çŠ¶æ€ INITIALIZING(false, Lifecycle.BEFORE_INIT_EVENT), //æ­£åœ¨åˆå§‹åŒ– INITIALIZED(false, Lifecycle.AFTER_INIT_EVENT), //åˆå§‹åŒ–å®Œæ¯• STARTING_PREP(false, Lifecycle.BEFORE_START_EVENT), //å¼€å§‹å¯åŠ¨ STARTING(true, Lifecycle.START_EVENT), //å¯åŠ¨ä¸­ STARTED(true, Lifecycle.AFTER_START_EVENT), //å¯åŠ¨å®Œæ¯• STOPPING_PREP(true, Lifecycle.BEFORE_STOP_EVENT), //å‡†å¤‡åœæ­¢ STOPPING(false, Lifecycle.STOP_EVENT), //åœæ­¢ä¸­ STOPPED(false, Lifecycle.AFTER_STOP_EVENT), //å·²åœæ­¢ DESTROYING(false, Lifecycle.BEFORE_DESTROY_EVENT), //æ­£åœ¨é‡Šæ”¾oræ­£åœ¨é”€æ¯ DESTROYED(false, Lifecycle.AFTER_DESTROY_EVENT), //å·²æ¶ˆäº¡ FAILED(false, null); //å¤±è´¥ private final boolean available; private final String lifecycleEvent; private LifecycleState(boolean available, String lifecycleEvent) &#123; this.available = available; this.lifecycleEvent = lifecycleEvent; &#125; /** * May the public methods other than property getters/setters and lifecycle * methods be called for a component in this state? It returns * &lt;code&gt;true&lt;/code&gt; for any component in any of the following states: * &lt;ul&gt; * &lt;li&gt;&#123;@link #STARTING&#125;&lt;/li&gt; * &lt;li&gt;&#123;@link #STARTED&#125;&lt;/li&gt; * &lt;li&gt;&#123;@link #STOPPING_PREP&#125;&lt;/li&gt; * &lt;/ul&gt; * * @return &lt;code&gt;true&lt;/code&gt; if the component is available for use, * otherwise &lt;code&gt;false&lt;/code&gt; */ public boolean isAvailable() &#123; return available; &#125; public String getLifecycleEvent() &#123; return lifecycleEvent; &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960/** * General event for notifying listeners of significant changes on a component * that implements the Lifecycle interface. * * @author Craig R. McClanahan */public final class LifecycleEvent extends EventObject &#123; private static final long serialVersionUID = 1L; /** * Construct a new LifecycleEvent with the specified parameters. * * @param lifecycle Component on which this event occurred * @param type Event type (required) * @param data Event data (if any) */ public LifecycleEvent(Lifecycle lifecycle, String type, Object data) &#123; super(lifecycle); this.type = type; this.data = data; &#125; /** * The event data associated with this event. */ private final Object data; /** * The event type this instance represents. */ private final String type; /** * @return the event data of this event. */ public Object getData() &#123; return data; &#125; /** * @return the Lifecycle on which this event occurred. */ public Lifecycle getLifecycle() &#123; return (Lifecycle) getSource(); &#125; /** * @return the event type of this event. */ public String getType() &#123; return this.type; &#125;&#125; LifecycleBase1public abstract class LifecycleBase implements Lifecycle &#123;&#125; Base implementation of the Lifecycle interface that implements thestate transition rules for start() and stop()ç”Ÿå‘½å‘¨æœŸæ¥å£çš„åŸºæœ¬å®ç°ï¼Œå®ƒå®ç°äº†start()å’Œstop()çš„çŠ¶æ€è½¬æ¢è§„åˆ™ Tomcatä¸­çš„ç»„ä»¶éƒ½éœ€è¦å®ç°Lifecycleæ¥å£ï¼Œä½œç”¨äºå¯¹ç»„ä»¶çš„å¯åŠ¨ã€åˆå§‹åŒ–ã€å…³é—­çš„æ ‡å‡†æµç¨‹åŒ– 1234567891011121314@Overridepublic final synchronized void init() throws LifecycleException &#123; if (!state.equals(LifecycleState.NEW)) &#123; invalidTransition(Lifecycle.BEFORE_INIT_EVENT); &#125; try &#123; setStateInternal(LifecycleState.INITIALIZING, null, false); initInternal(); &#x2F;&#x2F;å„ä¸ªå­ç±»å®ç°protectedè¯¥æ–¹æ³•åˆå§‹åŒ–ç»„ä»¶ setStateInternal(LifecycleState.INITIALIZED, null, false); &#125; catch (Throwable t) &#123; handleSubClassException(t, &quot;lifecycleBase.initFail&quot;, toString()); &#125;&#125; å®ç°äº†è¯¥æ¥å£çš„ç»„ä»¶ï¼Œå½“çŠ¶æ€æ”¹å˜æ—¶ä¼šè§¦å‘è¯¥äº‹ä»¶ç›‘å¬å™¨ 123456789101112public interface LifecycleListener &#123; &#x2F;** * Acknowledge the occurrence of the specified event. * * @param event LifecycleEvent that has occurred *&#x2F; public void lifecycleEvent(LifecycleEvent event);&#125; Tomcatå„ä¸ªç»„ä»¶éƒ½æ˜¯å…ˆåˆ†åˆ«æ‰§è¡Œinit()æ–¹æ³•ï¼Œåˆå§‹åŒ–å®Œæ¯•ä¹‹åæ‰ä¾æ¬¡æ‰§è¡Œstart()æ–¹æ³• å…³äºJNDI https://docs.oracle.com/javase/tutorial/jndi/overview/index.html ContextConfigè´Ÿè´£åŠ è½½ä¸Šä¸‹æ–‡é…ç½®ï¼Œæ¯”å¦‚ web.xml ç”±webConfig()åŠ è½½ åœ¨Tomcatä¸­ ç¬¬ä¸€ä¸ªåˆå§‹åŒ–çš„ç»„ä»¶æ˜¯Global JNDI resources 123456789&#x2F;** * Helper class used to initialize and populate the JNDI context associated * with each context and server. * * @author Remy Maucherat *&#x2F;public class NamingContextListener implements LifecycleListener, ContainerListener, PropertyChangeListener &#123;&#125; æºç æ³¨é‡Šä¸­å†™é“ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨æ¥åˆå§‹åŒ–å’Œå¡«å……æ¯ä¸ªä¸Šä¸‹æ–‡å’ŒæœåŠ¡å™¨å…³è”çš„JNDIä¸Šä¸‹æ–‡ 1 Tomcat Requestå¯¹è±¡çš„ç”Ÿæˆä¸€ä¸ªRequestçš„è¯·æ±‚å¤§æ¦‚ä¼šç»è¿‡ä»¥ä¸‹æ­¥éª¤ çº¿ç¨‹-&gt;Socket-&gt;Protocol-&gt;HTTP11&gt;CoyoteAdapter-&gt;StandardEngineValueç®¡é“-&gt;AccessLogValueç®¡é“ -&gt; ErrorReportValue-&gt;StandardHostValue-&gt;AuthenticatorBase-&gt;StandardContextValue-&gt;StandardWrapperValue-&gt;ApplicationFilterChain-&gt;ErrorPageFilter-&gt;æœ€ç»ˆåˆ°è¾¾HttpServlet è¿æ¥å™¨ä¸å®¹å™¨çš„æ¡¥æ¢â€”â€”CoyoteAdapteræœªå®Œâ€¦â€¦â€¦..","categories":[],"tags":[]},{"title":"MySQLæ€§èƒ½ç®¡ç†åŠæ¶æ„è®¾è®¡","slug":"MySQL/MySQLæ€§èƒ½ç®¡ç†åŠæ¶æ„è®¾è®¡","date":"2020-11-22T08:28:38.000Z","updated":"2021-06-14T13:59:33.945Z","comments":true,"path":"2020/11/22/MySQL/MySQLæ€§èƒ½ç®¡ç†åŠæ¶æ„è®¾è®¡/","link":"","permalink":"http://www.postman.life/2020/11/22/MySQL/MySQL%E6%80%A7%E8%83%BD%E7%AE%A1%E7%90%86%E5%8F%8A%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/","excerpt":"","text":"[TOC] ä»€ä¹ˆæƒ…å†µä¼šå½±å“æ•°æ®åº“æ€§èƒ½å¤§é‡çš„å¹¶å‘å’Œè¶…é«˜çš„CPUä½¿ç”¨ç‡ ç£ç›˜IO ç½‘å¡æµé‡ å¤§è¡¨ è®°å½•è¡Œæ•°å·¨å¤§ï¼Œå•è¡¨è¶…è¿‡åƒä¸‡è¡Œ è¡¨æ•°æ®æ–‡ä»¶å·¨å¤§ï¼Œè¡¨æ•°æ®æ–‡ä»¶è¶…è¿‡10G å¤§è¡¨å¯¹DDLæ“ä½œçš„å½±å“(é£é™©) å»ºç«‹ç´¢å¼•éœ€è¦å¾ˆé•¿çš„æ—¶é—´ MySQLç‰ˆæœ¬&lt;5.5å»ºç«‹ç´¢å¼•ä¼šé”è¡¨ MySQLç‰ˆæœ¬&gt;= 5.5è™½ç„¶ä¸ä¼šé”è¡¨ä½†ä¼šå¼•èµ·ä¸»ä»å»¶è¿Ÿ ä¿®æ”¹è¡¨ç»“æ„éœ€è¦é•¿æ—¶é—´é”è¡¨ ä¼šé€ æˆé•¿æ—¶é—´çš„ä¸»ä»å»¶è¿Ÿ å½±å“æ­£å¸¸çš„æ•°æ®æ“ä½œ å¦‚ä½•å¤„ç†æ•°æ®åº“ä¸­çš„å¤§è¡¨ åˆ†åº“åˆ†è¡¨æŠŠä¸€å¼ å¤§è¡¨åˆ†æˆå¤šä¸ªå°è¡¨ éš¾ç‚¹ï¼š åˆ†è¡¨ä¸»é”®çš„é€‰æ‹© åˆ†è¡¨åè·¨åˆ†åŒºæ•°æ®çš„æŸ¥è¯¢å’Œç»Ÿè®¡ å¤§è¡¨çš„å†å²æ•°æ®å½’æ¡£ - å‡å°‘å¯¹å‰åç«¯ä¸šåŠ¡çš„å½±å“ éš¾ç‚¹ï¼š å½’æ¡£æ—¶é—´ç‚¹çš„é€‰æ‹© å¦‚ä½•è¿›è¡Œå½’æ¡£æ“ä½œ ä»€ä¹ˆæ˜¯å¤§äº‹åŠ¡ - å¤§äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜å®šä¹‰âˆ¶ â€‹ è¿è¡Œæ—¶é—´æ¯”è¾ƒé•¿ï¼Œæ“ä½œçš„æ•°æ®æ¯”è¾ƒå¤šçš„äº‹åŠ¡ é£é™©: â€‹ é”å®šå¤ªå¤šçš„æ•°æ®ï¼Œé€ æˆå¤§é‡çš„é˜»å¡å’Œé”è¶…æ—¶ â€‹ å›æ»šæ—¶æ‰€éœ€è¦æ—¶é—´æ¯”è¾ƒé•¿ â€‹ æ‰§è¡Œæ—¶é—´é•¿ï¼Œå®¹æ˜“é€ æˆä¸»ä»å»¶è¿Ÿ å¦‚ä½•å¤„ç†å¤§äº‹åŠ¡ é¿å…ä¸€æ¬¡å¤„ç†å¤ªå¤šçš„æ•°æ® ç§»é™¤ä¸å¿…è¦åœ¨äº‹åŠ¡ä¸­çš„SELECTæ“ä½œ ä»€ä¹ˆå½±å“äº†MySQLæ€§èƒ½ æœåŠ¡å™¨ç¡¬ä»¶ï¼ˆCPUã€å†…å­˜ç­‰ï¼‰ æœåŠ¡å™¨ç³»ç»Ÿ æ•°æ®åº“å­˜å‚¨å¼•æ“çš„é€‰æ‹© æ•°æ®åº“å‚æ•°é…ç½® æ•°æ®åº“ç»“æ„è®¾è®¡å’ŒSQLè¯­å¥(è¡¨ç»“æ„è®¾è®¡ã€SQLè¯­å¥çš„ç¼–å†™å’Œä¼˜åŒ–) CPUèµ„æºå’Œå¯ç”¨å†…å­˜å¤§å°å¦‚ä½•é€‰æ‹©CPUï¼Ÿ æˆ‘ä»¬çš„åº”ç”¨æ˜¯CPUå¯†é›†å‹çš„å—ï¼Ÿ æˆ‘ä»¬ç³»ç»Ÿçš„å¹¶å‘é‡å¦‚ä½•ï¼Ÿ è¡¡é‡æ•°æ®åº“å¤„ç†èƒ½åŠ›çš„æŒ‡æ ‡ï¼šQPSï¼ˆæ¯ç§’å¤„ç†SQLçš„æ•°é‡ï¼‰ WEBç±»åº”ç”¨ï¼šæ ¸å¿ƒæ•°é‡æ¯”é¢‘ç‡é‡è¦ ä½¿ç”¨æ­£ç¡®çš„æœåŠ¡å™¨ç‰ˆæœ¬ï¼ˆ64ä½æ“ä½œç³»ç»Ÿä½¿ç”¨64ä½æœåŠ¡å™¨ç‰ˆæœ¬ï¼‰ å†…å­˜è¶Šå¤šè¶Šå¥½ï¼Œä½†å¯¹æ€§èƒ½å½±å“æœ‰é™ã€‚æ— é™å¢åŠ å†…å­˜ä¸æ˜¯é“¶å¼¹ ç¼“å­˜å¯ä»¥æŠŠå¤šä¸ªå†™å…¥åŠ è½½åˆ°å†…å­˜ç„¶åä¸€æ¬¡å†™å…¥åˆ°ç£ç›˜ ç£ç›˜çš„é…ç½®å’Œé€‰æ‹©ä½¿ç”¨ä¼ ç»Ÿæœºå™¨ç¡¬ç›˜ï¼š å­˜å‚¨å®¹é‡ ä¼ è¾“é€Ÿåº¦ è®¿é—®æ—¶é—´ ä¸»è½´è½¬é€Ÿ ç‰©ç†å°ºå¯¸ å¤šä¸ªå®¹é‡è¾ƒå°çš„ç£ç›˜ç»„æˆä¸€ç»„å®¹é‡æ›´å¤§çš„ç£ç›˜ ä½¿ç”¨RAIDï¼ˆç£ç›˜å†—ä½™é˜Ÿåˆ—ï¼‰å¢å¼ºä¼ ç»Ÿæœºå™¨ç¡¬ç›˜çš„æ€§èƒ½ï¼š ä½¿ç”¨å›ºæ€å­˜å‚¨SSDå’ŒPCIeå¡ï¼š æ›´å¥½çš„éšæœºè¯»å†™æ€§èƒ½ æ›´å¥½çš„æ”¯æŒå¹¶å‘ ä½¿ç”¨åœºæ™¯ï¼š å­˜åœ¨äºå¤§é‡éšæœºI/Oçš„åœºæ™¯ ä½¿ç”¨äºç»“å±€å•çº¿ç¨‹è´Ÿè½½çš„I/Oç“¶é¢ˆ ä½¿ç”¨ç½‘ç»œå­˜å‚¨NASå’ŒSANï¼š ç½‘ç»œå­˜å‚¨ä½¿ç”¨çš„åœºæ™¯ æ•°æ®åº“å¤‡ä»½ æ“ä½œç³»ç»Ÿå¯¹æ€§èƒ½çš„å½±å“é€‚åˆçš„æ“ä½œç³»ç»Ÿ Window FreeBSD Solaris Linux Centosç³»ç»Ÿå‚æ•°ä¼˜åŒ–å†…æ ¸ç›¸å…³å‚æ•°ï¼ˆ/etc/sysctl.confï¼‰ ç½‘ç»œå±‚ï¼š net.core.somaxconn=65535 net.core.netdev_max_backlog=65535 net.ipv4.tcp_max_syn_backlog=65535 net.ipv4.tcp_fin_timeout = 10 net.ipv4.tcp_tw_reuse = 1 net.ipv4.tcp_tw_recycle = 1 net.core.wmem_default =87380 net.core.wmem_max =16777216 net.core.rmem_default =87380 net.core.rmem_max =16777216 net.ipv4.tcp_keepalive_time = 120 net.ipv4.tcp_keepalive_intvl = 30 net.ipv4.tcp_keepalive_probes = 3 â€‹ å†…å­˜ï¼š kernel.shmmax = 4294967295 - å•ä¸ªå…±äº«å†…å­˜æ®µçš„æœ€å¤§å€¼ è¿™ä¸ªå‚æ•°åº”è¯¥è®¾ç½®çš„è¶³å¤Ÿå¤§ï¼Œä»¥ä¾¿èƒ½åœ¨ä¸€ä¸ªå…±äº«å†…å­˜æ®µä¸‹å®¹çº³ä¸‹æ•´ä¸ªçš„Innodbç¼“å†²æ± çš„å¤§å°ã€‚ vm.swappiness = oè¿™ä¸ªå‚æ•°å½“å†…å­˜ä¸è¶³æ—¶ä¼šå¯¹æ€§èƒ½äº§ç”Ÿæ¯”è¾ƒæ˜æ˜¾çš„å½±å“ å¢åŠ èµ„æºé™åˆ¶(/etc/security/limit.conf) soft nofile 65535 hard nofile 65535 ç£ç›˜è°ƒåº¦ç­–ç•¥(/sys/block/devname/queue/scheduler) cat /sys/block/sda/queue/scheduler noop anticipatory deadline [cfq] noopï¼ˆç”µæ¢¯å¼è°ƒåº¦ç­–ç•¥ - FIFO é˜Ÿåˆ—ï¼‰ deadlineï¼ˆæˆªæ­¢æ—¶é—´è°ƒåº¦ç­–ç•¥ï¼‰ anticipatory(é¢„æ–™I/Oè°ƒåº¦ç­–ç•¥) æ–‡ä»¶ç³»ç»Ÿå¯¹æ€§èƒ½çš„å½±å“Window FAT NTFS Linux EXT3 EXT4 XFS EXT3/4ç³»ç»Ÿçš„æŒ‚è½½å‚æ•°(/etc/fstab) data=writeback | ordered l journals noatime , nodiratime /dev/sda1/ext4 noatime,nodiratime,data=writeback 1 1 MySQLä½“ç³»ç»“æ„ MyISAMå­˜å‚¨å¼•æ“åœ¨MySQL 5.1åŠä¹‹å‰çš„ç‰ˆæœ¬ï¼ŒMyISAMæ˜¯é»˜è®¤çš„å­˜å‚¨å¼•æ“ ç‰¹æ€§ åŠ é”ä¸å¹¶å‘MyISAMå¯¹æ•´å¼ è¡¨åŠ é”ï¼Œè€Œä¸æ˜¯é’ˆå¯¹è¡Œã€‚è¯»å–æ—¶ä¼šå¯¹éœ€è¦è¯»åˆ°çš„æ‰€æœ‰è¡¨åŠ å…±äº«é”ï¼Œå†™å…¥æ—¶åˆ™å¯¹è¡¨åŠ æ’ä»–é”ã€‚ä½†æ˜¯åœ¨è¡¨æœ‰è¯»å–æŸ¥è¯¢çš„åŒæ—¶ï¼Œä¹Ÿå¯ä»¥å¾€è¡¨ä¸­æ’å…¥æ–°çš„è®°å½•(è¿™è¢«ç§°ä¸ºå¹¶å‘æ’å…¥ï¼ŒCONCURRENT INSERT)ã€‚ è¡¨æŸåå’Œä¿®å¤MyISAM å­˜å‚¨å¼•æ“çš„æŸä¸ªè¡¨æ–‡ä»¶å‡ºé”™ä¹‹åï¼Œä»…å½±å“åˆ°è¯¥è¡¨ï¼Œè€Œä¸ä¼šå½±å“åˆ°å…¶ä»–è¡¨ï¼Œæ›´ä¸ä¼šå½±å“åˆ°å…¶ä»–çš„æ•°æ®åº“ã€‚å¦‚æœæˆ‘ä»¬æ­£åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‘ç°æŸä¸ª MyISAM è¡¨å‡ºç°é—®é¢˜äº†ï¼Œ åˆ™å¯ä»¥åœ¨çº¿é€šè¿‡ check table å‘½ä»¤æ¥å°è¯•æ ¡éªŒä»–ï¼Œå¹¶å¯ä»¥é€šè¿‡ repair table å‘½ä»¤æ¥å°è¯•ä¿® å¤ã€‚åœ¨æ•°æ®åº“å…³é—­çŠ¶æ€ä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ myisamchk å·¥å…·æ¥å¯¹æ•°æ®åº“ä¸­æŸä¸ªï¼ˆæˆ–æŸäº›ï¼‰è¡¨è¿›è¡Œæ£€æµ‹æˆ–è€…ä¿®å¤ã€‚ä¸è¿‡å¼ºçƒˆå»ºè®®ä¸åˆ°ä¸‡ä¸å¾—å·²ä¸è¦è½»æ˜“å¯¹è¡¨è¿›è¡Œä¿®å¤æ“ä½œï¼Œä¿®å¤ä¹‹å‰å°½é‡ åšå¥½å¯èƒ½çš„å¤‡ä»½å·¥ä½œï¼Œä»¥å…å¸¦æ¥ä¸å¿…è¦çš„åæœã€‚ ç´¢å¼•ç‰¹æ€§å³ä½¿æ˜¯BLOBå’ŒTEXTç­‰é•¿å­—æ®µï¼Œä¹Ÿå¯ä»¥åŸºäºå…¶å‰500ä¸ªå­—ç¬¦åˆ›å»ºç´¢å¼•ã€‚MyISAMä¹Ÿæ”¯æŒå…¨æ–‡ç´¢å¼•ã€‚å¯ä»¥æŒ‡å®šDELAY_KEY_WRITERæ¥å»¶è¿Ÿæ›´æ–°ç´¢å¼•é”® ä¼˜ç¼ºç‚¹ï¼š ä¸æ”¯æŒäº‹åŠ¡å’Œè¡Œçº§é” å´©æºƒåæ— æ³•å®‰å…¨æ¢å¤ å­˜å‚¨MyISAM å­˜å‚¨å¼•æ“çš„è¡¨åœ¨æ•°æ®åº“ä¸­ï¼Œæ¯ä¸€ä¸ªè¡¨éƒ½è¢«å­˜æ”¾ä¸ºä¸‰ä¸ªä»¥è¡¨åå‘½åçš„ç‰©ç†æ–‡ä»¶ã€‚ å®šä¹‰ æ–‡ä»¶ è¡¨ç»“æ„å®šä¹‰ä¿¡æ¯ .FRM è¡¨çš„æ•°æ® .MYD ç´¢å¼•æ•°æ® .MYI æ¯ä¸ªè¡¨éƒ½æœ‰ä¸”ä»…æœ‰è¿™æ ·ä¸‰ä¸ªæ–‡ä»¶åšä¸º MyISAM å­˜å‚¨ç±»å‹çš„è¡¨çš„å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ç®¡è¿™ä¸ªè¡¨æœ‰å¤šå°‘ä¸ªç´¢å¼•ï¼Œéƒ½æ˜¯å­˜æ”¾åœ¨åŒä¸€ä¸ª.MYI æ–‡ä»¶ä¸­ã€‚ MyISAMå‹ç¼©è¡¨é»˜è®¤æ˜¯ä¸å‹ç¼©çš„ï¼Œå‹ç¼©æ–¹å¼ï¼š åˆ›å»ºè¡¨æ—¶é€šè¿‡ ROW_FORMAT æ¥æŒ‡å®š {COMPRESSED | DEFAULT}ï¼Œ myisampack å·¥å…· è€Œåœ¨éå‹ç¼©çš„æƒ…å†µä¸‹ï¼Œè¡¨æ˜¯é™æ€è¿˜æ˜¯åŠ¨æ€ï¼Œå°±å’Œæˆ‘ä»¬è¡¨ä¸­ä¸ªå­—æ®µçš„å®šä¹‰ç›¸å…³äº†ã€‚åªè¦è¡¨ä¸­æœ‰å¯å˜é•¿åº¦ç±»å‹çš„å­—æ®µå­˜åœ¨ï¼Œé‚£ä¹ˆè¯¥è¡¨å°±è‚¯å®šæ˜¯DYNAMIC æ ¼å¼çš„ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•å¯å˜é•¿åº¦çš„å­—æ®µï¼Œåˆ™ä¸º FIXED æ ¼å¼ã€‚ é€‚ç”¨åœºæ™¯ï¼š éäº‹åŠ¡æ€§åº”ç”¨ åªè¯»ç±»åº”ç”¨ ç©ºé—´ç±»åº”ç”¨ InnoDBå­˜å‚¨å¼•æ“ç‰¹æ€§ï¼š æ”¯æŒäº‹åŠ¡å®‰è£…READ UNCOMMITTEDï¼Œ READ COMMITTEDï¼Œ REPEATABLE READ SERIALIZABLE æ•°æ®å¤šç‰ˆæœ¬è¯»å–åœ¨äº‹åŠ¡æ”¯æŒçš„åŒæ—¶ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å·²ç»å¹¶å‘æ—¶å€™çš„æ€§èƒ½ï¼Œé€šè¿‡å¯¹ undo ä¿¡æ¯ï¼Œå®ç°äº†æ•°æ®çš„å¤šç‰ˆæœ¬è¯»å– è¡Œçº§é”çš„æ”¯æŒæ”¹å˜äº†MyISAMçš„é”æœºåˆ¶ï¼Œé€šè¿‡ç´¢å¼•å®ç°äº†è¡Œé”ï¼Œæœ€å¤§ç¨‹åº¦æ”¯æŒå¹¶å‘ å®ç°å¤–é”®è™½ç„¶å¾ˆå¤šæ•°æ®åº“ç³»ç»Ÿè°ƒä¼˜ä¸“å®¶éƒ½å»ºè®®ä¸è¦è¿™æ ·åšï¼Œä½†æ˜¯å¯¹äºä¸å°‘ç”¨æˆ·æ¥è¯´åœ¨æ•°æ® åº“ç«¯åŠ å¦‚å¤–é”®æ§åˆ¶å¯èƒ½ä»ç„¶æ˜¯æˆæœ¬æœ€ä½çš„é€‰æ‹© æ”¯æŒç¬¦å·é“¾æ¥ Redo Log ï¼ˆæŒä¹…æ€§ï¼‰ å’ŒUndo Logï¼ˆå›æ»šï¼‰ äº‹åŠ¡å®‰å…¨æ€§ä¸»è¦å°±æ˜¯é€šè¿‡Redo æ—¥å¿—å’Œè®°å½•åœ¨è¡¨ç©ºé—´ä¸­çš„Undo ä¿¡æ¯æ¥ä¿è¯çš„ã€‚ Redo æ—¥å¿—ä¸­è®°å½•äº†Innodb æ‰€åšçš„æ‰€æœ‰ç‰©ç†å˜æ›´å’Œäº‹åŠ¡ä¿¡æ¯ï¼Œ é€šè¿‡Redo æ—¥å¿—å’ŒUndo ä¿¡æ¯ï¼ŒInnodb ä¿è¯äº†åœ¨ä»»ä½•æƒ…å†µä¸‹çš„äº‹åŠ¡å®‰å…¨æ€§ã€‚ Innodb çš„redoæ—¥å¿—åŒæ ·é»˜è®¤å­˜æ”¾åœ¨æ•°æ®ç›®å½•ä¸‹ï¼Œ innodb_log_group_home_dir æ›´æ”¹è®¾ç½®æ—¥å¿—çš„å­˜æ”¾ä½ç½®ï¼Œ innodb_log_files_in_group è®¾ç½®æ—¥å¿—çš„æ•°é‡ã€‚ Innodbä½¿ç”¨è¡¨ç©ºé—´è¿›è¡Œæ•°æ®å­˜å‚¨ innodb_file_per_table ON:ç‹¬ç«‹è¡¨ç©ºé—´:tablename. ibd OFF:ç³»ç»Ÿè¡¨ç©ºé—´:ibdataX å®šä¹‰ æ–‡ä»¶ è¡¨ç»“æ„å®šä¹‰ä¿¡æ¯ .FRM è¡¨çš„æ•°æ®ã€ç´¢å¼•æ•°æ® .IBD ç³»ç»Ÿè¡¨ç©ºé—´å’Œç‹¬ç«‹è¡¨ç©ºé—´è¦å¦‚ä½•é€‰æ‹© æ¯”è¾ƒ: ç³»ç»Ÿè¡¨ç©ºé—´æ— æ³•ç®€å•çš„æ”¶ç¼©æ–‡ä»¶å¤§å° ç‹¬ç«‹è¡¨ç©ºé—´å¯ä»¥é€šè¿‡optimize tableå‘½ä»¤æ”¶ç¼©ç³»ç»Ÿæ–‡ä»¶ ç³»ç»Ÿè¡¨ç©ºé—´ä¼šäº§ç”ŸIOç“¶é¢ˆ ç‹¬ç«‹è¡¨ç©ºé—´å¯ä»¥åŒæ—¶å‘å¤šä¸ªæ–‡ä»¶åˆ·æ–°æ•°æ® MySQLæœåŠ¡å™¨å‚æ•°ä»‹ç»MySQLè·å–é…ç½®ä¿¡æ¯è·¯å¾„ å‘½ä»¤è¡Œå‚æ•°mysqld_safe â€“datadir=/data/sql_data é…ç½®æ–‡ä»¶ mysqld â€“help â€“verbose | grep -A 1 â€˜Default optiorns /etc/my.cnf /etc/mysql/my.cnf /home/mysql/my.cnf ~/.my.cnf MySQLé…ç½®å‚æ•°çš„åšç”¨åŸŸ å…¨å±€å‚æ•° set globalå‚æ•°å=å‚æ•°å€¼; set @@global.å‚æ•°å:=å‚æ•°å€¼; ä¼šè¯å‚æ•° set [session]å‚æ•°å=å‚æ•°å€¼; set @@session.å‚æ•°å:=å‚æ•°å€¼; å†…å­˜é…ç½®ç›¸å…³å‚æ•° ç¡®å®šå¯ä»¥ä½¿ç”¨çš„å†…å­˜çš„ä¸Šé™ ç¡®å®šMySQLçš„æ¯ä¸ªè¿æ¥ä½¿ç”¨çš„å†…å­˜ sort_buffer_size æ¯ä¸ªçº¿ç¨‹æ’åºç¼“å†²åŒºçš„å¤§å° join_buffer_size æ¯ä¸ªè¿æ¥æ‰€ä½¿ç”¨è¿æ¥ç¼“å†²åŒºçš„å¤§å° read_buffer_size MyISAM æŸ¥è¯¢ç¼“å†²åŒºå¤§å° ï¼ˆ4kçš„å€æ•°ï¼‰ read_rnd_buffer_size ç´¢å¼•ç¼“å†²åŒºçš„å¤§å° ç¡®å®šéœ€è¦ä¸ºæ“ä½œç³»ç»Ÿä¿ç•™å¤šå°‘å†…å­˜ ï¼ˆç”Ÿäº§ç¯å¢ƒä¸€å°æœåŠ¡å™¨è¿è¡Œä¸€ä¸ªæœåŠ¡å™¨å®ä¾‹ï¼‰ å¦‚ä½•ä¸ºç¼“å­˜æ± åˆ†é…å†…å­˜ *Innodb_buffer_pool_size æ€»å†…å­˜ - (æ¯ä¸ªçº¿ç¨‹æ‰€éœ€è¦çš„å†…å­˜è¿æ¥æ•°) - ç³»ç»Ÿä¿ç•™å†…å­˜**ï¼Œ ç¼“å­˜Innodbçš„ç´¢å¼•ã€æ•°æ®ã€å“ˆå¸Œç´¢å¼•ã€é”ã€æ’å…¥ç¼“å†²ã€å…¶å®ƒæ•°æ®ç»“æ„ã€å»¶è¿Ÿå†™å…¥ key_buffer_size MyISAM ç¼“å†²æ± ï¼Œç¼“å­˜ç´¢å¼•ã€æ•°æ®åˆ™ç”±æ“ä½œç³»ç»Ÿç¼“å­˜ 12select sum(index_length)from information_schema.tables where engine&#x3D;&#39;myisam&#39; I/Oç›¸å…³é…ç½®å‚æ•°ï¼ˆå†³å®šMySQLå¦‚ä½•åŒæ­¥ç¼“å†²æ± çš„æ•°æ®åˆ°ç£ç›˜ä¸ŠæŒä¹…åŒ–ï¼‰Innodb I/Oç›¸å…³é…ç½®InnoDbå†™å…¥æ•°æ®è¿‡ç¨‹ äº‹åŠ¡æ—¥å¿—ç¼“å†²åŒº -&gt; æ“ä½œç³»ç»Ÿcache -&gt; åˆ·æ–°åˆ°ç£ç›˜æ—¥å¿— innodb_log_group_home_dir æ›´æ”¹è®¾ç½®æ—¥å¿—çš„å­˜æ”¾ä½ç½®ï¼Œ innodb_log_files_in_group è®¾ç½®æ—¥å¿—çš„æ•°é‡ã€‚ Innodb_log_buffer_size äº‹åŠ¡æ—¥å¿—æ€»å¤§å° = Innodb_log_files_in_group * Innodb_log_file_size Innodb_flush_log_at_trx_commit 0:æ¯ç§’è¿›è¡Œä¸€æ¬¡logå†™å…¥cacheï¼Œå¹¶flush logåˆ°ç£ç›˜ 1[é»˜è®¤]:åœ¨æ¯æ¬¡äº‹åŠ¡æäº¤æ‰§è¡Œlogå†™å…¥cacheï¼Œå¹¶flush logåˆ°ç£ç›˜ 2[å»ºè®®]:æ¯æ¬¡äº‹åŠ¡æäº¤,æ‰§è¡Œlogæ•°æ®å†™å…¥åˆ°cacheï¼Œæ¯ç§’æ‰§è¡Œä¸€æ¬¡flush logåˆ°ç£ç›˜ Innodb_flush_method=O_DIRECT Innodb_file_per_table = 1 æ˜¯å¦ä½¿ç”¨è¡¨ç©ºé—´ Innodb_doublewrite = 1 åŒå†™ç¼“å­˜ MyISAM I/Oç›¸å…³é…ç½® delay_key_write OFF:æ¯æ¬¡å†™æ“ä½œååˆ·æ–°é”®ç¼“å†²ä¸­çš„è„å—åˆ°ç£ç›˜ ON:åªå¯¹åœ¨é”®è¡¨æ—¶æŒ‡å®šäº†delay_key_writeé€‰é¡¹çš„è¡¨ä½¿ç”¨å»¶è¿Ÿåˆ·æ–° ALL:å¯¹æ‰€æœ‰MYISAMè¡¨éƒ½ä½¿ç”¨å»¶è¿Ÿé”®å†™å…¥ å®‰å…¨ç›¸å…³é…ç½®å‚æ•°expire_logs_days æŒ‡å®šè‡ªåŠ¨æ¸…ç†binlogçš„å¤©æ•° max_allowed_packet æ§åˆ¶MySQLå¯ä»¥æ¥æ”¶çš„åŒ…çš„å¤§å° ï¼ˆå¦‚æœä¸»ä»ä¸€å®šè®¾ç½®ä¸€è‡´ï¼‰ skip_name_resolve ç¦ç”¨DNSæŸ¥æ‰¾ sysdate_is_now ç¡®ä¿sysdate()è¿”å›ç¡®å®šæ€§æ—¥æœŸ read_only ç¦æ­¢ésuperæƒé™çš„ç”¨æˆ·å†™æƒé™ ï¼ˆå»ºè®®åœ¨ä»åº“ä¸­å¯ç”¨ï¼Œåªæ¥å—ä»ä¸»åº“ä¼ è¿‡æ¥çš„æ•°æ®å˜æ›´ï¼‰ skip_slave_start ç¦ç”¨Slaveè‡ªåŠ¨æ¢å¤ sql_mode è®¾ç½®MySQLæ‰€ä½¿ç”¨çš„SQLæ¨¡å¼ strict_trans_tables no_engine_subtitution no_zero_date no_zero_in_date only_full_group_by å…¶å®ƒå¸¸ç”¨é…ç½®å‚æ•°sync_binlog æ§åˆ¶MySQLå¦‚ä½•å‘ç£ç›˜åˆ·æ–°binlog tmp_table_sizeã€max_heap_table_size æ§åˆ¶å†…å­˜ä¸´æ—¶è¡¨å¤§å°ã€å»ºè®®ä¿æŒä¸€è‡´ max_connections æ§åˆ¶å…è®¸çš„æœ€å¤§è¿æ¥æ•°ï¼ˆé»˜è®¤100ã€é€šå¸¸è®¾ç½®æˆ2000æˆ–æ ¹æ®åº”ç”¨ç¯å¢ƒæ¥å®šï¼‰ æ•°æ®åº“ç»“æ„è®¾è®¡å¯¹æ€§èƒ½çš„å½±å“ï¼ˆå¯¹æ€§èƒ½å½±å“æ¯”è¾ƒå¤§ï¼‰ä»€ä¹ˆå½±å“äº†æ€§èƒ½ è¿‡åˆ†çš„åèŒƒå¼åŒ–ä¸ºè¡¨å»ºç«‹å¤ªå¤šçš„åˆ— è¿‡åˆ†çš„èŒƒå¼åŒ–é€ æˆå¤ªå¤šçš„è¡¨å…³è” ï¼ˆMySQLé™åˆ¶æœ€å¤šå¯ä»¥å…³è”61å¼ è¡¨ï¼‰ åœ¨OLTPç¯å¢ƒä¸­ä½¿ç”¨ä¸æ°å½“çš„åˆ†åŒºè¡¨ ï¼ˆå¤§è¡¨åœ¨ç‰©ç†ä¸Šåˆ†æˆå°è¡¨ã€å®é™…ä¸Šè¿˜æ˜¯ä¸€å¼ è¡¨ã€åˆ†åŒºé”®é€‰æ‹©æ¯”è¾ƒå…³é”®ï¼‰ ä½¿ç”¨å¤–é”®ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ ï¼ˆåœ¨å¯¹ä½¿ç”¨å¤–é”®çš„ä¿®æ”¹æ—¶ï¼ŒMySQLä¼šå¯¹å¤–é”®è¿›è¡Œæ£€æŸ¥ï¼Œä¼šå¸¦æ¥é¢å¤–çš„é”å¼€é”€ï¼‰ æ€»ç»“æ€§èƒ½ä¼˜åŒ–é¡ºåº æ•°æ®åº“ç»“æ„è®¾è®¡å’ŒSQLè¯­å¥ æ•°æ®åº“å­˜å‚¨å¼•æ“çš„é€‰æ‹©å’Œå‚æ•°é…ç½® ç³»ç»Ÿé€‰æ‹©åŠä¼˜åŒ– ç¡¬ä»¶å‡çº§ MySQLåŸºå‡†æµ‹è¯•ä»€ä¹ˆæ˜¯åŸºå‡†æµ‹è¯•å®šä¹‰ åŸºå‡†æµ‹è¯•æ˜¯ä¸€ç§æµ‹é‡å’Œè¯„ä¼°è½¯ä»¶æ€§èƒ½æŒ‡æ ‡çš„æ´»åŠ¨ç”¨äºå»ºç«‹æŸä¸ªæ—¶åˆ»çš„æ€§èƒ½åŸºå‡†ï¼Œä»¥ä¾¿å½“ç³»ç»Ÿå‘ç”Ÿè½¯ç¡¬ä»¶å˜åŒ–æ—¶é‡æ–°è¿›è¡ŒåŸºå‡†æµ‹è¯•ä»¥è¯„ä¼°å˜åŒ–å¯¹æ€§èƒ½çš„å½±å“ æ‰€ä»¥ï¼Œ åŸºå‡†æµ‹è¯•æ˜¯é’ˆå¯¹ç³»ç»Ÿè®¾è®¡çš„ä¸€ç§å‹åŠ›æµ‹è¯• åŸºå‡†æµ‹è¯•çš„ç›®çš„ å»ºç«‹MySQLæœåŠ¡å™¨çš„æ€§èƒ½åŸºå‡†çº¿ æ¨¡æ‹Ÿæ¯”å½“å‰ç³»ç»Ÿæ›´é«˜çš„è´Ÿè½½ï¼Œä»¥æ‰¾å‡ºç³»ç»Ÿçš„æ‰©å±•ç“¶é¢ˆ æµ‹è¯•ä¸åŒçš„ç¡¬ä»¶ã€è½¯ä»¶å’Œæ“ä½œç³»ç»Ÿé…ç½® è¯æ˜æ–°çš„ç¡¬ä»¶è®¾å¤‡æ˜¯å¦é…ç½®æ­£ç¡® åŸºå‡†æµ‹è¯•çš„ç­–ç•¥ä¸»è¦æœ‰ä¸¤ç§ä¸»è¦çš„ç­–ç•¥ï¼š é’ˆå¯¹æ•´ä¸ªç³»ç»Ÿçš„æ•´ä½“æµ‹è¯•ï¼ˆé›†æˆå¼ï¼‰ ä¼˜ç‚¹ï¼šèƒ½å¤Ÿæµ‹è¯•æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½ï¼ŒåŒ…æ‹¬webæœåŠ¡å™¨ç¼“å­˜ã€æ•°æ®åº“ç­‰ã€‚ â€‹ èƒ½åæ˜ å‡ºç³»ç»Ÿä¸­å„ä¸ªç»„ä»¶æ¥å£é—´çš„æ€§èƒ½é—®é¢˜ä½“ç°çœŸå®æ€§èƒ½çŠ¶å†µã€‚ ç¼ºç‚¹ï¼šæµ‹è¯•è®¾è®¡å¤æ‚ï¼Œæ¶ˆè€—æ—¶é—´é•¿ã€‚ å•ç‹¬æµ‹è¯•MySQLï¼ˆå•ç»„ä»¶ï¼‰ ä¼˜ç‚¹ï¼šæµ‹è¯•è®¾è®¡ç®€å•ï¼Œæ‰€éœ€æ¶ˆè€—æ—¶é—´çŸ­ã€‚ ç¼ºç‚¹ï¼šæ— æ³•å…¨é¢äº†è§£æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½åŸºçº¿ã€‚ ä¸ºä»€ä¹ˆè¦é’ˆå¯¹æ•´ä¸ªç³»ç»Ÿåšé›†æˆå¼æµ‹è¯•ï¼Œè€Œä¸æ˜¯å•ç‹¬æµ‹è¯•MySQLï¼š æµ‹è¯•æ•´ä¸ªåº”ç”¨ç³»ç»Ÿï¼ŒåŒ…æ‹¬WebæœåŠ¡å™¨ã€åº”ç”¨ä»£ç ã€ç½‘ç»œå’Œæ•°æ®åº“æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå› ä¸ºç”¨æˆ·å…³æ³¨çš„å¹¶ä¸ä»…ä»…æ˜¯MySQLæœ¬èº«çš„æ€§èƒ½ï¼Œè€Œæ˜¯åº”ç”¨æ•´ä½“çš„æ€§èƒ½ã€‚ MySQLå¹¶éæ€»æ˜¯åº”ç”¨çš„ç“¶é¢ˆï¼Œé€šè¿‡æ•´ä½“çš„æµ‹è¯•å¯ä»¥æ­ç¤ºè¿™ä¸€ç‚¹ã€‚åªæœ‰å¯¹åº”ç”¨åšæ•´ä½“æµ‹è¯•ï¼Œæ‰èƒ½å‘ç°å„éƒ¨åˆ†ä¹‹é—´çš„ç¼“å­˜å¸¦æ¥çš„å½±å“ã€‚ æ•´ä½“åº”ç”¨çš„é›†æˆå¼æµ‹è¯•æ›´èƒ½æ­ç¤ºåº”ç”¨çš„çœŸå®è¡¨ç°ï¼Œè€Œå•ç‹¬ç»„ä»¶çš„æµ‹è¯•å¾ˆéš¾åšåˆ°è¿™ä¸€ç‚¹ã€‚ å•ç‹¬æµ‹è¯•MySQL****ï¼š éœ€è¦æ¯”è¾ƒä¸åŒçš„schemaæˆ–æŸ¥è¯¢çš„æ€§èƒ½ã€‚ é’ˆå¯¹åº”ç”¨ä¸­æŸä¸ªå…·ä½“é—®é¢˜çš„æµ‹è¯•ã€‚ ä¸ºäº†é¿å…æ¼«é•¿çš„åŸºå‡†æµ‹è¯•ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªçŸ­æœŸçš„åŸºå‡†æµ‹è¯•ï¼Œåšå¿«é€Ÿçš„â€œå‘¨æœŸå¾ªç¯â€ï¼Œæ¥æ£€æµ‹å‡ºæŸäº›è°ƒæ•´åçš„æ•ˆæœã€‚ MySQLåŸºå‡†æµ‹è¯•çš„å¸¸è§æŒ‡æ ‡ å•ä½æ—¶é—´å†…æ‰€å¤„ç†çš„äº‹åŠ¡æ•°(TPS) å•ä½æ—¶é—´å†…æ‰€å¤„ç†çš„æŸ¥è¯¢æ•°(QPS ) å“åº”æ—¶é—´ æ‰€éœ€çš„æ•´ä½“æ—¶é—´ï¼Œæ—¶é—´å•ä½å¯èƒ½æ˜¯å¾®å¦™ã€æ¯«ç§’ã€ç§’ã€æˆ–è€…åˆ†é’Ÿã€‚æ ¹æ®ä¸åŒçš„æ—¶é—´å•ä½å¯ä»¥è®¡ç®—å‡ºå¹³å‡å“åº”æ—¶é—´ã€æœ€å°å“åº”æ—¶é—´ã€æœ€å¤§å“åº”æ—¶é—´å’Œæ‰€å ç™¾åˆ†æ¯”ã€‚ å¹¶å‘æ€§ åŒæ—¶å·¥ä½œçš„çº¿ç¨‹æ•°æˆ–è€…è¿æ¥æ•° å¯æ‰©å±•æ€§ ç®€å•åœ°è¯´ï¼Œå¯æ‰©å±•æ€§æŒ‡çš„æ˜¯ï¼Œç»™ç³»ç»Ÿå¢åŠ ä¸€å€çš„å·¥ä½œï¼Œåœ¨ç†æƒ³æƒ…å†µä¸‹å°±èƒ½è·å¾—ä¸¤å€çš„ç»“æœï¼ˆå³ååé‡å¢åŠ ä¸€å€)ã€‚æˆ–è€…è¯´ï¼Œç»™ç³»ç»Ÿå¢åŠ ä¸€å€çš„èµ„æºï¼ˆæ¯”å¦‚ä¸¤å€çš„CPU æ•°)ï¼Œå°±å¯ä»¥è·å¾—ä¸¤å€çš„ååé‡ã€‚ åŸºå‡†æµ‹è¯•çš„æ­¥éª¤å†³å®šæ˜¯é‡‡ç”¨æ ‡å‡†çš„åŸºå‡†æµ‹è¯•ï¼Œè¿˜æ˜¯è®¾è®¡ä¸“ç”¨çš„æµ‹è¯• å‡†å¤‡åŸºå‡†æµ‹è¯•åŠæ•°æ®æ”¶é›†è„šæœ¬ è¿è¡ŒåŸºå‡†æµ‹è¯• ä¿å­˜åŠåˆ†æåŸºå‡†æµ‹è¯•ç»“æœ ä¿¡æ¯æ”¶é›†è„šæœ¬ - CPUä½¿ç”¨ç‡ã€IOã€ç½‘ç»œæµé‡ã€çŠ¶æ€ä¸è®¡æ•°å™¨ä¿¡æ¯ç­‰12345678910111213141516171819202122#!/bin/bashINTERVAL=5PREFIX=/home/imooc/benchmarks/$INTERVAL-sec-statusRUNFILE=/home/imooc/benchmarks/runningecho &quot;1&quot; &gt; $RUNFILEMYSQL=/usr/local/mysql/bin/mysql$MYSQL -e &quot;show global variables&quot; &gt;&gt; mysql-variableswhile test -e $RUNFILE; do file=$(date +%F_%I) sleep=$(date +%s.%N | awk &#x27;&#123;print 5 - ($1 % 5)&#125;&#x27;) sleep $sleep ts=&quot;$(date +&quot;TS %s.%N %F %T&quot;)&quot; loadavg=&quot;$(uptime)&quot; echo &quot;$ts $loadavg&quot; &gt;&gt; $PREFIX-$&#123;file&#125;-status $MYSQL -e &quot;show global status&quot; &gt;&gt; $PREFIX-$&#123;file&#125;-status &amp; echo &quot;$ts $loadavg&quot; &gt;&gt; $PREFIX-$&#123;file&#125;-innodbstatus $MYSQL -e &quot;show engine innodb status&quot; &gt;&gt; $PREFIX-$&#123;file&#125;-innodbstatus &amp; echo &quot;$ts $loadavg&quot; &gt;&gt; $PREFIX-$&#123;file&#125;-processlist $MYSQL -e &quot;show full processlist\\G&quot; &gt;&gt; $PREFIX-$&#123;file&#125;-processlist &amp; echo $tsdoneecho Exiting because $RUNFILE does not exists åˆ†æè„šæœ¬123456789101112131415161718#!/bin/bashawk &#x27; BEGIN &#123; printf &quot;#ts date time load QPS&quot;; fmt=&quot; %.2f&quot;; &#125; /^TS/ &#123; ts = substr($2,1,index($2,&quot;.&quot;)-1); load = NF -2; diff = ts - prev_ts; printf &quot;\\n%s %s %s %s&quot;,ts,$3,$4,substr($load,1,length($load)-1); prev_ts=ts; &#125; /Queries/&#123; printf fmt,($2-Queries)/diff; Queries=$2 &#125; &#x27; &quot;$@&quot; åŸºå‡†æµ‹è¯•æ–¹æ³•é¿å…ä»¥ä¸‹å¸¸è§çš„é”™è¯¯ ä½¿ç”¨çœŸå®æ•°æ®çš„å­é›†è€Œä¸æ˜¯å…¨é›†ã€‚ä¾‹å¦‚åº”ç”¨éœ€è¦å¤„ç†å‡ ç™¾GBçš„æ•°æ®ï¼Œä½†æµ‹è¯•åªæœ‰1GBæ•°æ®ï¹”æˆ–è€…åªä½¿ç”¨å½“å‰æ•°æ®è¿›è¡Œæµ‹è¯•ï¼Œå´å¸Œæœ›æ¨¡æ‹Ÿæœªæ¥ä¸šåŠ¡å¤§å¹…åº¦å¢é•¿åçš„æƒ…å†µã€‚ ä½¿ç”¨é”™è¯¯çš„æ•°æ®åˆ†å¸ƒã€‚ä¾‹å¦‚ä½¿ç”¨å‡åŒ€åˆ†å¸ƒçš„æ•°æ®æµ‹è¯•ï¼Œè€Œç³»ç»Ÿçš„çœŸå®æ•°æ®æœ‰å¾ˆå¤šçƒ­ç‚¹åŒºåŸŸï¼ˆéšæœºç”Ÿæˆçš„æµ‹è¯•æ•°æ®é€šå¸¸æ— æ³•æ¨¡æ‹ŸçœŸå®çš„æ•°æ®åˆ†å¸ƒ)ã€‚ ä½¿ç”¨ä¸çœŸå®çš„åˆ†å¸ƒå‚æ•°ï¼Œä¾‹å¦‚å‡å®šæ‰€æœ‰ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ï¼ˆprofileï¼‰éƒ½ä¼šè¢«å¹³å‡åœ°è¯»å–åœ¨å¤šç”¨æˆ·åœºæ™¯ä¸­ï¼Œåªåšå•ç”¨æˆ·çš„æµ‹è¯•ã€‚åœ¨å•æœåŠ¡å™¨ä¸Šæµ‹è¯•åˆ†å¸ƒå¼åº”ç”¨ã€‚ ä¸çœŸå®ç”¨æˆ·è¡Œä¸ºä¸åŒ¹é…ã€‚ä¾‹å¦‚Webé¡µé¢ä¸­çš„â€œæ€è€ƒæ—¶é—´â€ã€‚çœŸå®ç”¨æˆ·åœ¨è¯·æ±‚åˆ°ä¸€ä¸ªé¡µé¢åä¼šé˜…è¯»ä¸€æ®µæ—¶é—´ï¼Œè€Œä¸æ˜¯ä¸åœé¡¿åœ°ä¸€ä¸ªæ¥ä¸€ä¸ªç‚¹å‡»ç›¸å…³é“¾æ¥ã€‚ åå¤æ‰§è¡ŒåŒä¸€ä¸ªæŸ¥è¯¢ã€‚çœŸå®çš„æŸ¥è¯¢æ˜¯ä¸å°½ç›¸åŒçš„ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ç¼“å­˜å‘½ä¸­ç‡é™ä½ã€‚è€Œåå¤æ‰§è¡ŒåŒä¸€ä¸ªæŸ¥è¯¢åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œä¼šå…¨éƒ¨æˆ–è€…éƒ¨åˆ†ç¼“å­˜ç»“æœã€‚ æ²¡æœ‰æ£€æŸ¥é”™è¯¯ã€‚å¦‚æœæµ‹è¯•çš„ç»“æœæ— æ³•å¾—åˆ°åˆç†çš„è§£é‡Šï¼Œæ¯”å¦‚ä¸€ä¸ªæœ¬åº”è¯¥å¾ˆæ…¢çš„æŸ¥è¯¢çªç„¶å˜å¿«äº†ï¼Œå°±åº”è¯¥æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯äº§ç”Ÿã€‚å¦åˆ™å¯èƒ½åªæ˜¯æµ‹è¯•äº†MySQLæ£€æµ‹è¯­æ³•é”™è¯¯çš„é€Ÿåº¦äº†ã€‚åŸºå‡†æµ‹è¯•å®Œæˆåï¼Œä¸€å®šè¦æ£€æŸ¥ä¸€ä¸‹é”™è¯¯æ—¥å¿—ï¼Œè¿™åº”å½“æ˜¯åŸºæœ¬çš„è¦æ±‚ã€‚ å¿½ç•¥äº†ç³»ç»Ÿé¢„çƒ­(warm up)çš„è¿‡ç¨‹ã€‚ä¾‹å¦‚ç³»ç»Ÿé‡å¯åé©¬ä¸Šè¿›è¡Œæµ‹è¯•ã€‚æœ‰æ—¶å€™éœ€è¦äº†è§£ç³»ç»Ÿé‡å¯åéœ€è¦å¤šé•¿æ—¶é—´æ‰èƒ½è¾¾åˆ°æ­£å¸¸çš„æ€§èƒ½å®¹é‡ï¼Œè¦ç‰¹åˆ«ç•™æ„é¢„çƒ­çš„æ—¶é•¿ã€‚åè¿‡æ¥è¯´ï¼Œå¦‚æœè¦æƒ³åˆ†ææ­£å¸¸çš„æ€§èƒ½ï¼Œéœ€è¦æ³¨æ„ï¼Œè‹¥åŸºå‡†æµ‹è¯•åœ¨é‡å¯ä»¥åé©¬ä¸Šå¯åŠ¨,åˆ™ç¼“å­˜æ˜¯å†·çš„ã€è¿˜æ²¡æœ‰æ•°æ®ï¼Œè¿™æ—¶å³ä½¿æµ‹è¯•çš„å‹åŠ›ç›¸åŒï¼Œå¾—åˆ°çš„ç»“æœä¹Ÿå’Œç¼“å­˜å·²ç»è£…æ»¡æ•°æ®æ—¶æ˜¯ä¸åŒçš„ã€‚ ä½¿ç”¨é»˜è®¤çš„æœåŠ¡å™¨é…ç½®ã€‚ æµ‹è¯•æ—¶é—´å¤ªçŸ­ã€‚åŸºå‡†æµ‹è¯•éœ€è¦æŒç»­ä¸€å®šçš„æ—¶é—´ã€‚åé¢ä¼šç»§ç»­è®¨è®ºè¿™ä¸ªè¯é¢˜ã€‚ MySQLåŸºå‡†æµ‹è¯•å·¥å…·ä¹‹mysqlslapå¸¸ç”¨å‚æ•°è¯´æ˜â€“auto-generate-sql ç”±ç³»ç»Ÿè‡ªåŠ¨ç”ŸæˆSQLè„šæœ¬è¿›è¡Œæµ‹è¯• â€“auto-generate-sql-add-autoincrement åœ¨ç”Ÿæˆçš„è¡¨ä¸­å¢åŠ è‡ªå¢ID â€“auto-generate-sql-load-type æŒ‡å®šæµ‹è¯•ä¸­ä½¿ç”¨çš„æŸ¥è¯¢ç±»å‹ â€“auto-generate-sql-write-number æŒ‡å®šåˆå§‹åŒ–æ•°æ®æ—¶ç”Ÿæˆçš„æ•°æ®é‡ â€“concurrency æŒ‡å®šå¹¶å‘çº¿ç¨‹çš„æ•°é‡ â€“engineæŒ‡å®šè¦æµ‹è¯•è¡¨çš„å­˜å‚¨å¼•æ“ï¼Œå¯ä»¥ç”¨é€—å·åˆ†å‰²å¤šä¸ªå­˜å‚¨å¼•æ“ â€“no-drop æŒ‡å®šä¸æ¸…ç†æµ‹è¯•æ•°æ® â€“iterations æŒ‡å®šæµ‹è¯•è¿è¡Œçš„æ¬¡æ•° â€“number-of-queries æŒ‡å®šæ¯ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œçš„æŸ¥è¯¢æ•°é‡ â€“debug-info æŒ‡å®šè¾“å‡ºé¢å¤–çš„å†…å­˜åŠCPUç»Ÿè®¡ä¿¡æ¯ â€“number-int-colsæŒ‡å®šæµ‹è¯•è¡¨ä¸­åŒ…å«çš„INTç±»å‹åˆ—çš„æ•°é‡ â€“number-char-cols æŒ‡å®šæµ‹è¯•è¡¨ä¸­åŒ…å«çš„varcharç±»å‹çš„æ•°é‡ â€“create-schema æŒ‡å®šäº†ç”¨äºæ‰§è¡Œæµ‹è¯•çš„æ•°æ®åº“çš„åå­— â€“query ç”¨äºæŒ‡å®šè‡ªå®šä¹‰SQLçš„è„šæœ¬ â€“only-print å¹¶ä¸è¿è¡Œæµ‹è¯•è„šæœ¬ï¼Œè€Œæ˜¯æŠŠç”Ÿæˆçš„è„šæœ¬æ‰“å°å‡ºæ¥ æ¡ˆä¾‹1mysqlslap -uroot -p --concurrency=1,50,100,200 --iterations=3 --number-int-cols=5 --number-char-cols=5 --auto-generate-sql --auto-generate-sql-add-autoincrement --engine=myisam,innodb --number-of-queries=10 --create-schema=sbtest ç»“æœ Benchmark Running for engine myisam Average number of seconds to run all queries: 0.015 seconds Minimum number of seconds to run all queries: 0.015 seconds Maximum number of seconds to run all queries: 0.016 seconds Number of clients running queries: 1 Average number of queries per client: 10 Benchmark Running for engine myisam Average number of seconds to run all queries: 0.557 seconds Minimum number of seconds to run all queries: 0.235 seconds Maximum number of seconds to run all queries: 1.203 seconds Number of clients running queries: 50 Average number of queries per client: 0 Benchmark Running for engine myisam Average number of seconds to run all queries: 0.437 seconds Minimum number of seconds to run all queries: 0.437 seconds Maximum number of seconds to run all queries: 0.438 seconds Number of clients running queries: 100 Average number of queries per client: 0 Benchmark Running for engine myisam Average number of seconds to run all queries: 0.875 seconds Minimum number of seconds to run all queries: 0.859 seconds Maximum number of seconds to run all queries: 0.891 seconds Number of clients running queries: 200 Average number of queries per client: 0 Benchmark Running for engine innodb Average number of seconds to run all queries: 0.016 seconds Minimum number of seconds to run all queries: 0.016 seconds Maximum number of seconds to run all queries: 0.016 seconds Number of clients running queries: 1 Average number of queries per client: 10 Benchmark Running for engine innodb Average number of seconds to run all queries: 0.104 seconds Minimum number of seconds to run all queries: 0.093 seconds Maximum number of seconds to run all queries: 0.110 seconds Number of clients running queries: 50 Average number of queries per client: 0 Benchmark Running for engine innodb Average number of seconds to run all queries: 0.198 seconds Minimum number of seconds to run all queries: 0.188 seconds Maximum number of seconds to run all queries: 0.203 seconds Number of clients running queries: 100 Average number of queries per client: 0 Benchmark Running for engine innodb Average number of seconds to run all queries: 1.036 seconds Minimum number of seconds to run all queries: 0.375 seconds Maximum number of seconds to run all queries: 1.375 seconds Number of clients running queries: 200 Average number of queries per client: 0 MySQLåŸºå‡†æµ‹è¯•å·¥ä½œä¹‹ sysbenchå¸¸ç”¨å‚æ•° â€“test ç”¨äºæŒ‡å®šæ‰€è¦æ‰§è¡Œçš„æµ‹è¯•ç±»å‹ï¼Œæ”¯æŒä»¥ä¸‹å‚æ•° Fileioæ–‡ä»¶ç³»ç»ŸI/Oæ€§èƒ½æµ‹è¯• cpu cpuæ€§èƒ½æµ‹è¯• memory å†…å­˜æ€§èƒ½æµ‹è¯• Oltp æµ‹è¯•è¦æŒ‡å®šå…·ä½“çš„luaè„šæœ¬ â€“myql-db ç”¨äºæŒ‡å®šæ‰§è¡ŒåŸºå‡†æµ‹è¯•çš„æ•°æ®åº“å â€“mysql-table-engine ç”¨äºæŒ‡å®šæ‰€ä½¿ç”¨çš„å­˜å‚¨å¼•æ“ â€“oltp-tables-count æ‰§è¡Œæµ‹è¯•çš„è¡¨çš„æ•°é‡ â€“oltp-table-size æŒ‡å®šæ¯ä¸ªè¡¨ä¸­çš„æ•°æ®è¡Œæ•° â€“num-threads æŒ‡å®šæµ‹è¯•çš„å¹¶å‘çº¿ç¨‹æ•°é‡ â€“max-time æŒ‡å®šæœ€å¤§çš„æµ‹è¯•æ—¶é—´ â€“report-interval æŒ‡å®šé—´éš”å¤šé•¿æ—¶é—´è¾“å‡ºä¸€æ¬¡ç»Ÿè®¡ä¿¡æ¯ â€“mysql-user æŒ‡å®šæ‰§è¡Œæµ‹è¯•çš„MySQLç”¨æˆ· â€“mysql-password æŒ‡å®šæ‰§è¡Œæµ‹è¯•çš„MySQLç”¨æˆ·çš„å¯†ç  prepare ç”¨äºå‡†å¤‡æµ‹è¯•æ•°æ® run ç”¨äºå®é™…è¿›è¡Œæµ‹è¯• cleanup ç”¨äºæ¸…ç†æµ‹è¯•æ•°æ® æ•°æ®åº“ç»“æ„ä¼˜åŒ–è‰¯å¥½çš„æ•°æ®åº“é€»è¾‘è®¾è®¡å’Œç‰©ç†è®¾è®¡æ˜¯æ•°æ®åº“è·å¾—é«˜æ€§èƒ½çš„åŸºç¡€ æ•°æ®åº“ç»“æ„ä¼˜åŒ–çš„ç›®çš„ å‡å°‘æ•°æ®å†—ä½™ å°½é‡é¿å…æ•°æ®ç»´æŠ¤ä¸­å‡ºç°æ›´æ–°ï¼Œæ’å…¥å’Œåˆ é™¤å¼‚å¸¸ æ’å…¥å¼‚å¸¸âˆ¶å¦‚æœè¡¨ä¸­çš„æŸä¸ªå®ä½“éšç€å¦ä¸€ä¸ªå®ä½“è€Œå­˜åœ¨ æ›´æ–°å¼‚å¸¸âˆ¶å¦‚æœæ›´æ”¹è¡¨ä¸­çš„æŸä¸ªå®ä½“çš„å•ç‹¬å±æ€§æ—¶ï¼Œéœ€è¦å¯¹å¤šè¡Œè¿›è¡Œæ›´æ–° åˆ é™¤å¼‚å¸¸:å¦‚æœåˆ é™¤è¡¨ä¸­çš„æŸä¸€å®ä½“åˆ™ä¼šå¯¼è‡´å…¶ä»–å®ä½“çš„æ¶ˆå¤± èŠ‚çº¦æ•°æ®å­˜å‚¨ç©ºé—´ æé«˜æŸ¥è¯¢æ•ˆç‡ æ•°æ®åº“ç»“æ„è®¾è®¡çš„æ­¥éª¤éœ€æ±‚åˆ†æï¼š å…¨é¢äº†è§£äº§å“è®¾è®¡çš„å­˜å‚¨éœ€æ±‚ å­˜å‚¨éœ€æ±‚ æ•°æ®å¤„ç†éœ€æ±‚ æ•°æ®çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§ é€»è¾‘è®¾è®¡ï¼š è®¾è®¡æ•°æ®çš„é€»è¾‘å­˜å‚¨ç»“æ„ æ•°æ®å®ä½“ä¹‹é—´çš„é€»è¾‘å…³ç³»ï¼Œè§£å†³æ•°æ®å†—ä½™å’Œæ•°æ®ç»´æŠ¤å¼‚å¸¸ ç‰©ç†è®¾è®¡ï¼šè·Ÿæ‰€ä½¿ç”¨çš„æ•°æ®åº“ç‰¹ç‚¹è¿›è¡Œè¡¨ç»“æ„è®¾è®¡ å…³ç³»å‹æ•°æ®åº“: Oralce,SQLServer,MysqL,postgressQL éå…³ç³»å‹æ•°æ®åº“:mongo,Redis,Hadoop å­˜å‚¨å¼•æ“ï¼šInnodb ç»´æŠ¤ä¼˜åŒ–æ ¹æ®å®é™…æƒ…å†µå¯¹ç´¢å¼•ã€å­˜å‚¨ç»“æ„ç­‰è¿›è¡Œä¼˜åŒ– æ•°æ®åº“è®¾è®¡èŒƒå¼èŒƒå¼å’ŒåèŒƒå¼ï¼ˆæ•°æ®çš„è¡¨ç¤ºæ–¹æ³•ï¼‰ä»å®Œå…¨çš„èŒƒå¼åŒ–åˆ°å®Œå…¨çš„åèŒƒå¼åŒ–ï¼Œä»¥åŠä¸¤è€…çš„æŠ˜ä¸­ã€‚ åœ¨èŒƒå¼åŒ–çš„æ•°æ®åº“ä¸­ï¼Œæ¯ä¸ªäº‹å®æ•°æ®ä¼šå‡ºç°å¹¶ä¸”åªå‡ºç°ä¸€æ¬¡ã€‚ç›¸åï¼Œåœ¨åèŒƒå¼åŒ–çš„æ•°æ®åº“ä¸­ï¼Œä¿¡æ¯æ˜¯å†—ä½™çš„ï¼Œå¯èƒ½ä¼šå­˜å‚¨åœ¨å¤šä¸ªåœ°æ–¹ã€‚ ä»å®Œå…¨çš„èŒƒå¼åŒ–åˆ°å®Œå…¨çš„åèŒƒå¼åŒ–ï¼Œä»¥åŠä¸¤è€…çš„æŠ˜ä¸­.åœ¨èŒƒå¼åŒ–çš„æ•°æ®åº“ä¸­ï¼Œæ¯ä¸ªäº‹å®æ•°æ®ä¼šå‡ºç°å¹¶ä¸”åªå‡ºç°ä¸€æ¬¡.ç›¸åï¼Œåœ¨åèŒƒå¼åŒ–çš„æ•°æ®åº“ä¸­ï¼Œä¿¡æ¯æ˜¯å†—ä½™çš„ï¼Œå¯èƒ½ä¼šå­˜å‚¨åœ¨å¤šä¸ªåœ°æ–¹. å‚è€ƒåœ°å€ï¼šhttps://www.jianshu.com/p/bd1f6a712d41 https://blog.csdn.net/u013585204/article/details/108854457 éœ€æ±‚åˆ†æåŠé€»è¾‘è®¾è®¡ - èŒƒå¼åŒ–ç”¨æˆ·ç™»å½•åŠç”¨æˆ·ç®¡ç†åŠŸèƒ½ ç”¨æˆ·å¿…é¡»æ³¨å†Œå¹¶ç™»é™†ç³»ç»Ÿæ‰èƒ½è¿›è¡Œç½‘ä¸Šäº¤æ˜“ åŒä¸€æ—¶é—´ä¸€ä¸ªç”¨æˆ·åªèƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ç™»é™† ç”¨æˆ·ä¿¡æ¯âˆ¶{ç”¨æˆ·å,å¯†ç ,æ‰‹æœºå·,å§“å,æ³¨å†Œæ—¥æœŸ,åœ¨çº¿çŠ¶æ€,å‡ºç”Ÿæ—¥æœŸ} åªæœ‰ä¸€ä¸ªä¸šåŠ¡ä¸»é”®,ä¸€å®šæ˜¯ç¬¦åˆç¬¬äºŒèŒƒå¼ æ²¡æœ‰å±æ€§å’Œä¸šåŠ¡ä¸»é”®å­˜åœ¨ä¼ é€’ä¾èµ–çš„å…³ç³»,ç¬¦åˆç¬¬ä¸‰èŒƒå¼ å•†å“å±•ç¤ºåŠå•†å“ç®¡ç†åŠŸèƒ½ éœ€æ±‚åˆ†æåŠé€»è¾‘è®¾è®¡ - åèŒƒå¼åŒ– èŒƒå¼çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ èŒƒå¼åŒ–çš„æ›´æ–°æ“ä½œé€šå¸¸æ¯”åèŒƒå¼åŒ–è¦å¿«ã€‚ å½“æ•°æ®è¾ƒå¥½åœ°èŒƒå¼åŒ–æ—¶,å°±åªæœ‰å¾ˆå°‘æˆ–è€…æ²¡æœ‰é‡å¤æ•°æ®ï¼Œæ‰€ä»¥åªéœ€è¦ä¿®æ”¹æ›´å°‘çš„æ•°æ®ã€‚ï¼ˆå¯ä»¥å°½é‡çš„å‡å°‘æ•°æ®å†—ä½™ï¼‰ èŒƒå¼åŒ–çš„è¡¨é€šå¸¸æ›´å°ï¼Œå¯ä»¥æ›´å¥½åœ°æ”¾åœ¨å†…å­˜é‡Œï¼Œæ‰€ä»¥æ‰§è¡Œæ“ä½œä¼šæ›´å¿«ã€‚ å¾ˆå°‘æœ‰å¤šä½™çš„æ•°æ®æ„å‘³ç€æ£€ç´¢åˆ—è¡¨æ•°æ®æ—¶æ›´å°‘éœ€è¦DISTINCTæˆ–è€…GROUP BYè¯­å¥ã€‚è¿˜æ˜¯å‰é¢çš„ä¾‹å­:åœ¨éèŒƒå¼åŒ–çš„ç»“æ„ä¸­å¿…é¡»ä½¿ç”¨DISTINCTæˆ–è€…GROUP BYæ‰èƒ½è·å¾—ä¸€ä»½å”¯ä¸€çš„éƒ¨é—¨åˆ—è¡¨ï¼Œä½†æ˜¯å¦‚æœéƒ¨é—¨ï¼ˆDEPARTMENT)æ˜¯ä¸€å¼ å•ç‹¬çš„è¡¨ï¼Œåˆ™åªéœ€è¦ç®€å•çš„æŸ¥è¯¢è¿™å¼ è¡¨å°±è¡Œäº†ã€‚ èŒƒå¼åŒ–è®¾è®¡çš„schemaçš„ç¼ºç‚¹æ˜¯é€šå¸¸éœ€è¦å…³è”ã€‚ç¨å¾®å¤æ‚ä¸€äº›çš„æŸ¥è¯¢è¯­å¥åœ¨ç¬¦åˆèŒƒå¼çš„ schemaä¸Šéƒ½å¯èƒ½éœ€è¦è‡³å°‘ä¸€æ¬¡å…³è”ï¼Œä¹Ÿè®¸æ›´å¤šã€‚è¿™ä¸ä½†ä»£ä»·æ˜‚è´µï¼Œä¹Ÿå¯èƒ½ä½¿ä¸€äº›ç´¢å¼•ç­– ç•¥æ— æ•ˆã€‚ä¾‹å¦‚ï¼ŒèŒƒå¼åŒ–å¯èƒ½å°†åˆ—å­˜æ”¾åœ¨ä¸åŒçš„è¡¨ä¸­ï¼Œè€Œè¿™äº›åˆ—å¦‚æœåœ¨ä¸€ä¸ªè¡¨ä¸­æœ¬å¯ä»¥å±äº åŒä¸€ä¸ªç´¢å¼•ã€‚ åèŒƒå¼çš„ä¼˜ç‚¹å’Œç¼ºç‚¹åèŒƒå¼åŒ–çš„schemaå› ä¸ºæ‰€æœ‰æ•°æ®éƒ½åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œå¯ä»¥å¾ˆå¥½åœ°é¿å…å…³è”ã€‚ å¦‚æœä¸éœ€è¦å…³è”è¡¨ï¼Œåˆ™å¯¹å¤§éƒ¨åˆ†æŸ¥è¯¢æœ€å·®çš„æƒ…å†µâ€”â€”å³ä½¿è¡¨æ²¡æœ‰ä½¿ç”¨ç´¢å¼•â€”â€”æ˜¯å…¨è¡¨æ‰« æã€‚å½“æ•°æ®æ¯”å†…å­˜å¤§æ—¶è¿™å¯èƒ½æ¯”å…³è”è¦å¿«å¾—å¤šï¼Œå› ä¸ºè¿™æ ·é¿å…äº†éšæœºI/Oã€‚ æ··ç”¨èŒƒå¼åŒ–å’ŒåèŒƒå¼åŒ–å®Œå…¨çš„èŒƒå¼åŒ–å’Œå®Œå…¨çš„åèŒƒå¼schemaéƒ½æ˜¯å®éªŒå®¤æ‰æœ‰çš„ä¸œè¥¿ çœŸå®çš„ä¸–ç•Œä¸­å¾ˆå°‘ä¼šè¿™ä¹ˆæç«¯åœ°çš„ä½¿ç”¨ï¼Œå®é™…åº”ç”¨ä¸­ç»å¸¸éœ€è¦æ··ç”¨ã€‚å¯èƒ½ä½¿ç”¨éƒ¨åˆ†èŒƒå¼åŒ–çš„schemaã€ç¼“å­˜è¡¨ã€ä»¥åŠå…¶ä»–æŠ€å·§ã€‚ ç¼“å­˜è¡¨å’Œæ±‡æ€»è¡¨æœ‰æ—¶æå‡æ€§èƒ½æœ€å¥½çš„æ–¹æ³•æ˜¯åœ¨åŒä¸€å¼ è¡¨ä¸­ä¿å­˜è¡ç”Ÿçš„å†—ä½™æ•°æ®ã€‚ç„¶è€Œï¼Œæœ‰æ—¶ä¹Ÿéœ€è¦åˆ›å»ºä¸€ å¼ å®Œå…¨ç‹¬ç«‹çš„æ±‡æ€»è¡¨æˆ–ç¼“å­˜è¡¨ï¼ˆç‰¹åˆ«æ˜¯ä¸ºæ»¡è¶³æ£€ç´¢çš„éœ€æ±‚æ—¶)ã€‚å¦‚æœèƒ½å®¹è®¸å°‘é‡çš„è„æ•° æ®ï¼Œè¿™æ˜¯éå¸¸å¥½çš„æ–¹æ³•ï¼Œä½†æ˜¯æœ‰æ—¶ç¡®å®æ²¡æœ‰é€‰æ‹©çš„ä½™åœ°ï¼ˆä¾‹å¦‚ï¼Œéœ€è¦é¿å…å¤æ‚ã€æ˜‚è´µçš„å® æ—¶æ›´æ–°æ“ä½œ)ã€‚ ç¼“å­˜è¡¨ç”¨æ¥è¡¨ç¤ºå­˜å‚¨é‚£äº›å¯ä»¥æ¯”è¾ƒç®€å•åœ°ä»schemaå…¶ä»–è¡¨è·å–æ•°æ®çš„è¡¨ æ±‡æ€»è¡¨åˆ™ä¿å­˜ä½¿ç”¨GROUP BYè¯­å¥èšåˆæ•°æ®çš„è¡¨ ç‰©ç†è®¾è®¡å®šä¹‰æ•°æ®åº“ã€è¡¨åŠå­—æ®µçš„å‘½åè§„èŒƒ æ•°æ®åº“ã€è¡¨åŠå­—æ®µçš„å‘½åè¦éµå®ˆå¯è¯»æ€§åŸåˆ™ æ•°æ®åº“è¡¨åŠå­—æ®µçš„å‘½åè¦éµå®ˆè¡¨æ„æ€§åŸåˆ™ æ•°æ®åº“è¡¨åŠå­—æ®µçš„å‘½åè¦éµå®ˆé•¿ååŸåˆ™ é€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“ ä¸ºè¡¨ä¸­çš„å­—æ®µé€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹å½“ä¸€ä¸ªåˆ—å¯ä»¥é€‰æ‹©å¤šç§æ•°æ®ç±»å‹æ—¶ï¼Œ åº”è¯¥ä¼˜å…ˆè€ƒè™‘æ•°å­—ç±»å‹ï¼Œ å…¶æ¬¡æ˜¯æ—¥æœŸæˆ–äºŒè¿›åˆ¶ç±»å‹ï¼Œ æœ€åæ˜¯å­—ç¬¦ç±»å‹ã€‚ å¯¹äºç›¸åŒçº§åˆ«çš„æ•°æ®ç±»å‹ï¼Œåº”è¯¥ä¼˜å…ˆé€‰æ‹©å ç”¨ç©ºé—´å°çš„æ•°æ®ç±»å‹ å¦‚ä½•é€‰æ‹©æ­£ç¡®çš„æ•´æ•°ç±»å‹ å¦‚ä½•é€‰æ‹©æ­£ç¡®çš„å®æ•°ç±»å‹ å¦‚ä½•é€‰æ‹©VARCHARVARCHARç±»å‹çš„å­˜å‚¨ç‰¹ç‚¹ varcharç”¨äºå­˜å‚¨å˜é•¿å­—ç¬¦ä¸²ï¼Œåªå ç”¨å¿…è¦çš„å­˜å‚¨ç©ºé—´åˆ—çš„ æœ€å¤§é•¿åº¦å°äº255åˆ™åªå ç”¨ä¸€ä¸ªé¢å¤–å­—èŠ‚ç”¨äºè®°å½•å­—ç¬¦ä¸²é•¿åº¦ åˆ—çš„æœ€å¤§é•¿åº¦å¤§äº255åˆ™è¦å ç”¨ä¸¤ä¸ªé¢å¤–å­—èŠ‚ç”¨äºè®°å½•å­—ç¬¦ä¸²é•¿åº¦ VARCHARé•¿åº¦çš„é€‰æ‹©é—®é¢˜ ä½¿ç”¨æœ€å°çš„ç¬¦åˆéœ€æ±‚çš„é•¿åº¦ varchar(5)å’Œvarchar(200)å­˜å‚¨â€™MySQLâ€™å­—ç¬¦ä¸²æ€§èƒ½ä¸åŒ VARCHARçš„é€‚ç”¨åœºæ™¯ å­—ç¬¦ä¸²åˆ—çš„æœ€å¤§é•¿åº¦æ¯”å¹³å‡é•¿åº¦å¤§å¾ˆå¤šå­—ç¬¦ä¸²åˆ—å¾ˆå°‘è¢«æ›´æ–° ä½¿ç”¨äº†å¤šå­—èŠ‚å­—ç¬¦é›†å­˜å‚¨å­—ç¬¦ä¸² å¦‚ä½•é€‰æ‹©CHARç±»å‹CHARç±»å‹çš„å­˜å‚¨ç‰¹ç‚¹ CHARç±»å‹æ˜¯å®šé•¿çš„ å­—ç¬¦ä¸²å­˜å‚¨åœ¨CHARç±»å‹çš„åˆ—ä¸­ä¼šåˆ é™¤æœ«å°¾çš„ç©ºæ ¼ CHARç±»å‹çš„æœ€å¤§å®½åº¦ä¸º255 CHARç±»å‹çš„é€‚ç”¨åœºæ™¯ CHARç±»å‹é€‚åˆå­˜å‚¨æ‰€é•¿åº¦è¿‘ä¼¼çš„å€¼ï¼ˆMD5ã€èº«ä»½è¯ã€æ‰‹æœºå·ï¼‰ CHARç±»å‹é€‚åˆå­˜å‚¨çŸ­å­—ç¬¦ä¸² CHARç±»å‹é€‚åˆå­˜å‚¨ç»å¸¸æ›´æ–°çš„å­—ç¬¦ä¸²åˆ— å¦‚ä½•é€‰æ‹©å­˜å‚¨æ—¥æœŸæ•°æ®DATETIMEç±»å‹â€‹ ä»¥YYYY-MM-DD HH:MM:SS[.fraction]æ ¼å¼å­˜å‚¨æ—¥æœŸæ—¶é—´ â€‹ datetime = YYYY-MM-DD HH:MM:SS â€‹ datetime(6) = YYYY-MM-DD HH:MM:SS.fraction â€‹ DATATIMEç±»å‹ä¸æ—¶åŒºæ— å…³ï¼Œå ç”¨8ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´ â€‹ æ—¶é—´èŒƒå›´1000-01-01 00:00:00åˆ°9999-12-31 23:59:59 TIMESTAMPç±»å‹â€‹ å­˜å‚¨äº†ç”±æ ¼æ—å°¼æ²»æ—¶é—´1970å¹´1æœˆ1æ—¥åˆ°å½“å‰æ—¶é—´çš„ç§’æ•° â€‹ ä»¥YYYY-MM-DD HH:MM:SS.[.fraction]çš„æ ¼å¼æ˜¾ç¤º,å ç”¨4ä¸ªå­—èŠ‚ â€‹ æ—¶é—´èŒƒå›´1970-01-01åˆ°2038-01-19 â€‹ timestampç±»å‹æ˜¾ç¤ºä¾èµ–äºæ‰€æŒ‡å®šçš„æ—¶åŒº â€‹ åœ¨è¡Œçš„æ•°æ®ä¿®æ”¹æ—¶å¯ä»¥è‡ªåŠ¨ä¿®æ”¹timestampåˆ—çš„å€¼ DATEç±»å‹å’Œtimeç±»å‹dateç±»å‹çš„ä¼˜ç‚¹ï¼š â€‹ å ç”¨çš„å­—èŠ‚æ•°æ¯”ä½¿ç”¨å­—ç¬¦ä¸²ã€datetimeã€intå­˜å‚¨è¦å°‘ï¼Œä½¿ç”¨dateç±»å‹åªéœ€è¦3ä¸ªå­—èŠ‚ â€‹ dateç±»å‹ç”¨äºä¿å­˜1000-01-01åˆ°9999-12-31ä¹‹é—´çš„æ—¥æœŸ â€‹ timeç±»å‹ç”¨äºå­˜å‚¨æ—¶é—´æ•°æ®ï¼Œæ ¼å¼ä¸ºHH:MM:SS å­˜å‚¨æ—¥æœŸæ—¶é—´æ•°æ®çš„æ³¨æ„äº‹é¡¹ ä¸è¦ä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹æ¥å­˜å‚¨æ—¥æœŸæ—¶é—´æ•°æ® æ—¥æœŸæ—¶é—´ç±»å‹é€šå¸¸æ¯”å­—ç¬¦ä¸²å ç”¨çš„å­˜å‚¨ç©ºé—´å° æ—¥æœŸæ—¶é—´ç±»å‹åœ¨è¿›è¡ŒæŸ¥æ‰¾è¿‡æ»¤æ—¶å¯ä»¥åˆ©ç”¨æ—¥æœŸæ¥è¿›è¡Œå¯¹æ¯” æ—¥æœŸæ—¶é—´ç±»å‹è¿˜æœ‰ç€ä¸°å¯Œçš„å¤„ç†å‡½æ•°ï¼Œå¯ä»¥æ–¹ä¾¿çš„å¯¹æ—¶æœŸç±»å‹è¿›è¡Œæ—¥æœŸè®¡ç®— ä½¿ç”¨Intå­˜å‚¨æ—¥æœŸæ—¶é—´ä¸å¦‚ä½¿ç”¨Timestampç±»å‹ ç‰©ç†è®¾è®¡æ€»ç»“ å¦‚ä½•ä¸ºInnodbé€‰æ‹©ä¸»é”® ä¸»é”®åº”è¯¥å°½å¯èƒ½çš„å° ä¸»é”®åº”è¯¥æ˜¯é¡ºåºå¢é•¿çš„ Innodbçš„ä¸»é”®å’Œä¸šåŠ¡ä¸»é”®å¯ä»¥ä¸åŒ MySQLé«˜å¯ç”¨æ¶æ„è®¾è®¡MySQLå¤åˆ¶åŠŸèƒ½å¤åˆ¶è§£å†³äº†ä»€ä¹ˆé—®é¢˜ å®ç°åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šçš„æ•°æ®åˆ†å¸ƒåˆ©ç”¨äºŒè¿›åˆ¶æ—¥å¿—å¢é‡è¿›è¡Œ ä¸éœ€è¦å¤ªå¤šçš„å¸¦å®½ ä½†æ˜¯ä½¿ç”¨åŸºäºè¡Œçš„å¤åˆ¶åœ¨è¿›è¡Œå¤§æ‰¹é‡çš„æ›´æ”¹æ—¶ä¼šå¯¹å¸¦å®½å¸¦æ¥ä¸€å®šçš„å‹åŠ› ç‰¹åˆ«æ˜¯è·¨IDCç¯å¢ƒä¸‹è¿›è¡Œå¤åˆ¶åº”è¯¥åˆ†æ‰¹è¿›è¡Œ å®ç°åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šçš„æ•°æ®åˆ†å¸ƒå®ç°æ•°æ®è¯»å–çš„è´Ÿè½½å‡è¡¡ éœ€è¦å…¶å®ƒç»„ä»¶é…åˆå®Œæˆ åˆ©ç”¨DNSè½®è¯¢çš„æ–¹å¼æŠŠç¨‹åºçš„è¯»è¿æ¥åˆ°ä¸åŒçš„å¤‡ä»½æ•°æ®åº“ä½¿ç”¨LVS, haproxyè¿™æ ·çš„ä»£ç†æ–¹å¼ éå…±äº«æ¶æ„ï¼ŒåŒæ ·çš„æ•°æ®åˆ†å¸ƒåœ¨å¤šå°æœåŠ¡å™¨ä¸Š å¢å¼ºäº†æ•°æ®å®‰å…¨æ€§ åˆ©ç”¨å¤‡åº“çš„å¤‡ä»½æ¥å‡å°‘ä¸»åº“è´Ÿè½½ å®ç°æ•°æ®åº“é«˜å¯ç”¨å’Œæ•…éšœåˆ‡æ¢ å®ç°æ•°æ®åº“åœ¨çº¿å‡çº§ MySQLäºŒè¿›åˆ¶æ—¥å¿— è®°å½•äº†æ‰€æœ‰å¯¹MySQLæ•°æ®åº“çš„ä¿®æ”¹äº‹ä»¶ åŒ…æ‹¬å¢åˆ æ”¹æŸ¥äº‹ä»¶å’Œå¯¹è¡¨ç»“æ„çš„ä¿®æ”¹äº‹ä»¶ ä½¿ç”¨binlogå‘½ä»¤è¡Œå·¥å…·æŸ¥çœ‹ äºŒè¿›åˆ¶æ—¥å¿—çš„æ ¼å¼STATEMENTåŸºäºæ®µçš„æ ¼å¼binlog_format=STATEMENT ä¼˜ç‚¹ æ—¥å¿—è®°å½•é‡ç›¸å¯¹è¾ƒå°ï¼ŒèŠ‚çº¦ç£ç›˜åŠç½‘ç»œI/O åªå¯¹ä¸€æ¡è®°å½•ä¿®æ”¹æˆ–è€…æ’å…¥ rowæ ¼å¼æ‰€äº§ç”Ÿçš„æ—¥å¿—é‡å°äºæ®µäº§ç”Ÿçš„æ—¥å¿—é‡ ç¼ºç‚¹ å¿…é¡»è¦è®°å½•ä¸Šä¸‹æ–‡ä¿¡æ¯ ä¿è¯è¯­å¥åœ¨ä»æœåŠ¡å™¨ä¸Šæ‰§è¡Œç»“æœå’Œåœ¨ä¸»æœåŠ¡å™¨ä¸Šç›¸åŒ ç‰¹å®šå‡½æ•°å¦‚UUID),user) è¿™æ ·éç¡®å®šæ€§å‡½æ•°è¿˜æ˜¯æ— æ³•å¤åˆ¶ ROWåŸºäºè¡Œçš„æ—¥å¿—æ ¼å¼binlog_format=ROW åŒâ€”SQLè¯­å¥ä¿®æ”¹äº†10000æ¡æ•°æ®çš„æƒ…å†µä¸‹ åŸºäºæ®µçš„æ—¥å¿—æ ¼å¼åªä¼šè®°å½•è¿™ä¸ªSQLè¯­å¥ åŸºäºè¡Œçš„æ—¥å¿—ä¼šæœ‰10000æ¡è®°å½•åˆ†åˆ«è®°å½•æ¯ä¸€è¡Œçš„æ•°æ®ä¿®æ”¹ ä¼˜ç‚¹ ä½¿MySQLä¸»ä»å¤åˆ¶æ›´åŠ å®‰å…¨ å¯¹æ¯ä¸€è¡Œæ•°æ®çš„ä¿®æ”¹æ¯”åŸºäºæ®µçš„å¤åˆ¶é«˜æ•ˆ å¯ä»¥åˆ†æäºŒè¿›åˆ¶æ—¥å¿—æ¢å¤æ•°æ® ç¼ºç‚¹ è®°å½•æ—¥å¿—é‡è¾ƒå¤§. binlog_row_image =[FULL[MINIMAL|NOBLOB] MIXEDæ··åˆæ—¥å¿—æ ¼å¼binlog_format= MIXED ç‰¹ç‚¹ æ ¹æ®SQLè¯­å¥ç”±ç³»ç»Ÿå†³åœ¨åŸºäºæ®µå’ŒåŸºäºè¡Œçš„æ—¥å¿—æ ¼å¼ä¸­è¿›è¡Œé€‰æ‹© æ•°æ®é‡çš„å¤§å°ç”±æ‰€æ‰§è¡Œçš„SQLè¯­å¥å†³å®š å¦‚ä½•é€‰æ‹©äºŒè¿›åˆ¶æ—¥å¿—çš„æ ¼å¼å»ºè®®Binlog_format=mixed or Binlog_format=row Binlog_row_image=minimal MySQLäºŒè¿›åˆ¶æ—¥å¿—æ ¼å¼å¯¹å¤åˆ¶çš„å½±å“ä¸»åº“å¤åˆ¶æ¨¡å¼ åŸºäºSQLè¯­å¥çš„å¤åˆ¶ï¼ˆSBRï¼‰ä¼˜ç‚¹ ç”Ÿæˆçš„æ—¥å¿—é‡å°‘ï¼ŒèŠ‚çº¦ç½‘ç»œè½¬è¾“I/O å¹¶ä¸å¼ºåˆ¶è¦æ±‚ä¸»ä»æ•°æ®åº“çš„è¡¨å®šä¹‰å®Œå…¨ç›¸åŒ ç›¸æ¯”äºåŸºäºè¡Œçš„å¤åˆ¶æ–¹å¼æ›´ä¸ºçµæ´» ç¼ºç‚¹ å¯¹äºéç¡®å®šæ€§äº‹ä»¶ï¼Œæ— æ³•ä¿è¯ä¸»ä»å¤åˆ¶æ•°æ®çš„ä¸€è‡´æ€§ ï¼ˆGUIDï¼‰ å¯¹äºå­˜å‚¨è¿‡ç¨‹ï¼Œè§¦æ³•å™¨ï¼Œè‡ªå®šä¹‰å‡½æ•°è¿›è¡Œçš„ä¿®æ”¹ä¹Ÿå¯èƒ½é€ æˆæ•°æ®ä¸ä¸€è‡´ ç›¸æ¯”äºåŸºäºè¡Œçš„å¤åˆ¶æ–¹å¼åœ¨ä»ä¸Šæ‰§è¡Œæ—¶éœ€è¦æ›´å¤šçš„è¡Œé” åŸºäºè¡Œçš„å¤åˆ¶ï¼ˆRBRï¼‰ä¼˜ç‚¹ å¯ä»¥åº”ç”¨äºä»»ä½•SQLçš„å¤åˆ¶åŒ…æ‹¬éç¡®å®šå‡½æ•°ï¼Œå­˜å‚¨è¿‡ç¨‹ç­‰ å¯ä»¥å‡å°‘æ•°æ®åº“é”çš„ä½¿ç”¨ ç¼ºç‚¹ è¦æ±‚ä¸»ä»æ•°æ®åº“çš„è¡¨ç»“æ„ç›¸åŒï¼Œå¦åˆ™å¯èƒ½ä¼šä¸­æ–­å¤åˆ¶ æ— æ³•åœ¨ä»ä¸Šå•ç‹¬æ‰§è¡Œè§¦æ³•å™¨ MySQLå¤åˆ¶å·¥ä½œæ–¹å¼ ä¸»å°†å˜æ›´å†™å…¥äºŒè¿›åˆ¶æ—¥å¿— ä»è¯»å–ä¸»çš„äºŒè¿›åˆ¶æ—¥å¿—å˜æ›´å¹¶å†™å…¥åˆ°relay_logä¸­ åœ¨ä»ä¸Šé‡æ”¾relay_logä¸­çš„æ—¥å¿— åŸºäºSQLæ®µçš„æ—¥å¿—æ˜¯åœ¨ä»åº“ä¸Šé‡æ–°æ‰§è¡Œè®°å½•çš„SQL åŸºäºè¡Œçš„æ—¥å¿—åˆ™æ˜¯åœ¨ä»åº“ä¸Šç›´æ¥åº”ç”¨å¯¹æ•°æ®åº“è¡Œçš„ä¿®æ”¹ åŸºäºGTIDå¤åˆ¶çš„ä¼˜ç¼ºç‚¹MySQLå¤åˆ¶æ‹“æ‰‘ ä»€ä¹ˆæ˜¯é«˜å¯ç”¨é«˜å¯ç”¨æ€§H.A. ( High Availability )æŒ‡çš„æ˜¯é€šè¿‡å°½é‡ç¼©çŸ­å› æ—¥å¸¸ç»´æŠ¤æ“ä½œ(è®¡åˆ’)å’Œçªå‘çš„ç³»ç»Ÿå´©æºƒï¼ˆéè®¡åˆ’**)æ‰€å¯¼è‡´çš„åœæœºæ—¶é—´ï¼Œä»¥æé«˜ç³»ç»Ÿå’Œåº”ç”¨çš„å¯ç”¨æ€§ã€‚** å¯ç”¨æ€§è®¡ç®—ï¼š (365*24860 ) *(1-0.99999 ) =5.256 é¿å…å¯¼è‡´ç³»ç»Ÿä¸å¯ç”¨çš„å› ç´ ï¼Œå‡å°‘ç³»ç»Ÿä¸å¯ç”¨çš„æ—¶é—´ å»ºç«‹å®Œå–„çš„ç›‘æ§åŠæŠ¥è­¦ç³»ç»Ÿ å¯¹å¤‡ä»½æ•°æ®è¿›è¡Œæ¢å¤æµ‹è¯• æ­£ç¡®é…ç½®æ•°æ®åº“ç¯å¢ƒ å¯¹ä¸éœ€è¦çš„æ•°æ®è¿›è¡Œå½’æ¡£å’Œæ¸…ç† å¢åŠ ç³»ç»Ÿå†—ä½™ï¼Œä¿è¯å‘ç”Ÿç³»ç»Ÿä¸å¯ç”¨æ—¶å¯ä»¥å°½å¿«ä¿®å¤ é¿å…å­˜åœ¨å•ç‚¹æ•…éšœ ä¸»ä»åˆ‡æ¢åŠæ•…éšœè½¬ç§» å¦‚ä½•é¿å…MySQLå•ç‚¹æ•…éšœ MMMæ¶æ„æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–ç´¢å¼•ä¼˜åŒ–æ˜¯å¯¹æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–æœ€æœ‰æ•ˆçš„æ‰‹æ®µ MySQLä¸­ï¼Œå­˜å‚¨å¼•æ“ç°åœ¨ç´¢å¼•æ‰¾åˆ°å¯¹åº”å€¼ï¼Œç„¶åæ ¹æ®åŒ¹é…çš„ç´¢å¼•è®°å½•æ‰¾åˆ°å¯¹åº”çš„æ•°æ®è¡Œã€‚ 1SELECT first_name FROM sakila.actor WHERE actor_id &#x3D; 5; å¦‚æœåœ¨actor_idåˆ—ä¸Šå»ºæœ‰ç´¢å¼•ï¼Œåˆ™ MySQLå°†ä½¿ç”¨è¯¥ç´¢å¼•æ‰¾åˆ°actor_idä¸º5çš„è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒMySQLå…ˆåœ¨ç´¢å¼•ä¸ŠæŒ‰å€¼è¿›è¡ŒæŸ¥æ‰¾ï¼Œç„¶åè¿”å›æ‰€æœ‰åŒ…å«è¯¥å€¼çš„æ•°æ®è¡Œã€‚ ç´¢å¼•å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—çš„å€¼ã€‚å¦‚æœç´¢å¼•åŒ…å«å¤šä¸ªåˆ—ï¼Œé‚£ä¹ˆåˆ—çš„é¡ºåºä¹Ÿååˆ†é‡è¦ï¼Œå› ä¸ºMySQL åªèƒ½é«˜æ•ˆåœ°ä½¿ç”¨ç´¢å¼•çš„æœ€å·¦å‰ç¼€åˆ—ã€‚åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸¤ä¸ªåˆ—çš„ç´¢å¼•ï¼Œå’Œåˆ›å»ºä¸¤ä¸ªåªåŒ…å«ä¸€åˆ—çš„ç´¢å¼•æ˜¯å¤§ä¸ç›¸åŒçš„ã€‚ ä½¿ç”¨ORMä»ç„¶éœ€è¦å…³å¿ƒç´¢å¼• ç´¢å¼•çš„ç±»å‹B-Treeç´¢å¼•ä¸è¿‡åº•å±‚çš„å­˜å‚¨å¼•æ“å¯èƒ½ä½¿ç”¨ä¸åŒçš„å­˜å‚¨ç»“æ„ï¼Œä¾‹å¦‚ï¼ŒNDBé›†ç¾¤å­˜å‚¨å¼•æ“å†…éƒ¨å®é™…ä¸Šä½¿ç”¨äº†T-Treeç»“æ„å­˜å‚¨è¿™ç§ç´¢å¼•ï¼Œå³ä½¿å…¶åå­—æ˜¯BTREE ; InnoDBåˆ™ä½¿ç”¨çš„æ˜¯B+Treeã€‚ ç´¢å¼•å¯¹å¤šä¸ªå€¼è¿›è¡Œæ’åºçš„ä¾æ®æ˜¯CREATE TABLE è¯­å¥ä¸­å®šä¹‰ç´¢å¼•æ—¶åˆ—çš„é¡ºåº å¯ä»¥ä½¿ç”¨B-Treeç´¢å¼•çš„æŸ¥è¯¢ç±»å‹ã€‚B-Treeç´¢å¼•é€‚ç”¨äºå…¨é”®å€¼ã€é”®å€¼èŒƒå›´æˆ–é”®å‰ç¼€æŸ¥æ‰¾ã€‚å…¶ä¸­é”®å‰ç¼€æŸ¥æ‰¾åªé€‚ç”¨äºæ ¹æ®æœ€å·¦å‰ç¼€çš„æŸ¥æ‰¾ã€‚å‰é¢æ‰€è¿°çš„ç´¢å¼•å¯¹å¦‚ä¸‹ç±»å‹çš„æŸ¥è¯¢æœ‰æ•ˆã€‚ å…¨å€¼åŒ¹é…å…¨å€¼åŒ¹é…æŒ‡çš„æ˜¯å’Œç´¢å¼•ä¸­çš„æ‰€æœ‰åˆ—è¿›è¡Œ.åŒ¹é…ï¼Œä¾‹å¦‚å‰é¢æåˆ°çš„ç´¢å¼•å¯ç”¨äºæŸ¥æ‰¾å§“åä¸ºCuba Allenã€å‡ºç”Ÿäº1960-01-01çš„äººã€‚ åŒ¹é…æœ€å·¦å‰ç¼€å‰é¢æåˆ°çš„ç´¢å¼•å¯ç”¨äºæŸ¥æ‰¾æ‰€æœ‰å§“ä¸ºAllen çš„äººï¼Œå³åªä½¿ç”¨ç´¢å¼•çš„ç¬¬ä¸€åˆ—ã€‚ åŒ¹é…åˆ—å‰ç¼€ä¹Ÿå¯ä»¥åªåŒ¹é…æŸä¸€åˆ—çš„å€¼çš„å¼€å¤´éƒ¨åˆ†ã€‚ä¾‹å¦‚å‰é¢æåˆ°çš„ç´¢å¼•å¯ç”¨äºæŸ¥æ‰¾æ‰€æœ‰ä»¥Jå¼€å¤´çš„å§“çš„äººã€‚è¿™é‡Œä¹Ÿåªä½¿ç”¨äº†ç´¢å¼•çš„ç¬¬ä¸€åˆ—ã€‚ åŒ¹é…èŒƒå›´å€¼ä¾‹å¦‚å‰é¢æåˆ°çš„ç´¢å¼•å¯ç”¨äºæŸ¥æ‰¾å§“åœ¨Allenå’ŒBarrymoreä¹‹é—´çš„äººã€‚è¿™é‡Œä¹Ÿåªä½¿ç”¨äº†ç´¢å¼•çš„ç¬¬ä¸€åˆ—ã€‚ ç²¾ç¡®åŒ¹é…æŸä¸€åˆ—å¹¶èŒƒå›´åŒ¹é…å¦å¤–ä¸€åˆ—å‰é¢æåˆ°çš„ç´¢å¼•ä¹Ÿå¯ç”¨äºæŸ¥æ‰¾æ‰€æœ‰å§“ä¸ºAllenï¼Œå¹¶ä¸”åå­—æ˜¯å­—æ¯Kå¼€å¤´ï¼ˆæ¯”å¦‚Kimã€Karlç­‰)çš„äººã€‚å³ç¬¬ä¸€åˆ—last_nameå…¨åŒ¹é…ï¼Œç¬¬äºŒåˆ—first_nameèŒƒå›´åŒ¹é…ã€‚ åªè®¿é—®ç´¢å¼•çš„æŸ¥è¯¢B-Treeé€šå¸¸å¯ä»¥æ”¯æŒâ€œåªè®¿é—®ç´¢å¼•çš„æŸ¥è¯¢â€ï¼Œå³æŸ¥è¯¢åªéœ€è¦è®¿é—®ç´¢å¼•ï¼Œè€Œæ— é¡»è®¿é—®æ•°æ®è¡Œã€‚åé¢æˆ‘ä»¬å°†å•ç‹¬è®¨è®ºè¿™ç§â€œè¦†ç›–ç´¢å¼•â€çš„ä¼˜åŒ–ã€‚ å› ä¸ºç´¢å¼•æ ‘ä¸­çš„èŠ‚ç‚¹æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥é™¤äº†æŒ‰å€¼æŸ¥æ‰¾ä¹‹å¤–ï¼Œç´¢å¼•è¿˜å¯ä»¥ç”¨äºæŸ¥è¯¢ä¸­çš„ORDER BYæ“ä½œï¼ˆæŒ‰é¡ºåºæŸ¥æ‰¾)ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœ B-Treeå¯ä»¥æŒ‰ç…§æŸç§æ–¹å¼æŸ¥æ‰¾åˆ°å€¼ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥æŒ‰ç…§è¿™ç§æ–¹å¼ç”¨äºæ’åºã€‚æ‰€ä»¥ï¼Œå¦‚æœORDER BYå­å¥æ»¡è¶³å‰é¢åˆ—å‡ºçš„å‡ ç§æŸ¥è¯¢ç±»å‹ï¼Œåˆ™è¿™ä¸ªç´¢å¼•ä¹Ÿå¯ä»¥æ»¡è¶³å¯¹åº”çš„æ’åºéœ€æ±‚ã€‚ ä¸‹é¢æ˜¯ä¸€äº›å…³äºB-Treeç´¢å¼•çš„é™åˆ¶:å¦‚æœä¸æ˜¯æŒ‰ç…§ç´¢å¼•çš„æœ€å·¦åˆ—å¼€å§‹æŸ¥æ‰¾ï¼Œåˆ™æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚ä¾‹å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„ç´¢å¼•æ— æ³•ç”¨äºæŸ¥æ‰¾åå­—ä¸ºBillçš„äººï¼Œä¹Ÿæ— æ³•æŸ¥æ‰¾æŸä¸ªç‰¹å®šç”Ÿæ—¥çš„äººï¼Œå› ä¸ºè¿™ä¸¤åˆ—éƒ½ä¸æ˜¯æœ€å·¦æ•°æ®åˆ—ã€‚ç±»ä¼¼åœ°ï¼Œä¹Ÿæ— æ³•æŸ¥æ‰¾å§“æ°ä»¥æŸä¸ªå­—æ¯ç»“å°¾çš„äººã€‚ ä¸èƒ½è·³è¿‡ç´¢å¼•ä¸­çš„åˆ—ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‰é¢æ‰€è¿°çš„ç´¢å¼•æ— æ³•ç”¨äºæŸ¥æ‰¾å§“ä¸ºSmithå¹¶ä¸”åœ¨æŸä¸ªç‰¹å®šæ—¥æœŸå‡ºç”Ÿçš„äººã€‚å¦‚æœä¸æŒ‡å®šå(first_name)ï¼Œåˆ™ MySQLåªèƒ½ä½¿ç”¨ç´¢å¼•çš„ç¬¬ä¸€åˆ—ã€‚ å¦‚æœæŸ¥è¯¢ä¸­æœ‰æŸä¸ªåˆ—çš„èŒƒå›´æŸ¥è¯¢ï¼Œåˆ™å…¶å³è¾¹æ‰€æœ‰åˆ—éƒ½æ— æ³•ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–æŸ¥æ‰¾ã€‚ä¾‹å¦‚æœ‰æŸ¥è¯¢WHERE last_name=â€™Smithâ€™ AND first_name LIKE â€˜J%â€™AND dob = â€˜1976-12-23â€™ï¼Œè¿™ä¸ªæŸ¥è¯¢åªèƒ½ä½¿ç”¨ç´¢å¼•çš„å‰ä¸¤åˆ—ï¼Œå› ä¸ºè¿™é‡ŒLIKEæ˜¯ä¸€ä¸ªèŒƒå›´æ¡ä»¶ï¼ˆä½†æ˜¯æœåŠ¡å™¨å¯ä»¥æŠŠå…¶ä½™åˆ—ç”¨äºå…¶ä»–ç›®çš„)ã€‚å¦‚æœèŒƒå›´æŸ¥è¯¢åˆ—å€¼çš„æ•°é‡æœ‰é™ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ä½¿ç”¨å¤šä¸ªç­‰äºæ¡ä»¶æ¥ä»£æ›¿èŒƒå›´æ¡ä»¶ã€‚åœ¨æœ¬ç« çš„ç´¢å¼•æ¡ˆä¾‹å­¦ä¹ éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†æ¼”ç¤ºä¸€ä¸ªè¯¦ç»†çš„æ¡ˆä¾‹ã€‚ æ‰€ä»¥ï¼Œç´¢å¼•çš„åˆ—çš„é¡ºåºå¾ˆé‡è¦ å“ˆå¸Œç´¢å¼•åŸºäºå“ˆå¸Œè¡¨ï¼Œå¯¹äºæ¯ä¸€è¡Œæ•°æ®ï¼Œå­˜å‚¨å¼•æ“ä¼šå¯¹æ‰€æœ‰çš„ç´¢å¼•åˆ—è®¡ç®—ä¸€ä¸ªå“ˆå¸Œå€¼ã€‚å“ˆå¸Œç´¢å¼•å°†æ‰€æœ‰çš„å“ˆå¸Œç å­˜å‚¨åœ¨ç´¢å¼•ä¸­ï¼ŒåŒæ—¶åœ¨å“ˆå¸Œè¡¨ä¸­ä¿å­˜æŒ‡å‘æ¯ä¸ªæ•°æ®è¡Œçš„æŒ‡é’ˆã€‚ åœ¨MySQLä¸­ï¼Œåªæœ‰Memoryå¼•æ“æ˜¾å¼æ”¯æŒå“ˆå¸Œç´¢å¼•ã€‚è¿™ä¹Ÿæ˜¯Memoryå¼•æ“è¡¨çš„é»˜è®¤ç´¢å¼•ç±»å‹ã€‚ å“ˆå¸Œç´¢å¼•çš„é™åˆ¶ å“ˆå¸Œç´¢å¼•åªåŒ…å«å“ˆå¸Œå€¼å’Œè¡ŒæŒ‡é’ˆï¼Œè€Œä¸å­˜å‚¨å­—æ®µå€¼ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨ç´¢å¼•ä¸­çš„å€¼æ¥é¿å…è¯»å–è¡Œã€‚ä¸è¿‡ï¼Œè®¿é—®å†…å­˜ä¸­çš„è¡Œçš„é€Ÿåº¦å¾ˆå¿«ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æƒ…å†µä¸‹è¿™ä¸€ç‚¹å¯¹æ€§èƒ½çš„å½±å“å¹¶ä¸æ˜æ˜¾ã€‚ å“ˆå¸Œç´¢å¼•æ•°æ®å¹¶ä¸æ˜¯æŒ‰ç…§ç´¢å¼•å€¼é¡ºåºå­˜å‚¨çš„ï¼Œæ‰€ä»¥ä¹Ÿå°±æ— æ³•ç”¨äºæ’åºã€‚ å“ˆå¸Œç´¢å¼•ä¹Ÿä¸æ”¯æŒéƒ¨åˆ†ç´¢å¼•åˆ—åŒ¹é…æŸ¥æ‰¾ï¼Œå› ä¸ºå“ˆå¸Œç´¢å¼•å§‹ç»ˆæ˜¯ä½¿ç”¨ç´¢å¼•åˆ—çš„å…¨éƒ¨å†…å®¹æ¥è®¡ç®—å“ˆå¸Œå€¼çš„ã€‚ä¾‹å¦‚,åœ¨æ•°æ®åˆ—(A,B)ä¸Šå»ºç«‹å“ˆå¸Œç´¢å¼•,å¦‚æœæŸ¥è¯¢åªæœ‰æ•°æ®åˆ—A,åˆ™æ— æ³•ä½¿ç”¨è¯¥ç´¢å¼•ã€‚ å“ˆå¸Œç´¢å¼•åªæ”¯æŒç­‰å€¼æ¯”è¾ƒæŸ¥è¯¢ï¼ŒåŒ…æ‹¬=ã€IN()ã€&lt;&gt;(æ³¨æ„â—‡&gt;å’Œ&lt;=&gt;æ˜¯ä¸åŒçš„æ“ä½œ)ã€‚ä¹Ÿä¸æ”¯æŒä»»ä½•èŒƒå›´æŸ¥è¯¢ï¼Œä¾‹å¦‚ WHERE price &gt; 100ã€‚ è®¿é—®å“ˆå¸Œç´¢å¼•çš„æ•°æ®éå¸¸å¿«ï¼Œé™¤éæœ‰å¾ˆå¤šå“ˆå¸Œå†²çªï¼ˆä¸åŒçš„ç´¢å¼•åˆ—å€¼å´æœ‰ç›¸åŒçš„å“ˆå¸Œå€¼)ã€‚å½“å‡ºç°å“ˆå¸Œå†²çªçš„æ—¶å€™ï¼Œå­˜å‚¨å¼•æ“å¿…é¡»éå†é“¾è¡¨ä¸­æ‰€æœ‰çš„è¡ŒæŒ‡é’ˆï¼Œé€è¡Œè¿›è¡Œæ¯”è¾ƒ,ç›´åˆ°æ‰¾åˆ°æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è¡Œã€‚ å¦‚æœå“ˆå¸Œå†²çªå¾ˆå¤šçš„è¯ï¼Œä¸€äº›ç´¢å¼•ç»´æŠ¤æ“ä½œçš„ä»£ä»·ä¹Ÿä¼šå¾ˆé«˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨æŸä¸ªé€‰æ‹©æ€§å¾ˆä½ï¼ˆå“ˆå¸Œå†²çªå¾ˆå¤šï¼‰çš„åˆ—ä¸Šå»ºç«‹å“ˆå¸Œç´¢å¼•ï¼Œé‚£ä¹ˆå½“ä»è¡¨ä¸­åˆ é™¤ä¸€è¡Œæ—¶ï¼Œå­˜å‚¨å¼•æ“éœ€è¦éå†å¯¹åº”å“ˆå¸Œå€¼çš„é“¾è¡¨ä¸­çš„æ¯ä¸€è¡Œï¼Œæ‰¾åˆ°å¹¶åˆ é™¤å¯¹åº”è¡Œçš„å¼•ç”¨ï¼Œå†²çªè¶Šå¤šï¼Œä»£ä»·è¶Šå¤§ã€‚ ç©ºé—´æ•°æ®ç´¢å¼•ï¼ˆR-TREEï¼‰MyISAMè¡¨æ”¯æŒç©ºé—´ç´¢å¼•ï¼Œå¯ä»¥ç”¨ä½œåœ°ç†æ•°æ®å­˜å‚¨ã€‚ å…¨æ–‡ç´¢å¼•å…¨æ–‡ç´¢å¼•æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„ç´¢å¼•ï¼Œå®ƒæŸ¥æ‰¾çš„æ˜¯æ–‡æœ¬ä¸­çš„å…³é”®è¯ï¼Œè€Œä¸æ˜¯ç›´æ¥æ¯”è¾ƒç´¢å¼•ä¸­çš„å€¼ã€‚å…¨æ–‡æœç´¢å’Œå…¶ä»–å‡ ç±»ç´¢å¼•çš„åŒ¹é…æ–¹å¼å®Œå…¨ä¸ä¸€æ ·ã€‚å®ƒæœ‰è®¸å¤šéœ€è¦æ³¨æ„çš„ç»†èŠ‚ï¼Œå¦‚åœç”¨è¯ã€è¯å¹²å’Œå¤æ•°ã€å¸ƒå°”æœç´¢ç­‰ã€‚å…¨æ–‡ç´¢å¼•æ›´ç±»ä¼¼äºæœç´¢å¼•æ“åšçš„äº‹æƒ…ï¼Œè€Œä¸æ˜¯ç®€å•çš„ WHEREæ¡ä»¶åŒ¹é…ã€‚ å…¶ä»–ç´¢å¼•ç´¢å¼•çš„ä¼˜ç‚¹ä¸‰å¤§ä¼˜ç‚¹ï¼š ç´¢å¼•å¤§å¤§å‡å°‘äº†æœåŠ¡å™¨éœ€è¦æ‰«æçš„æ•°æ®é‡ã€‚ ç´¢å¼•å¯ä»¥å¸®åŠ©æœåŠ¡å™¨é¿å…æ’åºå’Œä¸´æ—¶è¡¨ã€‚ ç´¢å¼•å¯ä»¥å°†éšæœºI/Oå˜ä¸ºé¡ºåºIOã€‚ é«˜æ€§èƒ½çš„ç´¢å¼•ç­–ç•¥ç‹¬ç«‹çš„åˆ—ç´¢å¼•ä¸èƒ½æ˜¯è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸èƒ½æ˜¯å‡½æ•°çš„å‚æ•°ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªæŸ¥è¯¢æ— æ³•ä½¿ç”¨actor_idåˆ—çš„ç´¢å¼•: 1mysql&gt; SELECT actor_id FROM sakila.actor MHERE actor_id + 1 &#x3D;5; ä¸‹é¢æ˜¯å¦ä¸€ä¸ªå¸¸è§çš„é”™è¯¯: 1mysql&gt; SELECT ... WHERE TO_DAYS(CURRENT_DATE) - TO_DAYS(date_col) &lt;&#x3D; 10; å‰ç¼€ç´¢å¼•å’Œç´¢å¼•é€‰æ‹©æ€§å¯¹äºå¾ˆé•¿çš„å­—ç¬¦åˆ—ï¼Œå¯ä»¥ç´¢å¼•å¼€å§‹çš„éƒ¨åˆ†å­—ç¬¦ã€‚ï¼ˆèŠ‚çœç´¢å¼•ç©ºé—´å’Œæé«˜ç´¢å¼•æ•ˆç‡ï¼‰ï¼Œä½†ä¹Ÿä¼šé™ä½ç´¢å¼•çš„é€‰æ‹©æ€§ã€‚ å¯¹äºBLOGã€TEXTã€æˆ–è€…å¾ˆé•¿çš„VARCHARç±»å‹çš„åˆ—ï¼Œå¿…é¡»ä½¿ç”¨å‰ç¼€ç´¢å¼•ã€‚ 1CREATE INDEX index_name ON table(col_name(n)); #næœ‰é™åˆ¶ è”åˆç´¢å¼•ä¸ºæ¯ä¸ªåˆ—åˆ›å»ºç‹¬ç«‹çš„ç´¢å¼•æˆ–è€…æŒ‰ç…§é”™è¯¯çš„é¡ºåºåˆ›å»ºå¤šåˆ—ç´¢å¼•å¹¶ä¸èƒ½æé«˜æ•ˆç‡ã€‚ å¦‚ä½•é€‰æ‹©ç´¢å¼•åˆ—çš„é¡ºåº ç»å¸¸ä¼šè¢«ä½¿ç”¨åˆ°çš„åˆ— ä¼˜å…ˆé€‰æ‹©æ€§é«˜çš„åˆ—ä¼˜å…ˆ å®½åº¦å°çš„åˆ—ä¼˜å…ˆ å°è¯•ä½¿ç”¨ç´¢å¼•åˆå¹¶ èšç°‡ç´¢å¼•èšç°‡ç´¢å¼•å¹¶ä¸æ˜¯ä¸€ç§å•ç‹¬çš„ç´¢å¼•ç±»å‹ï¼Œè€Œæ˜¯ä¸€ç§æ•°æ®å­˜å‚¨æ–¹å¼ã€‚å…·ä½“çš„ç»†èŠ‚ä¾èµ–äºå…¶å®ç°æ–¹å¼ï¼Œä½†InnoDBçš„èšç°‡ç´¢å¼•å®é™…ä¸Šåœ¨åŒä¸€ä¸ªç»“æ„ä¸­ä¿å­˜äº†B-Treeç´¢å¼•å’Œæ•°æ®è¡Œã€‚ è¦†ç›–ç´¢å¼•è¦†ç›–ç´¢å¼•ï¼ˆcovering indexï¼‰æŒ‡ä¸€ä¸ªæŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œåªç”¨ä»ç´¢å¼•ä¸­å°±èƒ½å¤Ÿå–å¾—ï¼Œä¸å¿…ä»æ•°æ®è¡¨ä¸­è¯»å–ã€‚ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºå®ç°äº†ç´¢å¼•è¦†ç›–ã€‚ å¦‚æœä¸€ä¸ªç´¢å¼•åŒ…å«äº†ï¼ˆæˆ–è¦†ç›–äº†ï¼‰æ»¡è¶³æŸ¥è¯¢è¯­å¥ä¸­å­—æ®µä¸æ¡ä»¶çš„æ•°æ®å°±å«åšè¦†ç›–ç´¢å¼•ã€‚ ä½¿ç”¨ç´¢å¼•æ‰«ææ¥åšæ’åº ç´¢å¼•çš„åˆ—é¡ºåºå’ŒOrder Byå­å¥çš„é¡ºåºå®Œå…¨ä¸€è‡´ ç´¢å¼•ä¸­æ‰€æœ‰åˆ—çš„æ–¹å‘(å‡åº,é™åº)å’ŒOrder byå­å¥å®Œå…¨ä¸€è‡´ Order byä¸­çš„å­—æ®µå…¨éƒ¨åœ¨å…³è”è¡¨ä¸­çš„ç¬¬ä¸€å¼ è¡¨ä¸­ æ¨¡æ‹ŸHashç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢ ï¼ˆä½¿ç”¨BTreeç´¢å¼•æ¨¡æ‹ŸHashï¼‰ åªèƒ½å¤„ç†é”®å€¼çš„å…¨å€¼åŒ¹é…æŸ¥æ‰¾ æ‰€ä½¿ç”¨çš„Hashå‡½æ•°å†³å®šç€ç´¢å¼•é”®çš„å¤§å° åˆ©ç”¨ç´¢å¼•ä¼˜åŒ–é” ç´¢å¼•å¯ä»¥å‡å°‘é”å®šçš„è¡Œæ•° ç´¢å¼•å¯ä»¥åŠ å¿«å¤„ç†é€Ÿåº¦ï¼ŒåŒæ—¶ä¹ŸåŠ å¿«äº†é”çš„é‡Šæ”¾ å‹ç¼©å†—ä½™å’Œé‡å¤ç´¢å¼• 1pt-duplicate-key-checker h&#x3D;127.0.0.1 #æ’æŸ¥å†—ä½™ç´¢å¼• æŸ¥æ‰¾æœªä½¿ç”¨çš„ç´¢å¼•123456SELECT object_schema, object_name, index_name,b.TABLE_RO\\FROM performance_schema.table_io_waits_summary_by_index_usage a JOIN information_schema.tables b ONa.OBJECT_SCHEMA&#96;&#x3D;b.TABLE_SCHEMA&#96;AND a.OBJECT_NAME&#96;&#x3D; b.TABLE_NAMEWHERE index_name IS NOT NULLAND count_star &#x3D; 0ORDER BY object_schema, object_name; æ›´æ–°ç´¢å¼•çš„ç»Ÿè®¡ä¿¡æ¯åŠå‡å°‘ç´¢å¼•ç¢ç‰‡12analyze table table_nameoptimize table table_name #ä¼šå¯¼è‡´é”è¡¨ SQLæŸ¥è¯¢ä¼˜åŒ–æŸ¥è¯¢ä¼˜åŒ–ï¼Œç´¢å¼•ä¼˜åŒ–ï¼Œåº“è¡¨ç»“æ„ä¼˜åŒ–éœ€è¦é½å¤´å¹¶è¿›ã€‚ å¦‚ä½•è·å–æœ‰æ€§èƒ½é—®é¢˜çš„SQL é€šè¿‡ç”¨æˆ·åé¦ˆè·å–å­˜åœ¨æ€§èƒ½é—®é¢˜çš„SQL é€šè¿‡æ…¢æŸ¥æ—¥å¿—è·å–å­˜åœ¨æ€§èƒ½é—®é¢˜çš„SQL å®æ—¶è·å–å­˜åœ¨æ€§èƒ½é—®é¢˜çš„SQL æ…¢æŸ¥è¯¢æ—¥å¿—ä»‹ç»å­˜å‚¨æ—¥å¿—æ‰€éœ€è¦çš„å¤§é‡çš„ç£ç›˜ç©ºé—´ slow_query_log on/off å¯åŠ¨åœæ­¢è®°å½•æ…¢æŸ¥æ—¥å¿— å¯ä»¥é€šè¿‡è„šæœ¬å®šæ—¶å¼€å…³ slow_query_log_file æŒ‡å®šæ…¢æŸ¥æ—¥å¿—çš„å­˜å‚¨è·¯å¾„åŠæ–‡ä»¶ long_query_time æŒ‡å®šè®°å½•æ…¢æŸ¥æ—¥å¿—SQLæ‰§è¡Œæ—¶é—´çš„ä¼å€¼ log_queries_not_using_indexes æ˜¯å¦è®°å½•æœªä½¿ç”¨ç´¢å¼•çš„SQL ä¼šè®°å½•å“ªäº›è¯­å¥ï¼Ÿ è®°å½•æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„SQL åŒ…æ‹¬æŸ¥è¯¢è¯­å¥ æ•°æ®ä¿®æ”¹è¯­å¥ å·²ç»å›æ»šçš„SQL å¸¸ç”¨çš„æ…¢æŸ¥æ—¥å¿—åˆ†æå·¥å…· (mysqldumpslow)1mysqldumpslow -s r -t 10 slow-mysql.log å®æ—¶è·å–æ€§èƒ½é—®é¢˜SQL 12SELECT id, user , host,DB,command, time ,state, info FROM information_schema.PROCESSLISTWHERE TIME &gt;&#x3D; 60 SQLçš„è§£æé¢„å¤„ç†åŠç”Ÿæˆæ‰§è¡Œè®¡åˆ’æŸ¥è¯¢ä¸ºä»€ä¹ˆä¼šæ…¢ï¼ˆMySQLæœåŠ¡å™¨å¤„ç†æŸ¥è¯¢è¯·æ±‚çš„è¿‡ç¨‹ï¼‰ï¼Ÿ å®¢æˆ·ç«¯å‘é€SQLè¯·æ±‚ç»™æœåŠ¡å™¨ æœåŠ¡å™¨æ£€æŸ¥æ˜¯å¦å¯ä»¥åœ¨æŸ¥è¯¢ç¼“å­˜ä¸­å‘½ä¸­è¯¥SQL ï¼ˆHASHï¼‰ æœåŠ¡å™¨ç«¯è¿›è¡ŒSQLè§£æï¼Œé¢„å¤„ç†ï¼Œå†ç”±ä¼˜åŒ–å™¨ç”Ÿæˆå¯¹åº”çš„æ‰§è¡Œè®¡åˆ’ è·Ÿæ®æ‰§è¡Œè®¡åˆ’ï¼Œè°ƒç”¨å­˜å‚¨å¼•æ“APIæ¥æŸ¥è¯¢æ•°æ® å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ å¯¹äºä¸€ä¸ªè¯»å†™é¢‘ç¹çš„ç³»ç»Ÿä½¿ç”¨æŸ¥è¯¢ç¼“å­˜å¾ˆå¯èƒ½ä¼šé™ä½æŸ¥è¯¢å¤„ç†çš„æ•ˆç‡ query_cache_type è®¾ç½®æŸ¥è¯¢ç¼“å­˜æ˜¯å¦å¯ç”¨ query_cache_size è®¾ç½®æŸ¥è¯¢ç¼“å­˜çš„å†…å­˜å¤§å° query_cache_limit è®¾ç½®æŸ¥è¯¢ç¼“å­˜å¯ç”¨å­˜å‚¨çš„æœ€å¤§å€¼ query_cache_wlock_invalidate è®¾ç½®æ•°æ®è¡¨è¢«é”åæ˜¯å¦è¿”å›ç¼“å­˜ä¸­çš„æ•°æ® query_cache_min_res_unit è®¾ç½®æŸ¥è¯¢ç¼“å­˜åˆ†é…çš„å†…å­˜å—æœ€å°å•ä½ å¦‚ä½•ç¡®å®šæŸ¥è¯¢å¤„ç†å„ä¸ªé˜¶æ®µæ‰€æ¶ˆè€—çš„æ—¶é—´ä½¿ç”¨profile set profiling =1; æ‰§è¡ŒæŸ¥è¯¢ show profiles; æŸ¥çœ‹æ¯ä¸€ä¸ªæŸ¥è¯¢æ‰€æ¶ˆè€—çš„æ€»æ—¶é—´çš„ä¿¡æ¯ show profile for query N;æŸ¥è¯¢çš„æ¯ä¸ªé˜¶æ®µæ‰€æ¶ˆè€—çš„æ—¶é—´ show profile cpy for query N ä½¿ç”¨performance_schemaï¼ˆå»ºè®®ï¼‰å¯åŠ¨ 123update setup_instruments SET enabled&#x3D;&#39;YES&#39;, TIMED&#x3D;&#39;YES&#39; WHERE NAME LIKE &#39;stage&#39;UPDATE setup_consumers SET enabled&#x3D;&#39;YES&#39; WHERE NAME LIKE &#39;events%&#39;; ä½¿ç”¨ 1234567SELECT a.THREAD_ID, SQL_TEXT,c.EVENT_NAME, (C.TIMER_END - c.TIMER_START)&#x2F;1000000000 AS &#39;DURATION (ms)&#39;FROM events_statements_history_long aJOIN threads b ON a.THREAD_ID&#x3D; b.THREAD_IDJOIN events_stages_history_long c ON c.THREAD_ID&#x3D; b.THREAD_IDAND c.EVENT_ID BETWEEN a.EVENT_ID AND a.END_EVENT_IDWHERE b.PROCESSLIST_ID&#x3D;CONNECTION_ID() AND a.EVENT_NAME&#x3D; &#39;statement&#x2F;sql&#x2F;select&#39; ORDER BY a.THREAD_ID,C.EVENT_ID ç‰¹å®šSQLçš„æŸ¥è¯¢ä¼˜åŒ–å¤§è¡¨çš„æ›´æ–°å’Œåˆ é™¤12345678910111213141516DELIMITER $$USE &#96;imooc&#96;$$DROP PROCEDURE IFEXISTS &#96;p_delete_rows&#96; $$CREATE DEFINER&#x3D;&#39;root&#39;127.0.0.1&#39; PROCEDURE &#39;p_delete_rows&#96; ()BEGIN DECLARE v_rows INT; SET v_rows &#x3D; 1; WHILE v _rows &gt;0 DO DELETE FROM sbtest1 WHERE id &#x3D; 90000 AND id &lt;&#x3D; 19000q LIMIT 5000; SELECT ROW_COUNT( INTO v_rows; SELECT SLEEP(5); END WHILE;END$$DELIMITER ; å¦‚ä½•ä¿®æ”¹å¤§è¡¨çš„ç»“æ„ å¯¹è¡¨ä¸­çš„åˆ—çš„å­—æ®µç±»å‹è¿›è¡Œä¿®æ”¹ æ”¹å˜å­—æ®µçš„å®½åº¦æ—¶è¿˜æ˜¯ä¼šé”è¡¨ æ— æ³•è§£å†³ä¸»ä»æ•°æ®åº“å»¶è¿Ÿçš„é—®é¢˜ ä½¿ç”¨ä¸»ä»ç»“æ„ or 12pt-online-schema-change \\--alter&#x3D;&quot;MODIFY c VARCHAR(150)NOT NULL DEFAULT&quot;&quot; \\--user&#x3D;root --password&#x3D;PassWord D&#x3D;imooc,t&#x3D;sbtest4 \\--charset&#x3D;utf8 --execute æ•°æ®åº“çš„åˆ†åº“åˆ†è¡¨åˆ†åº“ åˆ†ç‰‡ å¦‚ä½•é€‰æ‹©åˆ†åŒºé”® åˆ†åŒºé”®è¦èƒ½å°½é‡é¿å…è·¨åˆ†ç‰‡æŸ¥è¯¢çš„å‘ç”Ÿ åˆ†åŒºé”®è¦èƒ½å°½é‡ä½¿å„ä¸ªåˆ†ç‰‡ä¸­çš„æ•°æ®å¹³å‡ å¦‚ä½•å­˜å‚¨æ— éœ€åˆ†ç‰‡çš„è¡¨ æ¯ä¸ªåˆ†ç‰‡ä¸­å­˜å‚¨ä¸€ä»½ç›¸åŒçš„æ•°æ® ä½¿ç”¨é¢å¤–çš„èŠ‚ç‚¹ç»Ÿä¸€å­˜å‚¨ å¦‚ä½•åœ¨èŠ‚ç‚¹ä¸Šéƒ¨ç½²åˆ†ç‰‡ æ¯ä¸ªåˆ†ç‰‡ä½¿ç”¨å•ä¸€æ•°æ®åº“ï¼Œå¹¶ä¸”æ•°æ®åº“åä¹Ÿç›¸åŒ å°†å¤šä¸ªåˆ†ç‰‡è¡¨å­˜å‚¨åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œå¹¶åœ¨è¡¨åä¸ŠåŠ å…¥åˆ†ç‰‡å·åç¼€ åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸­éƒ¨ç½²å¤šä¸ªæ•°æ®åº“ï¼Œæ¯ä¸ªæ•°æ®åº“åŒ…å«ä¸€ä¸ªåˆ†ç‰‡ å¦‚ä½•åˆ†é…åˆ†ç‰‡ä¸­çš„æ•°æ® æŒ‰åˆ†åŒºé”®çš„Hashå€¼å–æ¨¡æ¥åˆ†é…åˆ†ç‰‡ æ•°æ®æŒ‰åˆ†åŒºé”®çš„èŒƒå›´æ¥åˆ†é…åˆ†ç‰‡æ•°æ® åˆ©ç”¨åˆ†åŒºé”®å’Œåˆ†ç‰‡çš„æ˜ å°„è¡¨æ¥åˆ†é…åˆ†ç‰‡æ•°æ® å¦‚ä½•ç”Ÿæˆå…¨å±€å”¯ä¸€ID ä½¿ç”¨auto_increment_incrementå’Œauto_increment_offsetå‚æ•° ä½¿ç”¨å…¨å±€èŠ‚ç‚¹æ¥ç”ŸæˆID åœ¨Redisç­‰ç¼“å­˜æœåŠ¡å™¨ä¸­åˆ›å»ºå…¨å±€ID æ•°æ®åº“ç›‘æ§","categories":[{"name":"Mysql","slug":"Mysql","permalink":"http://www.postman.life/categories/Mysql/"}],"tags":[]},{"title":"MySQLå¿…çŸ¥å¿…ä¼šç¬”è®°","slug":"MySQLå¿…çŸ¥å¿…ä¼šç¬”è®°","date":"2020-11-17T14:39:02.463Z","updated":"2021-06-14T13:59:18.857Z","comments":true,"path":"2020/11/17/MySQLå¿…çŸ¥å¿…ä¼šç¬”è®°/","link":"","permalink":"http://www.postman.life/2020/11/17/MySQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E7%AC%94%E8%AE%B0/","excerpt":"","text":"[TOC] åŸºç¡€çŸ¥è¯†ä¸å‘½ä»¤è¡¨åï¼šç›¸åŒæ•°æ®åº“ä¸­ä¸èƒ½ä¸¤æ¬¡ä½¿ç”¨ç›¸åŒçš„è¡¨æ˜ã€ä¸åŒçš„æ•°æ®åº“ä¸­å¯ä»¥ åˆ—: è¡¨ä¸­çš„ä¸€ä¸ªå­—æ®µã€æ‰€æœ‰è¡¨éƒ½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ç»„æˆ æ•°æ®ç±»å‹ï¼š æ‰€å®¹è®¸çš„æ•°æ®çš„ç±»å‹ï¼Œæ¯ä¸ªè¡¨åˆ—éƒ½æœ‰ç›¸åº”çš„æ•°æ®ç±»å‹ è¡Œï¼šè¡¨ä¸­çš„ä¸€è¡Œè®°å½• ä¸»é”®ï¼š ä¸€åˆ—æˆ–ä¸€ç»„åˆ—ï¼Œå®ƒçš„å€¼èƒ½å¤Ÿå”¯ä¸€åŒºåˆ†è¡¨ä¸­æ¯ä¸ªè¡Œã€æ ‡è¯†è‡ªå·±çš„ä¸€åˆ—ã€‚åº”è¯¥æ€»æ˜¯å®šä¹‰ä¸»é”®ï¼Œè™½ç„¶å¹¶ä¸æ€»æ˜¯éƒ½éœ€è¦ ä»»ä½•åˆ—éƒ½å¯ä»¥ä½œä¸ºä¸»é”®ï¼Œåªè¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š ä»»æ„ä¸¤è¡Œéƒ½ä¸å…·æœ‰ç›¸åŒçš„ä¸»é”®å€¼ï¼› æ¯ä¸ªè¡Œéƒ½å¿…é¡»å…·æœ‰ä¸€ä¸ªä¸»é”®å€¼ï¼ˆä¸»é”®åˆ—ä¸å…è®¸ä¸ºNULLå€¼ï¼‰ ä¸»é”®çš„æœ€å¥½ä¹ æƒ¯ï¼š é™¤äº†MySQLå¼ºåˆ¶å®æ–½çš„è§„åˆ™å¤–ï¼Œåº”è¯¥åšæŒçš„å‡ ä¸ªæ™®éè®¤å¯çš„æœ€å¥½ä¹ æƒ¯ï¼š ä¸æ›´æ–°ä¸»é”®åˆ—ä¸­çš„å€¼ ä¸é‡ç”¨ä¸»é”®åˆ—çš„å€¼ ä¸åœ¨ä¸»é”®åˆ—ä¸­ä½¿ç”¨å¯èƒ½ä¼šæ›´æ”¹çš„å€¼ å‘½ä»¤è¾“å…¥åœ¨mysql&gt;ä¹‹åå‘½ä»¤ç”¨;æˆ–\\gç»“æŸï¼Œä»…æŒ‰Enterä¸æ‰§è¡Œå‘½ä»¤ä¸ºäº†ä½¿ç”¨crashcourse æ•°æ®åº“ï¼Œåº”è¯¥è¾“å…¥ä»¥ä¸‹å†…å®¹:use crashcourse è¿”å›å¯ç”¨æ•°æ®åº“çš„ä¸€ä¸ªåˆ—è¡¨show databases è¿”å›å¯ç”¨æ•°æ®åº“çš„ä¸€ä¸ªåˆ—è¡¨show tables; è¿”å›å­—æ®µä¿¡æ¯show columns from customers show index from table_name show status æ˜¾ç¤ºå¹¿æ³›çš„æœåŠ¡å™¨çŠ¶æ€ä¿¡æ¯ show create database å’Œ show create table åˆ†åˆ«ç”¨æ¥æ˜¾ç¤ºåˆ›å»ºç‰¹å®šæ•°æ®åº“æˆ–è¡¨çš„MySQLè¯­å¥ show grants ç”¨æ¥æ˜¾ç¤ºæˆäºˆç”¨æˆ·ï¼ˆæ‰€æœ‰ç”¨æˆ·æˆ–ç‰¹å®šç”¨çš„å®‰å…¨æƒé™ï¼‰ show errors å’Œ show warnings ç”¨æ¥æ˜¾ç¤ºæœåŠ¡å™¨é”™è¯¯æˆ–è­¦å‘Šæ¶ˆæ¯ ä¸»é”®ç´¢å¼•(BTree)Select æŸ¥è¯¢é™åˆ¶ç»“æœselect * from emp limit 5 è¿”å›ä¸å¤šäº5è¡Œ select * from emp limit 5,5 è¿”å›ä»è¡Œ5å¼€å§‹çš„5è¡Œ ï¼ˆç¬¬ä¸€ä¸ªæ•°ä¸ºå¼€å§‹ä½ç½®ï¼Œç¬¬äºŒæ•°ä¸ºè¦æ£€ç´¢çš„è¡Œæ•°ï¼‰ æ’åºé»˜è®¤æ’åºselect prod_name from products order by prod_name æŒ‰å¤šä¸ªåˆ—æ’åº,é¦–å…ˆæŒ‰ä»·æ ¼ï¼Œç„¶åå†æŒ‰åç§°æ’åºselect prod_id,prod_price,prod_name from products order by prod_price,prod_name æŒ‡å®šæ’åºæ–¹å‘æ•°æ®æ’åºä¸é™äºå‡åºï¼ŒA-Zï¼Œè¿™æ˜¯é»˜è®¤çš„æ’åºé¡ºåºï¼Œè¿˜å¯ä»¥ä½¿ç”¨DESCè¿›è¡Œé™åºæ’åºselect prod_id,prod_price,prod_name from products order by prod_price desc,prod_name DESCåªä½œç”¨äºå…¶å‰é¢çš„åˆ—åï¼Œå¦‚æœå¯¹å‰©ä¸‹çš„åˆ—åä¸æŒ‡å®šï¼Œä»ç„¶æŒ‰é»˜è®¤æ’åº ä½¿ç”¨ORDER BYå’ŒLIMITç»„åˆï¼Œæ‰¾å‡ºä¸€ä¸ªåˆ—ä¸­æœ€é«˜æˆ–æœ€ä½å€¼select prod_price from products order by prod_price DESC LIMIT 1; è¿‡æ»¤æ•°æ®ä½¿ç”¨WHEREå­å¥select prod_name, prod_price from products where prod_price = 2.50; WHEREå­å¥æ“ä½œç¬¦ æ“ä½œç¬¦ è¯´æ˜ = ç­‰äº &lt;&gt; ä¸ç­‰äº != ä¸ç­‰äº &lt; å°äº &lt;= å°äºç­‰äº &gt; å¤§äº &gt;= å¤§äºç­‰äº BETWEEN åœ¨æŒ‡å®šçš„ä¸¤ä¸ªå€¼ä¹‹é—´ where prod_name = â€˜fusesâ€™ ï¼ŒMySQLåœ¨æ‰§è¡ŒåŒ¹é…æ—¶é»˜è®¤ä¸åŒºåˆ†å¤§å°å†™ï¼Œæ‰€ä»¥fusesäºFusesåŒ¹é… BETWEEN ç”¨æ³•ï¼šBETWEEN 5 AND 10ï¼Œè¡¨ç¤ºæ£€ç´¢çš„æ•°å­—åœ¨5å’Œ10ä¹‹é—´ ç©ºå€¼æ£€æŸ¥ NULLï¼Œå®ƒä¸å­—æ®µåŒ…å«0ã€ç©ºå­—ç¬¦ä¸²æˆ–ä»…ä»…åŒ…å«ç©ºæ ¼ä¸åŒIS NULLã€IS NOT NULL AND æ“ä½œFROM EMP WHERE CONDITION1 AND CONDITION2 OR æ“ä½œFROM EMP WHERE CONDITION1 OR CONDITION2 Tipsï¼šåœ¨å¤„ç†ORæ“ä½œç¬¦å‰ï¼Œä¼˜å…ˆå¤„ç†ANDæ“ä½œç¬¦IN æ“ä½œFROM EMP WHERE CONDITION1 IN (â€˜â€™, â€˜â€™) NOT æ“ä½œFROM EMP WHERE CONDITION1 NOT IN (â€˜â€™, â€˜â€™) é€šé…ç¬¦ LIKEç™¾åˆ†å·ï¼ˆ%ï¼‰é€šé…ç¬¦ åŒ¹é…åé¢ä»»æ„å­—ç¬¦LIKE â€˜jet%â€™ ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰é€šé…ç¬¦ åŒ¹é…å•ä¸ªå­—ç¬¦LIKE â€˜_ tonâ€™ æ­£åˆ™è¡¨è¾¾å¼å‰ç½®çŸ¥è¯†()å°æ‹¬å·æ•è·ç»„ç”¨äºæ•è·åŒ¹é…çš„å­—ç¬¦ä¸²ï¼ŒåŒ¹é…å°æ‹¬å·å†…çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªï¼Œå¸¸è·Ÿâ€œ|â€ï¼ˆæˆ–ï¼‰ç¬¦å·æ­é…ä½¿ç”¨ï¼Œæ˜¯å¤šé€‰ç»“æ„çš„ã€‚ä¾‹å¦‚ï¼š(abc|cbd)åŒ¹é…çš„æ˜¯abcæˆ–è€…cbdéƒ½èƒ½åŒ¹é…ï¼Œå¤šé€‰ï¼Œå¯ä»¥å†™å¤šä¸ª []ä¸­æ‹¬å·åŒ¹é…å­—ç¬¦ç»„å†…çš„å­—ç¬¦ï¼Œæ¯”å¦‚å’±ä»¬å¸¸ç”¨çš„[0-9a-zA-Z.?!]ç­‰ï¼Œåœ¨[]å†…çš„å­—ç¬¦éƒ½æ˜¯å­—ç¬¦ï¼Œä¸æ˜¯å…ƒå­—ç¬¦ï¼Œæ¯”å¦‚0-9ã€a-zè¿™ä¸­é—´çš„ â€œ-â€ å°±æ˜¯è¿æ¥ç¬¦å·ï¼Œè¡¨ç¤ºèŒƒå›´çš„å…ƒå­—ç¬¦ï¼Œå¦‚æœå†™æˆ[-!?(]è¿™æ ·çš„è¯ï¼Œå°±æ˜¯æ™®é€šå­—ç¬¦ä¾‹å¦‚ï¼š[1,2,3,a-z]èƒ½åŒ¹é…1ã€2ã€3ã€aåˆ°zçš„å­—ç¬¦ {}å¤§æ‹¬å·å¤§æ‹¬å·{}ï¼šåŒ¹é…æ¬¡æ•°ï¼ŒåŒ¹é…åœ¨å®ƒä¹‹å‰è¡¨è¾¾å¼åŒ¹é…å‡ºæ¥çš„å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œ{n}å‡ºç°næ¬¡ã€{n,}åŒ¹é…æœ€å°‘å‡ºç°næ¬¡ã€{n,m}åŒ¹é…æœ€å°‘å‡ºç°næ¬¡ï¼Œæœ€å¤šå‡ºç°mæ¬¡ä¾‹å¦‚ï¼š[a-z]{1,2}èƒ½åŒ¹é…1ä¸ªæˆ–è€…2ä¸ªå°å†™å­—æ¯æˆ–è€…æ˜¯(abc){1,2}èƒ½åŒ¹é…åˆ°abcæˆ–è€…abcabc REGEXPé€‰æ‹©åŒ¹é…åŒ…å«æœ¬æ–‡â€™17â€™çš„æ‰€æœ‰è¡Œ select id_number from tsc where id_number REGEXP â€˜17â€™ çœ‹ä¸Šå»ä¼¼ä¹LIKEå·®ä¸å¤šï¼Œå¯èƒ½è¿˜ä¼šé™ä½æ€§èƒ½ï¼Œä¸è¿‡è¯·è€ƒè™‘ä¸‹é¢ä¾‹å­ï¼š select id_number from tsc where tsc.id_number REGEXP â€˜.000â€™ è¿™é‡Œä½¿ç”¨äº†æ­£åˆ™è¡¨è¾¾å¼.000,æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦ï¼Œå®ƒè¡¨ç¤ºåŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ å› ä¸º1000å’Œ2000éƒ½åŒ¹é…ä¸”è¿”å› ORåŒ¹é…select id_number from tsc where id_number REGEXP â€˜1000|2000â€™ è¯¥å¥ä½¿ç”¨äº†æ­£åˆ™è¡¨è¾¾å¼1000|2000ï¼Œ **|**ä¸ºæ­£åˆ™è¡¨è¾¾å¼çš„ORæ“ä½œç¬¦ï¼Œå®ƒè¡¨ç¤ºåŒ¹é…å…¶ä¸­ä¹‹ä¸€ ä½¿ç”¨**|**ä»åŠŸèƒ½ä¸Šç±»ä¼¼åœ¨selectè¯­å¥ä¸­ä½¿ç”¨ORè¯­å¥ï¼Œå¤šä¸ªORæ¡ä»¶å¯ä»¥å¹¶å…¥å•ä¸ªæ­£åˆ™è¡¨è¾¾å¼ ä¸¤ä¸ªä»¥ä¸Šçš„ORæ¡ä»¶ï¼š å¯ä»¥ç»™ä¸¤ä¸ªä»¥ä¸Šçš„ORæ¡ä»¶ï¼Œä¾‹å¦‚ï¼Œâ€™1000|2000|3000â€™ åŒ¹é…å‡ ä¸ªå­—ç¬¦ä¹‹ä¸€ åŒ¹é…ä»»æ„å•ä¸€å­—ç¬¦ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ åªæƒ³åŒ¹é…ç‰¹å®šçš„å­—ç¬¦ï¼Œä½¿ç”¨æŒ‡å®šä¸€ç»„**[å’Œ]**æ‹¬èµ·æ¥çš„å­—ç¬¦æ¥å®Œæˆã€‚ REGEXP â€˜[123] Tonâ€™ [123]å®šä¹‰ä¸€ç»„å­—ç¬¦ï¼Œå®ƒçš„æ„æ€æ˜¯åŒ¹é…1æˆ–2ç«3ï¼Œ å› æ­¤ï¼Œ1 Tonå’Œ2 Tonéƒ½åŒ¹é…ä¸”è¿”å›ï¼Œæ²¡æœ‰3 Ton åŒ¹é…èŒƒå›´[0123456789] ä¸ºäº†ç®€åŒ–è¿™ç§ç±»å‹çš„é›†åˆï¼Œå¯ä»¥ä½¿ç”¨**-**æ¥å®šä¹‰ä¸€ä¸ªèŒƒå›´ [0-9] ç­‰åŒäºä¸Šè¿°æ•°å­—åˆ—è¡¨ èŒƒå›´ä¸é™äºå®Œæ•´çš„é›†åˆ[1-3]å’Œ[6-9]ä¹Ÿæ˜¯åˆæ³•çš„ï¼Œæ­¤å¤–ï¼Œ[a-z]åŒ¹é…ä»»æ„å­—æ¯å­—ç¬¦ ç¤ºä¾‹ï¼šREGEXP â€˜[1-3] Tonâ€™ åŒ¹é…ç‰¹æ®Šå­—ç¬¦æ­£åˆ™ç”±å…·æœ‰ç‰¹å®šå«ä¹‰çš„ç‰¹æ®Šå­—ç¬¦ç»„æˆï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ° . ã€**[]** ã€**|** å’Œ -**ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›å­—ç¬¦ï¼Œè¯·é—®å¦‚æœä½ éœ€è¦åŒ¹é…è¿™äº›å­—ç¬¦ï¼Œåº”è¯¥æ€ä¹ˆåŠï¼Ÿä¾‹å¦‚è¦æ‰¾åˆ°åŒ…å«.**å­—ç¬¦çš„å€¼ ä¸ºäº†åŒ¹é…è¿™äº›ç‰¹æ®Šå­—ç¬¦ï¼Œå¿…é¡»ä½¿ç”¨ \\ä½œä¸ºå‰å¯¼ ï¼Œ \\\\-è¡¨ç¤ºæŸ¥æ‰¾- Â·Â·Â·Â·Â·Â·Â· ç©ºç™½å…ƒå­—ç¬¦ å…ƒå­—ç¬¦ è¯´æ˜ \\\\f æ¢é¡µ \\\\n æ¢è¡Œ \\\\r å›è½¦ \\\\t åˆ¶è¡¨ \\\\v çºµå‘åˆ¶è¡¨ ä¸ºäº†åŒ¹é…åæ–œæ \\å­—ç¬¦æœ¬èº«ï¼Œéœ€è¦ä½¿ç”¨\\\\\\ åŒ¹é…å­—ç¬¦ç±»å­˜åœ¨æ‰¾å‡ºä½ è‡ªå·±ç»å¸¸ä½¿ç”¨çš„æ•°å­—ã€æ‰€æœ‰å­—æ¯å­—ç¬¦æˆ–æ‰€æœ‰æ•°å­—å­—æ¯å­—ç¬¦ç­‰çš„åŒ¹é…ã€‚ä¸ºæ›´æ–¹ä¾¿å·¥ä½œï¼Œå¯ä»¥ä½¿ç”¨é¢„å®šä¹‰çš„å­—ç¬¦é›†ï¼Œç§°ä¸ºå­—ç¬¦ç±»(character class)ã€‚ ç±» è¯´æ˜ [:alnum:] ä»»æ„å­—æ¯å’Œæ•°å­—(åŒ[a-zA-Z0-9]) [:alpha:] ä»»æ„å­—ç¬¦(åŒ[a-zA-Z]) [:blank:] ç©ºæ ¼å’Œåˆ¶è¡¨(åŒ\\t) [:cntrl:] ASCIIæ§åˆ¶å­—ç¬¦(ASCII 0åˆ°31å’Œ127) [:digit:] ä»»æ„æ•°å­—(åŒ[0-9]) [:graph:] ä¸[:print:]ç›¸åŒï¼Œä½†ä¸åŒ…æ‹¬ç©ºæ ¼ [:lower:] ä»»æ„å°å†™å­—æ¯[åŒ[a-z]] [:print:] ä»»æ„å¯æ‰“å°å­—ç¬¦ [:punct:] å³ä¸åœ¨[:alnum:]åˆä¸åœ¨[:cntrl:]ä¸­çš„ä»»æ„å­—ç¬¦ [:space:] åŒ…æ‹¬ç©ºæ ¼åœ¨å†…çš„ä»»æ„ç©ºç™½å­—ç¬¦(åŒ[\\\\f\\\\n\\\\r\\\\t\\\\v]) [:upper:] ä»»æ„å¤§å†™å­—æ¯(åŒ[A-Z]) [:xdigit:] ä»»æ„åå…­è¿›åˆ¶æ•°å­—(åŒ[a-fA-F0-9]) åŒ¹é…å¤šä¸ªå®ä¾‹ç›®å‰ä¸ºæ­¢ä½¿ç”¨çš„æ‰€æœ‰æ­£åˆ™è¡¨è¾¾å¼éƒ½è¯•å›¾åŒ¹é…å•æ¬¡å‡ºç°ã€‚å¦‚æœå­˜åœ¨ä¸€ä¸ªåŒ¹é…ï¼Œè¯¥è¡Œè¢«æ£€ç´¢å‡ºæ¥ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæ£€ç´¢ä¸å‡ºä»»ä½•è¡Œã€‚ä½†æœ‰æ—¶éœ€è¦å¯¹åŒ¹é…çš„æ•°ç›®è¿›è¡Œæ›´å¼ºçš„æ§åˆ¶ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½éœ€è¦å¯»æ‰¾æ‰€æœ‰çš„æ•°ï¼Œä¸ç®¡æ•°ä¸­åŒ…å«å¤šå°‘æ•°å­—ï¼Œæˆ–è€…ä½ å¯èƒ½æƒ³å¯»æ‰¾ä¸€ä¸ªå•è¯å¹¶ä¸”è¿˜èƒ½å¤Ÿé€‚åº”ä¸€ä¸ªå°¾éšçš„sï¼ˆå¦‚æœå­˜åœ¨)ï¼Œç­‰ç­‰ã€‚ é‡å¤å…ƒå­—ç¬¦ å…ƒå­—ç¬¦ è¯´æ˜ * 0ä¸ªæˆ–å¤šä¸ªåŒ¹é… + 1ä¸ªæˆ–å¤šä¸ªåŒ¹é…(ç­‰äº{1,}) ï¼Ÿ 0ä¸ªæˆ–1ä¸ªåŒ¹é…(ç­‰äº{0,1}) {n} æŒ‡å®šæ•°ç›®çš„åŒ¹é… {n,} ä¸å°‘äºæŒ‡å®šæ•°ç›®çš„åŒ¹é… {n,m} åŒ¹é…æ•°ç›®çš„èŒƒå›´(mä¸è¶…è¿‡255) ä¾‹å­ä¸€ï¼šselect id_number from tsc where id_number REGEXP â€˜\\([0-9] sticks?\\)â€™ æ­£åˆ™è¡¨è¾¾å¼\\([0-9] sicks?\\)ï¼Œ \\\\(åŒ¹é…)ï¼Œ [0-9] åŒ¹é…ä»»æ„æ•°å­—ï¼Œsticks?åŒ¹é…stickå’Œsticks(såçš„?ä½¿så¯é€‰)ï¼Œå› ä¸º?åŒ¹é…å®ƒå‰é¢çš„ä»»ä½•å­—ç¬¦çš„0æ¬¡æˆ–1æ¬¡å‡ºç°)ï¼Œ \\?åŒ¹é…)ã€‚æ²¡æœ‰ï¼ŸåŒ¹é…stickå’Œsticksä¼šéå¸¸å›°éš¾ã€‚ ä¾‹å­äºŒ: select id_number from tsc where id_number REGEXP â€˜[[:digit:]]{4}â€™ å®ƒåŒ¹é…ä»»æ„æ•°å­—ã€‚å› è€Œå®ƒä¸ºæ•°å­—çš„ä¸€ä¸ªé›†åˆã€‚{4}ç¡®åˆ‡åœ°è¦æ±‚å®ƒå‰é¢çš„å­—ç¬¦( ä»»æ„æ•°å­—)å‡ºç°4æ¬¡ã€‚ å®šä½ç¬¦å®šä½å…ƒå­—ç¬¦ å…ƒå­—ç¬¦ è¯´æ˜ ^ æ–‡æœ¬çš„å¼€å§‹ $ æ–‡æœ¬çš„ç»“å°¾ [[:&lt;:]] è¯çš„å¼€å§‹ [[:&gt;:]] è¯çš„ç»“å°¾ å¦‚æœä½ æƒ³æ‰¾å‡ºä»¥ä¸€ä¸ªæ•°(åŒ…æ‹¬ä»¥å°æ•°ç‚¹å¼€å§‹çš„æ•°)å¼€å§‹çš„æ‰€æœ‰äº§å“ï¼Œæ€ä¹ˆï¼Ÿç®€å•æœç´¢[0-9\\.] æˆ– [[:digit:]\\.]ä¸è¡Œï¼Œå› ä¸ºå®ƒå°†åœ¨æ–‡æœ¬å†…ä»»æ„ä½ç½®æŸ¥æ‰¾åŒ¹é…ã€‚è§£å†³åŠæ³•æ˜¯ä½¿ç”¨^å®šä½ç¬¦ select id_number from tsc where id_number REGEXP â€˜^[0-9\\.]â€™ ^çš„åŒé‡ç”¨é€” ^æœ‰ä¸¤ç§ç”¨æ³•ã€‚åœ¨é›†åˆä¸­(ç”¨[å’Œ]å®šä¹‰)ï¼Œç”¨å®ƒæ¥å¦å®šè¯¥é›†åˆï¼Œå¦åˆ™ç”¨æ¥æŒ‡ä¸²çš„å¼€å§‹å¤„ã€‚ LIKE åŒ¹é…æ•´ä¸ªä¸²è€ŒREGEXPåŒ¹é…å­—ä¸² ç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å¯ä»¥åœ¨ä¸ä½¿ç”¨æ•°æ®åº“è¡¨çš„æƒ…å†µä¸‹ç”¨é€‰æ‹©æ¥æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼ã€‚REGEXPæ£€æŸ¥æ€»æ˜¯è¿”å›0(æ²¡æœ‰åŒ¹é…)æˆ–1(åŒ¹é…))ã€‚å¯ä»¥ç”¨å¸¦æ–‡å­—ä¸²çš„REGEXPæ¥æµ‹è¯•è¡¨è¾¾å¼å¹¶è¯•éªŒå®ƒä»¬.ç›¸åº”çš„è¯­æ³•å¦‚ä¸‹ï¼šé€‰æ‹© SELECT â€˜HELLOâ€™ REGEXP â€˜[0-9]â€™, è¿™ä¸ªä¾‹å­æ˜¾ç„¶å°†è¿”å›0ï¼ˆå› ä¸ºæ–‡æœ¬HELLOä¸­æ²¡æœ‰æ•°å­—ï¼‰ åˆ›å»ºè®¡ç®—å­—æ®µæ‹¼æ¥å­—æ®µå°†å€¼è¿æ¥åˆ°ä¸€èµ·æ„æˆå•ä¸ªå€¼ å¯ä½¿ç”¨Concat()å‡½æ•°æ¥æ‹¼æ¥ä¸¤ä¸ªåˆ— SELECT Concat(id, id_number) FROM TSC åˆ é™¤æ•°æ®å³ä¾§å¤šä½™çš„ç©ºæ ¼select CONCAT(RTRIM(id ), id_number) from tsc æ‹¼æ¥å‰åˆ é™¤idå³ä¾§å¤šä½™ç©ºæ ¼ select RTRIM(CONCAT(id, id_number ) ) from tsc æ‹¼æ¥ååˆ é™¤å³ä¾§å¤šä½™ç©ºæ ¼ ä½¿ç”¨åˆ«å(alias)AS åˆ«åæœ‰æ—¶ä¹Ÿç§°ä¸ºåˆ°å¤„åˆ— ä½¿ç”¨åˆ«åçš„ä¸¤ä¸ªä¸»è¦ç†ç”±ï¼š ç¼©çŸ­SQLè¯­å¥ã€‚ å…è®¸åœ¨ä¸€æ¡SELECTè¯­å¥ä¸­å¤šæ¬¡ä½¿ç”¨ç›¸åŒçš„è¡¨ã€‚ 12345SELECT cust_name, cust_contact FROM Customers AS C, Orders AS O, OrderItems AS OIWHERE C.cust_id &#x3D; O.cust_idAND OI.order_num &#x3D; O.order_numAND prod_id &#x3D; &#39;RGAN01&#39;; åˆ«åä¸ä»…èƒ½ç”¨äºWHEREå­å¥ï¼Œè¿˜å¯ä»¥ç”¨äºSELECTåˆ—è¡¨ã€ORDER BYå­å¥ä»¥åŠå…¶ä»–è¯­å¥éƒ¨åˆ†ã€‚ æ‰§è¡Œç®—æœ¯è®¡ç®—Select prod_id, quantity, item_price, quantity*item_price AS expanded_price FROM TSC MySQLç®—æœ¯æ“ä½œç¬¦ æ“ä½œç¬¦ è¯´æ˜ + åŠ  - å‡ * ä¹˜ / é™¤ ä½¿ç”¨æ•°æ®å¤„ç†å‡½æ•°ä½¿ç”¨å‡½æ•°SQLæ”¯æŒåˆ©ç”¨å‡½æ•°æ¥å¤„ç†æ•°æ®ã€‚å‡½æ•°ä¸€èˆ¬æ˜¯åœ¨æ•°æ®ä¸Šæ‰§è¡Œçš„ å¤§å¤šæ•°SQLå®ç°æ”¯æŒä»¥ä¸‹ç±»å‹çš„å‡½æ•°ï¼š ç”¨äºå¤„ç†æ–‡æœ¬ä¸²ï¼ˆåˆ é™¤ã€å¡«å……å€¼ã€è½¬æ¢å€¼ä¸ºå¤§å†™æˆ–å°å†™ï¼‰çš„æ–‡æœ¬å‡½æ•°ã€‚ ç”¨äºåœ¨æ•°å€¼æ•°æ®ä¸Šè¿›è¡Œç®—æœ¯æ“ä½œï¼ˆå¦‚è¿”å›ç»å¯¹å€¼ï¼Œè¿›è¡Œä»£æ•°è¿ç®—)çš„æ•°å€¼å‡½æ•°ã€‚ ç”¨äºå¤„ç†æ—¥æœŸå’Œæ—¶é—´å€¼å¹¶ä»è¿™äº›å€¼ä¸­æå–ç‰¹å®šæˆåˆ†ï¼ˆä¾‹å¦‚ï¼Œè¿”å›ä¸¤ä¸ªæ—¥æœŸä¹‹å·®ï¼Œæ£€æŸ¥æ—¥æœŸæœ‰æ•ˆæ€§ç­‰ï¼‰çš„æ—¥æœŸå’Œæ—¶é—´å‡½æ•°ã€‚ è¿”å›DBMSæ­£ä½¿ç”¨çš„ç‰¹æ®Šä¿¡æ¯ï¼ˆå¦‚è¿”å›ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼Œæ£€æŸ¥ç‰ˆæœ¬ç»†èŠ‚)çš„ç³»ç»Ÿå‡½æ•°ã€‚ æ–‡æœ¬å¤„ç†å‡½æ•°RTrim()ã€Upper() Select prod_id, quantity, Upper(item_price), quantity*item_price AS expanded_price FROM TSC å¸¸ç”¨çš„æ–‡æœ¬å¤„ç†å‡½æ•° å‡½æ•° è¯´æ˜ Left() è¿”å›ä¸²å·¦è¾¹çš„å­—ç¬¦ Length() è¿”å›ä¸²çš„é•¿åº¦ Locate() æ‰¾å‡ºä¸²çš„ä¸€ä¸ªå­ä¸² Lower() å°†ä¸²è½¬æ¢ä¸ºå°å†™ LTrim() å»æ‰ä¸²å·¦è¾¹çš„ç©ºæ ¼ Right() è¿”å›ä¸²å³è¾¹çš„å­—ç¬¦ RTrim() å»æ‰ä¸²å³è¾¹çš„ç©ºæ ¼ Soundex() è¿”å›ä¸²çš„SOUNDEXå€¼ SubString() è¿”å›å­ä¸²çš„å­—ç¬¦ Upper å°†ä¸²è½¬æ¢ä¸ºå¤§å†™ æ—¥æœŸå’Œæ—¶é—´å¤„ç†å‡½æ•° å‡½æ•° è¯´æ˜ AddDate() å¢åŠ ä¸€ä¸ªæ—¥æœŸï¼ˆå¤©ã€å‘¨ç­‰) AddTime() å¢åŠ ä¸€ä¸ªæ—¶é—´(æ—¶ã€åˆ†ç­‰) CurDate() è¿”å›å½“å‰æ—¥æœŸ CurTime() è¿”å›å½“å‰æ—¶é—´ Date() è¿”å›æ—¥æœŸæ—¶é—´çš„æ—¥æœŸéƒ¨åˆ† DateDiff() è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹å·® Date_Add() é«˜åº¦çµæ´»çš„æ—¥æœŸè¿ç®—å‡½æ•° Date_Format() è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„æ—¥æœŸæˆ–æ—¶é—´ä¸² Day() è¿”å›ä¸€ä¸ªæ—¥æœŸçš„å¤©æ•°éƒ¨åˆ† DaofOfWeek() å¯¹äºä¸€ä¸ªæ—¥æœŸï¼Œè¿”å›å¯¹åº”çš„æ˜ŸæœŸå‡  Hour() è¿”å›ä¸€ä¸ªæ—¶é—´çš„å°æ—¶éƒ¨åˆ† Minute() è¿”å›ä¸€ä¸ªæ—¶é—´çš„åˆ†é’Ÿéƒ¨åˆ† Month() è¿”å›ä¸€ä¸ªæ—¥æœŸçš„æœˆä»½éƒ¨åˆ† Now() è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´ Second() è¿”å›ä¸€ä¸ªæ—¶é—´çš„ç§’éƒ¨åˆ† Time() è¿”å›ä¸€ä¸ªæ—¥æœŸæ—¶é—´çš„æ—¶é—´éƒ¨åˆ† Year() è¿”å›ä¸€ä¸ªæ—¥æœŸçš„å¹´ä»½éƒ¨åˆ† æ³¨æ„MySQLä½¿ç”¨çš„æ—¥æœŸæ ¼å¼ï¼Œæ— è®ºä½ ä»€ä¹ˆæ—¶å€™æŒ‡å®šä¸€ä¸ªæ—¥æœŸï¼Œä¸ç®¡æ˜¯æ’å…¥æˆ–æ›´æ–°è¡¨å€¼è¿˜æ˜¯ç”¨WHEREå­å¥è¿›è¡Œè¿‡æ»¤ï¼Œæ—¥æœŸå¿…é¡»ä¸ºæ ¼å¼yyyy-mm-ddã€‚å› æ­¤ï¼Œ2005å¹´9æœˆ1æ—¥ï¼Œç»™å‡ºä¸º2005-09-01.è™½ç„¶å…¶ä»–çš„æ—¥æœŸæ ¼å¼å¯èƒ½ä¹Ÿè¡Œï¼Œä½†è¿™æ˜¯é¦–é€‰çš„æ—¥æœŸæ ¼å¼ï¼Œå› ä¸ºå®ƒæ’é™¤äº†å¤šä¹‰æ€§ï¼ˆå¦‚ï¼Œ04/05/6æ˜¯2006å¹´5æœˆ4æ—¥æˆ–2006å¹´4æœˆ5æ—¥æˆ–2004å¹´5æœˆ6æ—¥æˆ–Â·Â·Â·Â·Â·ï¼‰ åº”è¯¥æ€»æ˜¯ä½¿ç”¨4ä½æ•°å­—çš„å¹´ä»½ æ”¯æŒ2ä½æ•°å­—çš„å¹´ä»½,MySQLå¤„ç†00-69ä¸º2000-2069ï¼Œå¤„ç†70-99ä¸º1970-1999ã€‚è™½ç„¶å®ƒä»¬å¯èƒ½æ˜¯æ‰“ç®—è¦çš„å¹´ä»½,ä½†ä½¿ç”¨å®Œæ•´çš„4ä½æ•°å­—å¹´ä»½æ›´å¯é ï¼Œå› ä¸ºÂ·MySQLä¸å¿…åšå‡ºä»»ä½•å‡å®šã€‚ *select * from tsc where order_date = â€˜2005-09-01â€™* ä½†æ˜¯ï¼Œä½¿ç”¨WHERE order_date = â€˜2005-09-01â€™å¯é å—? order_ dateçš„æ•°æ®ç±»å‹ä¸ºdatetimeã€‚è¿™ç§ç±»å‹å­˜å‚¨æ—¥æœŸåŠæ—¶é—´å€¼ã€‚æ ·ä¾‹è¡¨ä¸­çš„å€¼å…¨éƒ½å…·æœ‰æ—¶é—´å€¼00:00:00,ä½†å®é™…ä¸­å¾ˆå¯èƒ½å¹¶ä¸æ€»æ˜¯è¿™æ ·ã€‚å¦‚æœç”¨å½“å‰æ—¥æœŸå’Œæ—¶é—´å­˜å‚¨è®¢å•æ—¥æœŸï¼ˆå› æ­¤ä½ ä¸ä»…çŸ¥é“è®¢å•æ—¥æœŸï¼Œè¿˜çŸ¥é“ä¸‹è®¢å•å½“å¤©çš„æ—¶é—´)ï¼Œæ€ä¹ˆåŠ?æ¯”å¦‚ï¼Œå­˜å‚¨çš„order_dateå€¼ä¸º2005-09-01 11:30:05ï¼Œåˆ™WHERE order date = â€˜2005-09-01â€™å¤±è´¥ã€‚å³ä½¿ç»™å‡ºå…·æœ‰è¯¥æ—¥æœŸçš„ä¸€è¡Œï¼Œä¹Ÿä¸ä¼šæŠŠå®ƒæ£€ç´¢å‡ºæ¥ï¼Œå› ä¸ºWHEREåŒ¹é…å¤±è´¥ã€‚è§£å†³åŠæ³•æ˜¯æŒ‡ç¤ºMySQLä»…å°†ç»™å‡ºçš„æ—¥æœŸä¸åˆ—ä¸­çš„æ—¥æœŸéƒ¨åˆ†è¿›è¡Œæ¯”è¾ƒï¼Œè€Œä¸æ˜¯å°†ç»™å‡ºçš„æ—¥æœŸä¸æ•´ä¸ªåˆ—å€¼è¿›è¡Œæ¯”è¾ƒã€‚ä¸ºæ­¤ï¼Œå¿…é¡»ä½¿ç”¨Date()å‡½æ•°ã€‚Date(order _date)æŒ‡ç¤ºMySQLä»…æå–åˆ—çš„æ—¥æœŸéƒ¨åˆ†ï¼Œæ›´å¯é çš„SELECTè¯­å¥ä¸º: *select * from tsc where Date(order_date ) = â€˜2005-09-01â€™* å¦‚æœè¦çš„æ˜¯æ—¥æœŸï¼Œè¯·ä½¿ç”¨Date() å¦‚æœä½ æƒ³è¦çš„ä»…æ˜¯æ—¥æœŸ,åˆ™ä½¿ç”¨Date()æ˜¯ä¸€ä¸ªè‰¯å¥½çš„ä¹ æƒ¯,å³ä½¿ä½ çŸ¥é“ç›¸åº”çš„åˆ—åªåŒ…å«æ—¥æœŸä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™æ ·,å¦‚æœç”±äºæŸç§åŸå› è¡¨ä¸­ä»¥åæœ‰æ—¥æœŸå’Œæ—¶é—´å€¼,ä½ çš„SQLä»£ç ä¹Ÿä¸ç”¨æ”¹å˜ã€‚å½“ç„¶ï¼Œä¹Ÿå­˜åœ¨ä¸€ä¸ªTime()å‡½æ•°,åœ¨ä½ åªæƒ³è¦æ—¶é—´æ—¶åº”è¯¥ä½¿ç”¨å®ƒã€‚Date()å’ŒTime()éƒ½æ˜¯åœ¨MySQL 4.1.1ä¸­ç¬¬ä¸€æ¬¡å¼•å…¥çš„ã€‚ è¿˜æœ‰ä¸€ç§æ—¥æœŸæ¯”è¾ƒéœ€è¦è¯´æ˜ã€‚å¦‚æœä½ æƒ³æ£€ç´¢å‡º2005å¹´9æœˆä¸‹çš„æ‰€æœ‰è®¢å•ï¼Œæ€ä¹ˆåŠ?ç®€å•çš„ç›¸ç­‰æµ‹è¯•ä¸è¡Œï¼Œå› ä¸ºå®ƒä¹Ÿè¦åŒ¹é…æœˆä»½ä¸­çš„å¤©æ•°ã€‚æœ‰å‡ ç§è§£å†³åŠæ³•,å…¶ä¸­ä¹‹ä¸€å¦‚ä¸‹æ‰€ç¤º: *select * from tsc where Date(order_date ) = BETWEEN â€˜2005-09-01â€™ AND â€˜2005-09-30â€™* å…¶ä¸­ï¼ŒBETWEENæ“ä½œç¬¦ç”¨æ¥æŠŠ2005-09-01å’Œ2005-09-30å®šä¹‰ä¸ºä¸€ä¸ªè¦åŒ¹é…çš„æ—¥æœŸèŒƒå›´ã€‚ è¿˜æœ‰å¦å¤–ä¸€ç§åŠæ³•ï¼ˆä¸€ç§ä¸éœ€è¦è®°ä½æ¯ä¸ªæœˆä¸­æœ‰å¤šå°‘å¤©æˆ–ä¸éœ€è¦æ“å¿ƒé—°å¹´2æœˆçš„åŠæ³•): *select * from tsc where Date(order_date ) = Yead(order_date) = 2005 and Month(order_date) = 9* æ•°å€¼å¤„ç†å‡½æ•° å‡½æ•° è¯´æ˜ Abs() è¿”å›ä¸€ä¸ªæ•°çš„ç»å¯¹å€¼ Cos() è¿”å›ä¸€ä¸ªè§’åº¦çš„ä½™å¼¦ Exp() è¿”å›ä¸€ä¸ªæ•°çš„æŒ‡æ•°å€¼ Mod() è¿”å›é™¤æ“ä½œçš„ä½™æ•° Pi() è¿”å›åœ†å‘¨ç‡ Rand() è¿”å›ä¸€ä¸ªéšæœºæ•° Sin() è¿”å›ä¸€ä¸ªè§’åº¦çš„æ­£å¼¦ Sqrt() è¿”å›ä¸€ä¸ªæ•°çš„å¹³æ–¹æ ¹ Tan() è¿”å›ä¸€ä¸ªè§’åº¦çš„æ­£åˆ‡ æ±‡æ€»æ•°æ®èšé›†å‡½æ•°(aggregate function) è¿è¡Œåœ¨è¡Œç»„ä¸Šï¼Œè®¡ç®—å’Œè¿”å›å•ä¸ªå€¼çš„å‡½æ•°æˆ‘ä»¬ç»å¸¸éœ€è¦æ±‡æ€»æ•°æ®è€Œä¸ç”¨æŠŠå®ƒä»¬å®é™…æ£€ç´¢å‡ºæ¥ï¼Œä¸ºæ­¤MySQLæä¾›äº†ä¸“é—¨çš„å‡½æ•°ã€‚ä½¿ç”¨è¿™äº›å‡½æ•°ï¼ŒMySQLæŸ¥è¯¢å¯ç”¨äºæ£€ç´¢æ•°æ®ï¼Œä»¥ä¾¿åˆ†æå’ŒæŠ¥è¡¨ç”Ÿæˆã€‚è¿™ç§ç±»å‹çš„æ£€ç´¢ä¾‹å­æœ‰ä»¥ä¸‹å‡ ç§ã€‚ ç¡®å®šè¡¨ä¸­è¡Œæ•°(æˆ–è€…æ»¡è¶³æŸä¸ªæ¡ä»¶æˆ–åŒ…å«æŸä¸ªç‰¹å®šå€¼çš„è¡Œæ•°)ã€‚ è·å¾—è¡¨ä¸­è¡Œç»„çš„å’Œã€‚ æ‰¾å‡ºè¡¨åˆ—(æˆ–æ‰€æœ‰è¡Œæˆ–æŸäº›ç‰¹å®šçš„è¡Œï¼‰çš„æœ€å¤§å€¼ã€æœ€å°å€¼å’Œå¹³å‡å€¼ã€‚ ä¸Šè¿°ä¾‹å­éƒ½éœ€è¦å¯¹è¡¨ä¸­æ•°æ®ï¼ˆè€Œä¸æ˜¯å®é™…æ•°æ®æœ¬èº«ï¼‰æ±‡æ€»ã€‚å› æ­¤ï¼Œè¿”å›å®é™…è¡¨æ•°æ®æ˜¯å¯¹æ—¶é—´å’Œå¤„ç†èµ„æºçš„ä¸€ç§æµªè´¹ï¼ˆæ›´ä¸ç”¨è¯´å¸¦å®½äº†)ã€‚é‡å¤ä¸€éï¼Œå®é™…æƒ³è¦çš„æ˜¯æ±‡æ€»ä¿¡æ¯ã€‚ä¸ºæ–¹ä¾¿è¿™ç§ç±»å‹çš„æ£€ç´¢ï¼ŒMySQLç»™å‡ºäº†5ä¸ªèšé›†å‡½æ•°ï¼Œè¿™äº›å‡½æ•°èƒ½è¿›è¡Œä¸Šè¿°ç½—åˆ—çš„æ£€ç´¢ã€‚ å‡½æ•° è¯´æ˜ AVG() è¿”å›æŸåˆ—çš„å¹³å‡å€¼ COUNT() è¿”å›æŸåˆ—çš„è¡Œæ•° MAX() è¿”å›æŸåˆ—çš„æœ€å¤§å€¼ MIN() è¿”å›æŸåˆ—çš„æœ€å°å€¼ SUM() è¿”å›æŸåˆ—å€¼ä¹‹å’Œ AVGå‡½æ•°AVG()é€šè¿‡å¯¹è¡¨ä¸­è¡Œæ•°è®¡æ•°å¹¶è®¡ç®—ç‰¹å®šåˆ—å€¼ä¹‹å’Œï¼Œæ±‚å¾—è¯¥åˆ—çš„å¹³å‡å€¼ã€‚AVG ()å¯ç”¨æ¥è¿”å›æ‰€æœ‰åˆ—çš„å¹³å‡å€¼ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥è¿”å›ç‰¹å®šåˆ—æˆ–è¡Œ**(whereæ¡ä»¶)**çš„å¹³å‡å€¼ã€‚ SELECT AVG(prod_priceï¼‰ AS avg_price FROM products; **åªç”¨äºå•ä¸ªåˆ—AVG() ** åªèƒ½ç”¨æ¥ç¡®å®šç‰¹å®šæ•°å€¼åˆ—çš„å¹³å‡å€¼,è€Œä¸”åˆ—åå¿…é¡»ä½œä¸ºå‡½æ•°å‚æ•°ç»™å‡º,ä¸ºäº†è·å¾—å¤šä¸ªåˆ—çš„å¹³å‡å€¼ï¼Œå¿…é¡»ä½¿ç”¨å¤šä¸ªAVG()å‡½æ•°ã€‚ NULLå€¼ AVG()å‡½æ•°å¿½ç•¥åˆ—å€¼ä¸ºNULLçš„è¡Œã€‚ COUNT()å‡½æ•°COUNT()å‡½æ•°è¿›è¡Œè®¡æ•°ã€‚å¯åˆ©ç”¨COUNT ()ç¡®å®šè¡¨ä¸­è¡Œçš„æ•°ç›®æˆ–ç¬¦åˆç‰¹å®šæ¡ä»¶çš„è¡Œçš„æ•°ç›®ã€‚ COUNT ()å‡½æ•°æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ã€‚ ä½¿ç”¨COUNT(*)å¯¹è¡¨ä¸­è¡Œçš„æ•°ç›®è¿›è¡Œè®¡æ•°,ä¸ç®¡è¡¨åˆ—ä¸­åŒ…å«çš„æ˜¯ç©ºå€¼ï¼ˆNULLï¼‰è¿˜æ˜¯éç©ºå€¼ã€‚ SELECT COUNT( *) AS num_cust FROM customers; ä½¿ç”¨COUNT(column)å¯¹ç‰¹å®šåˆ—ä¸­å…·æœ‰å€¼çš„è¡Œè¿›è¡Œè®¡æ•°ï¼Œå¿½ç•¥NULLå€¼ã€‚ SELECT COUNT( cust_email) AS num_cust FROM customers; NULLå€¼ å¦‚æœæŒ‡å®šåˆ—åï¼Œåˆ™æŒ‡å®šåˆ—çš„å€¼ä¸ºç©ºçš„è¡Œè¢«COUNT()å‡½æ•°å¿½ç•¥,ä½†å¦‚æœCOUNT()å‡½æ•°ä¸­ç”¨çš„æ˜¯æ˜Ÿå·(*),åˆ™ä¸å¿½ç•¥ã€‚ MAX()å‡½æ•°MAX()è¿”å›æŒ‡å®šåˆ—ä¸­çš„æœ€å¤§å€¼ã€‚MAX()è¦æ±‚æŒ‡å®šåˆ—å, å¯¹éæ•°å€¼æ•°æ®ä½¿ç”¨MAX()è™½ç„¶MAX()ä¸€èˆ¬ç”¨æ¥æ‰¾å‡ºæœ€å¤§çš„æ•°å€¼æˆ–æ—¥æœŸå€¼,ä½†MySQLå…è®¸å°†å®ƒç”¨æ¥è¿”å›ä»»æ„åˆ—ä¸­çš„æœ€å¤§å€¼ï¼ŒåŒ…æ‹¬è¿”å›æ–‡æœ¬åˆ—ä¸­çš„æœ€å¤§å€¼ã€‚åœ¨ç”¨äºæ–‡æœ¬æ•°æ®æ—¶,å¦‚æœæ•°æ®æŒ‰ç›¸åº”çš„åˆ—æ’åºï¼Œåˆ™MAX()è¿”å›æœ€åä¸€è¡Œã€‚ NULLå€¼ MAX()å‡½æ•°å¿½ç•¥åˆ—å€¼ä¸ºNULLçš„è¡Œ MIN()å‡½æ•°MIN()çš„åŠŸèƒ½æ­£å¥½ä¸MAX(ï¼‰åŠŸèƒ½ç›¸åï¼Œå®ƒè¿”å›æŒ‡å®šåˆ—çš„æœ€å°å€¼ã€‚ä¸MAX()ä¸€æ ·ï¼ŒMIN(ï¼‰è¦æ±‚æŒ‡å®šåˆ—å å¯¹éæ•°å€¼æ•°æ®ä½¿ç”¨MIN() MIN(ï¼‰å‡½æ•°ä¸MAX()å‡½æ•°ç±»ä¼¼,MySQLå…è®¸å°†å®ƒç”¨æ¥è¿”å›ä»»æ„åˆ—ä¸­çš„æœ€å°å€¼,åŒ…æ‹¬è¿”å›æ–‡æœ¬åˆ—ä¸­çš„æœ€å°å€¼ã€‚åœ¨ç”¨äºæ–‡æœ¬æ•°æ®æ—¶,å¦‚æœæ•°æ®æŒ‰ç›¸åº”çš„åˆ—æ’åºï¼Œåˆ™MIN()è¿”å›æœ€å‰é¢çš„è¡Œã€‚NULLå€¼ MIN()å‡½æ•°å¿½ç•¥åˆ—å€¼ä¸ºNULLçš„è¡Œã€‚SUM()å‡½æ•°SUM()ç”¨æ¥è¿”å›æŒ‡å®šåˆ—å€¼çš„å’Œï¼ˆæ€»è®¡ï¼‰ NULLå€¼ SUM()å‡½æ•°å¿½ç•¥åˆ—å€¼ä¸ºNULLçš„è¡Œã€‚ åˆ©ç”¨æ ‡å‡†çš„ç®—æœ¯æ“ä½œç¬¦ï¼Œæ‰€æœ‰èšé›†å‡½æ•°éƒ½å¯ç”¨æ‰§è¡Œå¤šä¸ªåˆ—ä¸Šçš„è®¡ç®—èšé›†ä¸åŒå€¼DISTINCT ä»¥ä¸Š5ä¸ªèšé›†å‡½æ•°éƒ½å¯ä»¥å¦‚ä¸‹ä½¿ç”¨: å¯¹æ‰€æœ‰çš„è¡Œæ‰§è¡Œè®¡ç®—ï¼ŒæŒ‡å®šALLå‚æ•°æˆ–ä¸ç»™å‚æ•°(å› ä¸ºALLæ˜¯é»˜è®¤è¡Œä¸º); åªåŒ…å«ä¸åŒçš„å€¼ï¼ŒæŒ‡å®šDISTINCTå‚æ•°ã€‚ ALLä¸ºé»˜è®¤ALLå‚æ•°ä¸éœ€è¦æŒ‡å®š,å› ä¸ºå®ƒæ˜¯é»˜è®¤è¡Œä¸ºã€‚å¦‚æœä¸æŒ‡å®šDISTINCT,åˆ™å‡å®šä¸ºALLã€‚ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨AVG ()å‡½æ•°è¿”å›ç‰¹å®šä¾›åº”å•†æä¾›çš„äº§å“çš„å¹³å‡ä»·æ ¼ã€‚å®ƒä¸ä¸Šé¢çš„SELECTè¯­å¥ç›¸åŒï¼Œä½†ä½¿ç”¨äº†DISTINCTå‚æ•°ï¼Œå› æ­¤å¹³å‡å€¼åªè€ƒè™‘å„ä¸ªä¸åŒçš„ä»·æ ¼: SELECT AVG(DISTINCT prod_price) AS avg price FROM products WHERE vend_id = 1003; æ³¨æ„ å¦‚æœæŒ‡å®šåˆ—å,åˆ™DISTINCTåªèƒ½ç”¨äºCOUNT(). DISTINCTä¸èƒ½ç”¨äºCOUNT(*),å› æ­¤ä¸å…è®¸ä½¿ç”¨COUNT (DISTINCT) ï¼Œ,å¦åˆ™ä¼šäº§ç”Ÿé”™è¯¯ã€‚ç±»ä¼¼åœ°,DISTINCTå¿…é¡»ä½¿ç”¨åˆ—åï¼Œä¸èƒ½ç”¨äºè®¡ç®—æˆ–è¡¨è¾¾å¼ã€‚ å°†DISTINCTç”¨äºMIN()å’ŒMAX() è™½ç„¶DISTINCTä»æŠ€æœ¯ä¸Šå¯ç”¨äºMIN()å’ŒMAX(),ä½†è¿™æ ·åšå®é™…ä¸Šæ²¡æœ‰ä»·å€¼ã€‚ä¸€ä¸ªåˆ—ä¸­çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ä¸ç®¡æ˜¯å¦åŒ…å«ä¸åŒå€¼éƒ½æ˜¯ç›¸åŒçš„ã€‚ ç»„åˆèšé›†å‡½æ•°ç›®å‰ä¸ºæ­¢çš„æ‰€æœ‰èšé›†å‡½æ•°ä¾‹å­éƒ½åªæ¶‰åŠå•ä¸ªå‡½æ•°ã€‚ä½†å®é™…ä¸ŠSELECTè¯­å¥å¯æ ¹æ®éœ€è¦åŒ…å«å¤šä¸ªèšé›†å‡½æ•°ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­: SELECT COUNT(*) AS num_items,MIN(prod_price) AS price_min,MAX (prod_price) AS price_max,AVG(prod_price) AS price_avgFROM products; è¿™é‡Œç”¨å•æ¡SELECTè¯­å¥æ‰§è¡Œäº†4ä¸ªèšé›†è®¡ç®—ï¼Œè¿”å›4ä¸ªå€¼(productsè¡¨ä¸­ç‰©å“çš„æ•°ç›®ï¼Œäº§å“ä»·æ ¼çš„æœ€é«˜ã€æœ€ä½ä»¥åŠå¹³å‡å€¼)ã€‚ å–åˆ«å åœ¨æŒ‡å®šåˆ«åä»¥åŒ…å«æŸä¸ªèšé›†å‡½æ•°çš„ç»“æœæ—¶,ä¸åº”è¯¥ä½¿ç”¨è¡¨ä¸­å®é™…çš„åˆ—å,è™½ç„¶è¿™æ ·åšå¹¶éä¸åˆæ³•,ä½†ä½¿ç”¨å”¯ä¸€çš„åå­—ä¼šä½¿ä½ çš„SQLæ›´æ˜“äºç†è§£å’Œä½¿ç”¨(ä»¥åŠå°†æ¥å®¹æ˜“æ’é™¤æ•…éšœï¼‰. åˆ†ç»„æ•°æ®æœ¬ç« å°†ä»‹ç»å¦‚ä½•åˆ†ç»„æ•°æ®,ä»¥ä¾¿èƒ½æ±‡æ€»è¡¨å†…å®¹çš„å­é›†ã€‚è¿™æ¶‰åŠä¸¤ä¸ªæ–°SELECTè¯­å¥å­å¥ï¼Œåˆ†åˆ«æ˜¯GROUP BYå­å¥å’ŒHAVINGå­å¥ã€‚ ä»ä¸Šä¸€ç« çŸ¥é“ï¼ŒSQLèšé›†å‡½æ•°å¯ç”¨æ¥æ±‡æ€»æ•°æ®ã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿå¯¹è¡Œè¿›è¡Œè®¡æ•°ï¼Œè®¡ç®—å’Œä¸å¹³å‡æ•°ï¼Œè·å¾—æœ€å¤§å’Œæœ€å°å€¼è€Œä¸ç”¨æ£€ç´¢æ‰€æœ‰æ•°æ®ã€‚ ç›®å‰ä¸ºæ­¢çš„æ‰€æœ‰è®¡ç®—éƒ½æ˜¯åœ¨è¡¨çš„æ‰€æœ‰æ•°æ®æˆ–åŒ¹é…ç‰¹å®šçš„WHEREå­å¥çš„æ•°æ®ä¸Šè¿›è¡Œçš„ã€‚æç¤ºä¸€ä¸‹ï¼Œä¸‹é¢çš„ä¾‹å­è¿”å›ä¾›åº”å•†1003æä¾›çš„äº§å“æ•°ç›®: *SELECT COUNT() AS num_prods FROM products WHERE vend_id = 1003;** ä½†å¦‚æœè¦è¿”å›æ¯ä¸ªä¾›åº”å•†æä¾›çš„äº§å“æ•°ç›®æ€ä¹ˆåŠ?æˆ–è€…è¿”å›åªæä¾›å•é¡¹äº§å“çš„ä¾›åº”å•†æ‰€æä¾›çš„äº§å“ï¼Œæˆ–è¿”å›æä¾›10ä¸ªä»¥ä¸Šäº§å“çš„ä¾›åº”å•†æ€ä¹ˆåŠ? è¿™å°±æ˜¯åˆ†ç»„æ˜¾èº«æ‰‹çš„æ—¶å€™äº†ã€‚åˆ†ç»„å…è®¸æŠŠæ•°æ®åˆ†ä¸ºå¤šä¸ªé€»è¾‘ç»„ï¼Œä»¥ä¾¿èƒ½å¯¹æ¯ä¸ªç»„è¿›è¡Œèšé›†è®¡ç®—ã€‚ åˆ›å»ºåˆ†ç»„GROUP BY SELECT vend_id, COUNT(*) AS num_prods FROM products GROUP BY vend_id; ä¸Šé¢çš„SELECTè¯­å¥æŒ‡å®šäº†ä¸¤ä¸ªåˆ—ï¼Œvend_idåŒ…å«äº§å“ä¾›åº”å•†çš„IDï¼Œnum prodsä¸ºè®¡ç®—å­—æ®µ(ç”¨COUNT(*)å‡½æ•°å»ºç«‹)ã€‚GROUP BYå­å¥æŒ‡ç¤ºMySQLæŒ‰vend_idæ’åºå¹¶åˆ†ç»„æ•°æ®ã€‚è¿™å¯¼è‡´å¯¹æ¯ä¸ªvend_idè€Œä¸æ˜¯æ•´ä¸ªè¡¨è®¡ç®—num _prodsä¸€æ¬¡ã€‚ åœ¨å…·ä½“ä½¿ç”¨GROUP BYå­å¥å‰ï¼Œéœ€è¦çŸ¥é“ä¸€äº›é‡è¦çš„è§„å®šã€‚ GROUP BYå­å¥å¯ä»¥åŒ…å«ä»»æ„æ•°ç›®çš„åˆ—ã€‚è¿™ä½¿å¾—èƒ½å¯¹åˆ†ç»„è¿›è¡ŒåµŒå¥—ï¼Œä¸ºæ•°æ®åˆ†ç»„æä¾›æ›´ç»†è‡´çš„æ§åˆ¶ã€‚ å¦‚æœåœ¨GROUP BYå­å¥ä¸­åµŒå¥—äº†åˆ†ç»„ï¼Œæ•°æ®å°†åœ¨æœ€åè§„å®šçš„åˆ†ç»„ä¸Šè¿›è¡Œæ±‡æ€»ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨å»ºç«‹åˆ†ç»„æ—¶ï¼ŒæŒ‡å®šçš„æ‰€æœ‰åˆ—éƒ½ä¸€èµ·è®¡ç®—(æ‰€ä»¥ä¸èƒ½ä»ä¸ªåˆ«çš„åˆ—å–å›æ•°æ®)ã€‚ GROUP BYå­å¥ä¸­åˆ—å‡ºçš„æ¯ä¸ªåˆ—éƒ½å¿…é¡»æ˜¯æ£€ç´¢åˆ—æˆ–æœ‰æ•ˆçš„è¡¨è¾¾å¼ (ä½†ä¸èƒ½æ˜¯èšé›†å‡½æ•°)ã€‚ å¦‚æœåœ¨SELECTä¸­ä½¿ç”¨è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»åœ¨GROUP BYå­å¥ä¸­æŒ‡å®šç›¸åŒçš„è¡¨è¾¾å¼ã€‚ä¸èƒ½ä½¿ç”¨åˆ«åã€‚ é™¤èšé›†è®¡ç®—è¯­å¥å¤–ï¼ŒSELECTè¯­å¥ä¸­çš„æ¯ä¸ªåˆ—éƒ½å¿…é¡»åœ¨GROUP BYå­å¥ä¸­ç»™å‡ºã€‚ å¦‚æœåˆ†ç»„åˆ—ä¸­å…·æœ‰NULLå€¼ï¼Œåˆ™NULLå°†ä½œä¸ºä¸€ä¸ªåˆ†ç»„è¿”å›ã€‚å¦‚æœåˆ—ä¸­æœ‰å¤šè¡ŒNULLå€¼,å®ƒä»¬å°†åˆ†ä¸ºä¸€ç»„ã€‚ GROUP BYå­å¥å¿…é¡»å‡ºç°åœ¨WHEREå­å¥ä¹‹åï¼ŒORDER BYå­å¥ä¹‹å‰ã€‚ ä½¿ç”¨ROLLUPä½¿ç”¨WITH ROLLUPå…³é”®å­—, å¯ä»¥å¾—åˆ°æ¯ä¸ªåˆ†ç»„ä»¥åŠæ¯ä¸ªåˆ†ç»„æ±‡æ€»çº§åˆ«(é’ˆå¯¹æ¯ä¸ªåˆ†ç»„)çš„å€¼,å¦‚ä¸‹æ‰€ç¤º: SELECT vend_idï¼ŒCOUNT(*) AS num_prods FROM products GROUP BY vend id WITH ROLLUP;è¿‡æ»¤åˆ†ç»„é™¤äº†ä½¿ç”¨GROUP BYåˆ†ç»„æ•°æ®ï¼ŒMySQLè¿˜å…è®¸è¿‡æ»¤åˆ†ç»„ã€‚è§„å®šåŒ…æ‹¬å“ªäº›åˆ†ç»„ï¼Œæ’é™¤å“ªäº›åˆ†ç»„ æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†WHEREå­å¥çš„ä½œç”¨ï¼ˆç¬¬6ç« ä¸­å¼•å…¥)ã€‚ä½†æ˜¯ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­WHEREä¸èƒ½å®Œæˆä»»åŠ¡ï¼Œå› ä¸ºWHEREè¿‡æ»¤æŒ‡å®šçš„æ˜¯è¡Œè€Œä¸æ˜¯åˆ†ç»„ã€‚äº‹å®ä¸Šï¼ŒWHEREæ²¡æœ‰åˆ†ç»„çš„æ¦‚å¿µã€‚ ä½¿ç”¨HAVINGï¼ˆHAVINGæ”¯æŒæ‰€æœ‰çš„WHEREæ“ä½œç¬¦ï¼‰ SELECT cust_idï¼ŒCOUNT() AS orders FROM orders GROUP BY cust_id HAVING COUNT() &gt;- 2; å®ƒè¿‡æ»¤COUNT(*) &gt;= 2 (ä¸¤ä¸ªä»¥ä¸Šçš„è®¢å•)çš„é‚£äº›åˆ†ç»„ åˆ†ç»„å’Œæ’åºè™½ç„¶GROUP BYå’ŒORDER BYç»å¸¸å®Œæˆç›¸åŒçš„å·¥ä½œï¼Œä½†å®ƒä»¬æ˜¯éå¸¸ä¸åŒçš„ã€‚ ORDER BY GROUP BY æ’åºäº§ç”Ÿçš„è¾“å‡º åˆ†ç»„è¡Œã€‚ä½†è¾“å‡ºå¯èƒ½ä¸æ˜¯åˆ†ç»„çš„æ’åº ä»»æ„åˆ—éƒ½å¯ä»¥ä½¿ç”¨ï¼ˆç”šè‡³éé€‰æ‹©çš„åˆ—ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼‰ åªå¯èƒ½ä½¿ç”¨é€‰æ‹©åˆ—æˆ–è¡¨è¾¾å¼åˆ—ï¼Œè€Œä¸”å¿…é¡»ä½¿ç”¨æ¯ä¸ªé€‰æ‹©åˆ—è¡¨è¾¾å¼ ä¸ä¸€å®šéœ€è¦ å¦‚æœä¸èšé›†å‡½æ•°ä¸€èµ·ä½¿ç”¨åˆ—ï¼ˆæˆ–è¡¨è¾¾å¼ï¼‰ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ ä¸è¦å¿˜è®°ORDER BY ä¸€èˆ¬åœ¨ä½¿ç”¨GROUP BYå­å¥æ—¶ï¼Œåº”è¯¥ä¹Ÿç»™å‡ºORDER BYå­å¥ã€‚è¿™æ˜¯ä¿è¯æ•°æ®æ­£ç¡®æ’åºçš„å”¯ä¸€æ–¹æ³•ï¼Œåƒä¸‡ä¸è¦ä»…ä¾èµ–GROUP BYæ’åºæ•°æ®ã€‚ SELECTå­å¥é¡ºåº å­å¥ è¯´æ˜ æ˜¯å¦å¿…é¡» SELECT è¦è¿”å›çš„åˆ—æˆ–è¡¨è¾¾å¼ æ˜¯ FROM ä»ä¸­æ£€ç´¢æ•°æ®çš„è¡¨ ä»…åœ¨ä»è¡¨é€‰æ‹©æ•°æ®æ—¶ä½¿ç”¨ WHERE è¡Œçº§è¿‡æ»¤ å¦ GROUP BY åˆ†ç»„è¯´æ˜ ä»…åœ¨æŒ‰ç»„è®¡ç®—èšé›†æ—¶ä½¿ç”¨ HAVING ç»„çº§è¿‡æ»¤ å¦ ORDER BY è¾“å‡ºæ’åºé¡ºåº å¦ ä½¿ç”¨å­æŸ¥è¯¢æŸ¥è¯¢ï¼ˆqueryï¼‰ï¼šä»»ä½•SQLè¯­å¥éƒ½æ˜¯æŸ¥è¯¢ï¼Œä½†ä¸€èˆ¬æŒ‡SELECTè¯­å¥ã€‚ SQLè¿˜å…è®¸åˆ›å»ºå­æŸ¥è¯¢ï¼ˆsubqueryï¼‰ï¼Œå³åµŒå¥—åœ¨å…¶ä»–æŸ¥è¯¢ä¸­çš„æŸ¥è¯¢ã€‚ ä½¿ç”¨å­æŸ¥è¯¢è¿›è¡Œè¿‡æ»¤è®¢å•å­˜å‚¨åœ¨è¿ä¸ªè¡¨ä¸­ã€‚æ¯ä¸ªè®¢å•åŒ…å«è®¢å•ç¼–å·ã€é¡¾å®¢IDã€è®¢å•æ—¥æœŸï¼Œåœ¨Ordersè¡¨ä¸­å­˜å‚¨ä¸ºä¸€è¡Œï¼Œå„è®¢å•çš„ç‰©å“å­˜å‚¨åœ¨ç›¸å…³çš„OrderItemsè¡¨ä¸­ã€‚Ordersè¡¨ä¸å­˜å‚¨é¡¾å®¢ä¿¡æ¯ï¼Œåªå­˜å‚¨é¡¾å®¢IDã€‚é¡¾å®¢çš„å®é™…ä¿¡æ¯å­˜å‚¨åœ¨Customersè¡¨ä¸­ã€‚ ç°åœ¨ï¼Œå‡å¦‚éœ€è¦åˆ—å‡ºè®¢è´­ç‰©å“RGAN01çš„æ‰€æœ‰é¡¾å®¢ï¼Œåº”è¯¥æ€æ ·æ£€ç´¢ï¼Ÿä¸‹é¢åˆ—å‡ºå…·ä½“çš„æ­¥éª¤ã€‚ æ£€ç´¢åŒ…å«ç‰©å“RGAN01çš„æ‰€æœ‰è®¢å•çš„ç¼–å·ã€‚ æ£€ç´¢å…·æœ‰å‰ä¸€æ­¥éª¤åˆ—å‡ºçš„è®¢å•çš„æ‰€æœ‰é¡¾å®¢çš„IDã€‚ æ£€ç´¢å‰ä¸€æ­¥éª¤è¿”å›çš„æ‰€æœ‰é¡¾å®¢IDçš„é¡¾å®¢ä¿¡æ¯ã€‚ ä¸‰æ­¥:1234567891011SELECT order_num FROM OrderItemsWHERE prod_id &#x3D; &#39;RGAN01&#39;;SELECT cust_id FROM OrdersWHERE order_num IN (20007, 20008);SELECT cust_name, cust_contact FROM CustomersWHERE cust_id IN (&#39;1000000004&#39;, &#39;1000000005&#39;); åˆå¹¶æˆä¸€å¥:1234567SELECT cust_name, cust_contact FROM CustomersWHERE cust_id IN ( SELECT cust_id FROM Orders WHERE order_num IN ( SELECT order_num FROM OrderItems WHERE prod_id &#x3D; &#39;RGAN01&#39;)); æ ¼å¼åŒ–SQL åŒ…å«å­æŸ¥è¯¢çš„SELECTè¯­å¥éš¾ä»¥é˜…è¯»å’Œè°ƒè¯•ï¼Œç‰¹åˆ«æ˜¯å®ƒä»¬è¾ƒä¸ºå¤æ‚æ—¶æ›´æ˜¯å¦‚æ­¤ã€‚å¦‚ä¸Šæ‰€ç¤ºæŠŠå­æŸ¥è¯¢åˆ†è§£ä¸ºå¤šè¡Œå¹¶ä¸”é€‚å½“åœ°è¿›è¡Œç¼©è¿›,èƒ½æå¤§åœ°ç®€åŒ–å­æŸ¥è¯¢çš„ä½¿ç”¨ã€‚ **åˆ—å¿…é¡»åŒ¹é… ** åœ¨WHEREå­å¥ä¸­ä½¿ç”¨å­æŸ¥è¯¢(å¦‚è¿™é‡Œæ‰€ç¤º),åº”è¯¥ä¿è¯SELECTè¯­å¥å…·æœ‰ä¸WHEREå­å¥ä¸­ç›¸åŒæ•°ç›®çš„åˆ—ã€‚é€šå¸¸,å­æŸ¥è¯¢å°†è¿”å›å•ä¸ªåˆ—å¹¶ä¸”ä¸å•ä¸ªåˆ—åŒ¹é…,ä½†å¦‚æœéœ€è¦ä¹Ÿå¯ä»¥ä½¿ç”¨å¤šä¸ªåˆ—ã€‚ å­æŸ¥è¯¢å’Œæ€§èƒ½ è¿™é‡Œç»™å‡ºçš„ä»£ç æœ‰æ•ˆå¹¶è·å¾—æ‰€éœ€çš„ç»“æœã€‚ä½†æ˜¯ï¼Œä½¿ç”¨å­æŸ¥è¯¢å¹¶ä¸æ€»æ˜¯æ‰§è¡Œè¿™ç§ç±»å‹çš„æ•°æ®æ£€ç´¢çš„æœ€æœ‰æ•ˆçš„æ–¹æ³•ã€‚ ä½œä¸ºè®¡ç®—å­—æ®µä½¿ç”¨å­æŸ¥è¯¢ä½¿ç”¨å­æŸ¥è¯¢çš„å¦ä¸€ä¸ªæ–¹æ³•æ˜¯åˆ›å»ºè®¡ç®—å­—æ®µã€‚ å‡å¦‚éœ€è¦æ˜¾ç¤ºCustomersè¡¨ä¸­æ¯ä¸ªé¡¾å®¢çš„è®¢å•æ€»æ•°ã€‚è®¢å•ä¸ç›¸åº”çš„é¡¾å®¢IDå­˜å‚¨åœ¨Ordersè¡¨ä¸­ã€‚ æ‰§è¡Œè¿™ä¸ªæ“ä½œï¼Œè¦éµå¾ªä¸‹é¢çš„æ­¥éª¤ï¼š ä»Customersè¡¨ä¸­æ£€ç´¢é¡¾å®¢åˆ—è¡¨ã€‚ å¯¹äºæ£€ç´¢å‡ºçš„æ¯ä¸ªé¡¾å®¢ï¼Œç»Ÿè®¡å…¶åœ¨Ordersè¡¨ä¸­çš„è®¢å•æ•°ç›®ã€‚ 123456SELECT cust_name, cust_state, ( SELECT COUNT(*) FROM Orders WHERE Orders.cust_id &#x3D; Customers.cust_id ) AS ordersFROM CustomersORDER BY cust_name; è”ç»“è¡¨Joinå…³ç³»è¡¨å…³ç³»è¡¨çš„è®¾è®¡å°±æ˜¯è¦æŠŠä¿¡æ¯åˆ†è§£æˆå¤šä¸ªè¡¨ï¼Œä¸€ç±»æ•°æ®ä¸€ä¸ªè¡¨ï¼Œå„è¡¨é€šè¿‡æŸäº›å…±åŒçš„å€¼äº’ç›¸å…³è”ï¼ˆæ‰€ä»¥æ‰å«å…³ç³»æ•°æ®åº“ï¼‰ã€‚ å¤–é”®(foreign key) å¤–é”®ä¸ºæŸä¸ªè¡¨ä¸­çš„ä¸€åˆ—,å®ƒåŒ…å«å¦ä¸€ä¸ªè¡¨çš„ä¸»é”®å€¼ï¼Œå®šä¹‰äº†ä¸¤ä¸ªè¡¨ä¹‹é—´çš„å…³ç³»ã€‚ åˆ›å»ºè”ç»“123SELECT vend_name, prod_name, prod_priceFROM Vendors, ProductsWHERE Vendors.vend_id &#x3D; Products.vend_id; ä¸è¦å¿˜äº†WHEREå­å¥ åº”è¯¥ä¿è¯æ‰€æœ‰è”ç»“éƒ½æœ‰WHEREå­å¥,å¦åˆ™MySQLå°†è¿”å›æ¯”æƒ³è¦çš„æ•°æ®å¤šå¾—å¤šçš„æ•°æ®ã€‚åŒç†,åº”è¯¥ä¿è¯WHEREå­å¥çš„æ­£ç¡®æ€§ã€‚ä¸æ­£ç¡®çš„è¿‡æ»¤æ¡ä»¶å°†å¯¼è‡´MySQLè¿”å›ä¸æ­£ç¡®çš„æ•°æ®ã€‚ å‰è”ç»“ æœ‰æ—¶æˆ‘ä»¬ä¼šå¬åˆ°è¿”å›ç§°ä¸ºå‰è”ç»“(cross join)çš„ç¬›å¡å„¿ç§¯çš„è”ç»“ç±»å‹ã€‚ å†…éƒ¨è”ç»“å†…è”ç»“ï¼ˆinner joinï¼‰ç›®å‰ä¸ºæ­¢ï¼Œä½¿ç”¨çš„è”ç»“ç§°ä¸ºç­‰å€¼è”ç»“ï¼ˆequijoinï¼‰ï¼Œå®ƒåŸºäºä¸¤ä¸ªè¡¨ä¹‹é—´çš„ç›¸ç­‰æµ‹è¯•ã€‚è¿™ç§è”ç»“ä¹Ÿç§°ä¸ºå†…è”ç»“ï¼ˆinner joinï¼‰ã€‚å†…è”ç»“æ˜¯æœ€å¸¸ç”¨çš„è”ç»“æ–¹å¼ã€‚ 123SELECT vend_name, prod_name, prod_priceFROM Vendors INNER JOIN ProductsON Vendors.vend_id &#x3D; Products.vend_id; è”ç»“å¤šä¸ªè¡¨12345SELECT prod_name, vend_name, prod_price, quantityFROM OrderItems, Products, VendorsWHERE Products.vend_id &#x3D; Vendors.vend_idAND OrderItems.prod_id &#x3D; Products.prod_idAND order_num &#x3D; 20007; æ€§èƒ½è€ƒè™‘ MySQLåœ¨è¿è¡Œæ—¶å…³è”æŒ‡å®šçš„æ¯ä¸ªè¡¨ä»¥å¤„ç†è”ç»“,è¿™ç§å¤„ç†å¯èƒ½æ˜¯éå¸¸è€—è´¹èµ„æºçš„,å› æ­¤åº”è¯¥ä»”ç»†,ä¸è¦è”ç»“ä¸å¿…è¦çš„è¡¨ã€‚è”ç»“çš„è¡¨è¶Šå¤šï¼Œæ€§èƒ½ä¸‹é™è¶Šå‰å®³ã€‚ åˆ›å»ºé«˜çº§è”ç»“ä½¿ç”¨åˆ«åï¼Œå‚è€ƒåˆ«åéƒ¨åˆ† è‡ªè”ç»“ä½¿ç”¨è¡¨åˆ«åçš„ä¸»è¦åŸå› ä¹‹ä¸€æ˜¯èƒ½åœ¨å•æŒ‘SELECTè¯­å¥ä¸­ä¸æ­¢ä¸€æ¬¡å¼•ç”¨ç›¸åŒçš„è¡¨ï¼ˆæ£€ç´¢çš„ä¸¤ä¸ªè¡¨å®é™…ä¸Šæ˜¯åŒä¸€å¼ è¡¨ï¼‰ å‡å¦‚è¦ç»™ä¸Jim JonesåŒä¸€å…¬å¸çš„æ‰€æœ‰é¡¾å®¢å‘é€ä¸€ä»½é‚®ä»¶ã€‚ æ–¹æ³•ä¸€ï¼šå­æŸ¥è¯¢ 12345SELECT cust_id, cust_name, cust_contactFROM CustomersWHERE cust_name &#x3D; ( SELECT cust_name FROM Customers WHERE cust_contact &#x3D; &#39;Jim Jones&#39;); æ–¹æ³•äºŒï¼šè‡ªè”ç»“æŸ¥è¯¢ 1234SELECT c1.cust_id, c1.cust_name, c1.cust_contactFROM Customers AS c1, Customers AS c2WHERE c1.cust_name &#x3D; c2.cust_nameAND c2.cust_contact &#x3D; &#39;Jim Jones&#39;; ç”¨è‡ªè”ç»“è€Œä¸ç”¨å­æŸ¥è¯¢ è‡ªè”ç»“é€šå¸¸ä½œä¸ºå¤–éƒ¨è¯­å¥ç”¨æ¥æ›¿ä»£ä»ç›¸åŒè¡¨ä¸­æ£€ç´¢æ•°æ®æ—¶ä½¿ç”¨çš„å­æŸ¥è¯¢è¯­å¥ã€‚è™½ç„¶æœ€ç»ˆçš„ç»“æœæ˜¯ç›¸åŒçš„,ä½†æœ‰æ—¶å€™å¤„ç†è”ç»“è¿œæ¯”å¤„ç†å­æŸ¥è¯¢å¿«å¾—å¤šã€‚åº”è¯¥è¯•ä¸€ä¸‹ä¸¤ç§æ–¹æ³•,ä»¥ç¡®å®šå“ªä¸€ç§çš„æ€§èƒ½æ›´å¥½ã€‚ è‡ªç„¶è”ç»“åœ¨å¯¹è¡¨è¿›è¡Œè”ç»“æ—¶ï¼Œè‡³å°‘æœ‰ä¸€åˆ—ï¼ˆè¢«è”ç»“çš„åˆ—ï¼‰ä¸æ­¢å‡ºç°åœ¨ä¸€ä¸ªè¡¨ä¸­ã€‚æ ‡å‡†çš„å†…è”ç»“è¿”å›æ‰€æœ‰æ•°æ®ï¼Œç›¸åŒçš„åˆ—ç”šè‡³å¤šæ¬¡å‡ºç°ã€‚è‡ªç„¶è”ç»“æ’é™¤å¤šæ¬¡å‡ºç°ï¼Œä½¿æ¯ä¸€åˆ—åªè¿”å›ä¸€æ¬¡ã€‚ è‡ªç„¶è”ç»“è¦æ±‚åªèƒ½é€‰æ‹©é‚£äº›å”¯ä¸€çš„åˆ—ï¼Œä¸€èˆ¬é€šè¿‡å¯¹ä¸€ä¸ªè¡¨ä½¿ç”¨é€šé…ç¬¦ï¼ˆSELECT *ï¼‰ï¼Œè€Œå¯¹å…¶ä»–è¡¨çš„åˆ—ä½¿ç”¨æ˜ç¡®çš„å­é›†æ¥å®Œæˆã€‚ 123456SELECT C.*, O.order_num, O.order_date, OI.prod_id, OI.quantity, OI.item_price FROM Customers AS C, Orders AS O, OrderItems AS OIWHERE C.cust_id &#x3D; O.cust_idAND OI.order_num &#x3D; O.order_numAND prod_id &#x3D; &#39;RGAN01&#39;; äº‹å®ä¸Šï¼Œæˆ‘ä»¬è¿„ä»Šä¸ºæ­¢å»ºç«‹çš„æ¯ä¸ªå†…è”ç»“éƒ½æ˜¯è‡ªç„¶è”ç»“ï¼Œå¾ˆå¯èƒ½æ°¸è¿œéƒ½ä¸ä¼šç”¨åˆ°ä¸æ˜¯è‡ªç„¶è”ç»“çš„å†…è”ç»“ã€‚ å¤–éƒ¨è”ç»“è®¸å¤šè”ç»“å°†ä¸€ä¸ªè¡¨ä¸­çš„è¡Œä¸å¦ä¸€ä¸ªè¡¨ä¸­çš„è¡Œç›¸å…³è”ï¼Œä½†æœ‰æ—¶å€™éœ€è¦åŒ…å«æ²¡æœ‰å…³è”çš„é‚£äº›è¡Œã€‚ ä¾‹å¦‚ï¼š å¯¹æ¯ä¸ªé¡¾å®¢ä¸‹çš„è®¢å•è¿›è¡Œè®¡æ•°ï¼ŒåŒ…æ‹¬å“ªäº›è‡³ä»Šå°šæœªä¸‹è®¢å•çš„é¡¾å®¢ã€‚ åˆ—å‡ºæ‰€æœ‰äº§å“ä»¥åŠè®¢è´­æ•°é‡ï¼ŒåŒ…æ‹¬æ²¡æœ‰äººè®¢è´­çš„äº§å“ã€‚ è®¡ç®—å¹³å‡é”€å”®è§„æ¨¡ï¼ŒåŒ…æ‹¬å“ªäº›è‡³ä»Šå°šæœªä¸‹è®¢å•çš„é¡¾å®¢ã€‚ åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œè”ç»“åŒ…å«äº†é‚£äº›åœ¨ç›¸å…³è¡¨ä¸­æ²¡æœ‰å…³è”è¡Œçš„è¡Œï¼Œè¿™ç§è”ç»“ç§°ä¸ºå¤–è”ç»“ï¼ˆouter joinï¼‰ã€‚ å†…è”ç»“æ£€ç´¢æ‰€æœ‰é¡¾å®¢åŠå…¶è®¢å•ï¼š 123SELECT Customers.cust_id, Orders.order_numFROM Customers INNER JOIN OrdersON Customers.cust_id &#x3D; Orders.cust_id; å¤–è”ç»“è¯­æ³•ç±»ä¼¼ï¼Œæ£€ç´¢åŒ…æ‹¬æ²¡æœ‰è®¢å•é¡¾å®¢åœ¨å†…çš„æ‰€æœ‰é¡¾å®¢ï¼š 123SELECT Customers.cust_id, Orders.order_numFROM Customers LEFT OUTER JOIN OrdersON Customers.cust_id &#x3D; Orders.cust_id; ä½¿ç”¨OUTER JOINè¯­æ³•æ—¶ï¼Œå¿…é¡»ä½¿ç”¨RIGHTæˆ–LEFTå…³é”®å­—æŒ‡å®šåŒ…æ‹¬å…¶æ‰€æœ‰è¡Œçš„è¡¨ï¼ˆRIGHTæŒ‡å‡ºçš„æ˜¯OUTER JOINå³è¾¹çš„è¡¨ï¼Œè€ŒLEFTæŒ‡å‡ºçš„æ˜¯OUTER JOINå·¦è¾¹çš„è¡¨ï¼‰ã€‚ ä¸Šé¢çš„ä¾‹å­ä½¿ç”¨LEFT OUTER JOINä»FROMå­å¥å·¦è¾¹çš„è¡¨ï¼ˆCustomersè¡¨ï¼‰ä¸­é€‰æ‹©æ‰€æœ‰è¡Œã€‚ä¸ºäº†ä»å³è¾¹çš„è¡¨ä¸­é€‰æ‹©æ‰€æœ‰è¡Œï¼Œéœ€è¦ä½¿ç”¨RIGHT OUTER JOINï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºã€‚ 123SELECT Customers.cust_id, Orders.order_numFROM Customers RIGHT OUTER JOIN OrdersON Customers.cust_id &#x3D; Orders.cust_id; è¿˜å­˜åœ¨å¦ä¸€ç§å¤–è”ç»“ï¼Œå°±æ˜¯å…¨å¤–è”ç»“ï¼ˆfull outer joinï¼‰ï¼Œå®ƒæ£€ç´¢ä¸¤ä¸ªè¡¨ä¸­çš„æ‰€æœ‰è¡Œå¹¶å…³è”é‚£äº›å¯ä»¥å…³è”çš„è¡Œï¼Œå…¨å¤–è”ç»“åŒ…å«äº†ä¸¤ä¸ªè¡¨ä¸­çš„ä¸å…³è”çš„è¡Œã€‚ï¼ˆAccessã€MariaDBã€MySQLå’ŒSQLiteä¸æ”¯æŒFULL OUTER JOINè¯­æ³•ï¼‰ 123SELECT Customers.cust_id, Orders.order_numFROM Customers FULL OUTER JOIN OrdersON Customers.cust_id &#x3D; Orders.cust_id; ä½¿ç”¨å¸¦èšé›†å‡½æ•°çš„è”ç»“ä½¿ç”¨COUNT()æ£€ç´¢æ‰€æœ‰é¡¾å®¢åŠæ¯ä¸ªé¡¾å®¢æ‰€ä¸‹çš„è®¢å•æ•°ï¼š 12345SELECT Customers.cust_id, COUNT(Orders.order_num) AS num_ordFROM Customers INNER JOIN OrdersON Customers.cust_id &#x3D; Orders.cust_idGROUP BY Customers.cust_id; èšé›†å‡½æ•°ä¹Ÿå¯ä»¥æ–¹ä¾¿åœ°ä¸å…¶ä»–è”ç»“ä¸€èµ·ä½¿ç”¨ã€‚ 12345SELECT Customers.cust_id, COUNT(Orders.order_num) AS num_ordFROM Customers LEFT OUTER JOIN OrdersON Customers.cust_id &#x3D; Orders.cust_idGROUP BY Customers.cust_id; ä½¿ç”¨è”ç»“å’Œè”ç»“æ¡ä»¶è”ç»“åŠå…¶ä½¿ç”¨çš„æŸäº›è¦ç‚¹ï¼š æ³¨æ„æ‰€ä½¿ç”¨çš„è”ç»“ç±»å‹ã€‚ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨å†…éƒ¨è”ç»“ï¼Œä½†ä½¿ç”¨å¤–éƒ¨è”ç»“ä¹Ÿæ˜¯æœ‰æ•ˆçš„ã€‚ ä¿è¯ä½¿ç”¨æ­£ç¡®çš„è”ç»“æ¡ä»¶ï¼Œå¦åˆ™å°†è¿”å›ä¸æ­£ç¡®çš„æ•°æ®ã€‚åº”è¯¥æ€»æ˜¯æä¾›è”ç»“æ¡ä»¶ï¼Œå¦åˆ™ä¼šå¾—å‡ºç¬›å¡å„¿ç§¯ã€‚ åœ¨ä¸€ä¸ªè”ç»“ä¸­å¯ä»¥åŒ…å«å¤šä¸ªè¡¨ï¼Œç”šè‡³å¯¹äºæ¯ä¸ªè”ç»“å¯ä»¥é‡‡ç”¨ä¸åŒçš„è”ç»“ç±»å‹ã€‚è™½ç„¶è¿™æ ·åšæ˜¯åˆæ³•çš„ï¼Œä¸€èˆ¬ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œä½†åº”è¯¥åœ¨ä¸€èµ·æµ‹è¯•å®ƒä»¬å‰ï¼Œåˆ†åˆ«æµ‹è¯•æ¯ä¸ªè”ç»“ã€‚è¿™å°†ä½¿æ•…éšœæ’é™¤æ›´ä¸ºç®€å•ã€‚ ç»„åˆæŸ¥è¯¢å¤šæ•°SQLæŸ¥è¯¢éƒ½åªåŒ…å«ä»ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­è¿”å›æ•°æ®çš„å•æ¡SELECTè¯­å¥ã€‚MySQLä¹Ÿå…è®¸æ‰§è¡Œå¤šä¸ªæŸ¥è¯¢(å¤šæ¡SELECTè¯­å¥)ï¼Œå¹¶å°†ç»“æœä½œä¸ºå•ä¸ªæŸ¥è¯¢ç»“æœé›†è¿”å›ã€‚è¿™äº›ç»„åˆæŸ¥è¯¢é€šå¸¸ç§°ä¸ºå¹¶ï¼ˆ union)æˆ–å¤åˆæŸ¥è¯¢(compound query)ã€‚ ä½¿ç”¨UNION12345SELECT vend_id, prod_id,prod_price FROM productsWHERE prod_price&#x3D; 5UNIONSELECT vend_id,prod_id,prod_price FROM productsWHERE vend_id IN (1001,1002); UNIONè§„åˆ™ UNIONå¿…é¡»ç”±ä¸¤æ¡æˆ–ä¸¤æ¡ä»¥ä¸Šçš„SELECTè¯­å¥ç»„æˆï¼Œè¯­å¥ä¹‹é—´ç”¨å…³é”®å­—UNIONåˆ†éš”ã€‚å¦‚æœç»„åˆå››æ¡SELECTè¯­å¥ï¼Œå°†è¦ä½¿ç”¨ä¸‰ä¸ªUNIONå…³é”®å­—ã€‚ UNIONä¸­çš„æ¯ä¸ªæŸ¥è¯¢å¿…é¡»åŒ…å«ç›¸åŒçš„åˆ—ã€è¡¨è¾¾å¼æˆ–èšé›†å‡½æ•°ï¼Œå„ä¸ªåˆ—ä¸éœ€è¦ä»¥ç›¸åŒçš„æ¬¡åºåˆ—å‡ºã€‚ åˆ—æ•°æ®ç±»å‹å¿…é¡»å…¼å®¹ï¼šç±»å‹ä¸å¿…å®Œå…¨ç›¸åŒï¼Œä½†å¿…é¡»æ˜¯DBMSå¯ä»¥éšå«è½¬æ¢çš„ç±»å‹ï¼ˆä¾‹å¦‚ï¼Œä¸åŒçš„æ•°å€¼ç±»å‹æˆ–ä¸åŒçš„æ—¥æœŸç±»å‹ï¼‰ã€‚ UNIONè¿”å›äº¤é›†ï¼Œè¿™æ˜¯é»˜è®¤è¡Œä¸ºï¼Œå¦‚æœæƒ³è¿”å›æ‰€æœ‰åŒ¹é…è¡Œï¼Œå¯ä½¿ç”¨UNION ALL UNIONçš„ç»„åˆæŸ¥è¯¢å¯ä»¥åº”ç”¨ä¸åŒçš„è¡¨ å¯¹ç»„åˆæŸ¥è¯¢ç»“æœæ’åºåœ¨ç”¨UNIONç»„åˆæŸ¥è¯¢æ—¶ï¼Œåªèƒ½ä½¿ç”¨ä¸€æ¡ORDER BYå­å¥ï¼Œå®ƒå¿…é¡»ä½äºæœ€åä¸€æ¡SELECTè¯­å¥ä¹‹åã€‚ å¯¹äºç»“æœé›†ï¼Œä¸å­˜åœ¨ç”¨ä¸€ç§æ–¹å¼æ’åºä¸€éƒ¨åˆ†ï¼Œè€Œåˆç”¨å¦ä¸€ç§æ–¹å¼æ’åºå¦ä¸€éƒ¨åˆ†çš„æƒ…å†µï¼Œå› æ­¤ä¸å…è®¸ä½¿ç”¨å¤šæ¡ORDER BYå­å¥ã€‚ 12345678SELECT cust_name, cust_contact, cust_emailFROM CustomersWHERE cust_state IN (&#39;IL&#39;,&#39;IN&#39;,&#39;MI&#39;)UNIONSELECT cust_name, cust_contact, cust_emailFROM CustomersWHERE cust_name &#x3D; &#39;Fun4All&#39;ORDER BY cust_name, cust_contact; å…¨æ–‡æœ¬æœç´¢ç†è§£å…¨æ–‡æœ¬æœç´¢MySQLæ”¯æŒå‡ ç§åŸºæœ¬çš„æ•°æ®åº“å¼•æ“ï¼Œä¸¤ä¸ªæœ€å¸¸ä½¿ç”¨çš„å¼•æ“ä¸ºMyISAMå’ŒInnoDBã€‚å‰è€…æ”¯æŒå…¨æœ¬æ–‡æœç´¢ï¼Œåè€…ä¸æ”¯æŒã€‚ Likeå’Œæ­£åˆ™çš„åœ¨æœç´¢å…¨æ–‡æœ¬çš„å±€é™æ€§ï¼š æ€§èƒ½ é€šé…ç¬¦å’Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…é€šå¸¸è¦æ±‚MySQLå°è¯•åŒ¹é…è¡¨ä¸­æ‰€æœ‰è¡Œï¼ˆè€Œä¸”è¿™äº›æœç´¢æå°‘ä½¿ç”¨è¡¨ç´¢å¼•)ã€‚å› æ­¤ï¼Œç”±äºè¢«æœç´¢è¡Œæ•°ä¸æ–­å¢åŠ ï¼Œè¿™äº›æœç´¢å¯èƒ½éå¸¸è€—æ—¶ã€‚ æ˜ç¡®æ§åˆ¶ ä½¿ç”¨é€šé…ç¬¦å’Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œå¾ˆéš¾ï¼ˆè€Œä¸”å¹¶ä¸æ€»æ˜¯èƒ½ï¼‰æ˜ç¡®åœ°æ§åˆ¶åŒ¹é…ä»€ä¹ˆå’Œä¸åŒ¹é…ä»€ä¹ˆã€‚ä¾‹å¦‚ï¼ŒæŒ‡å®šä¸€ä¸ªè¯å¿…é¡»åŒ¹é…ï¼Œä¸€ä¸ªè¯å¿…é¡»ä¸åŒ¹é…ï¼Œè€Œä¸€ä¸ªè¯ä»…åœ¨ç¬¬ä¸€ä¸ªè¯ç¡®å®åŒ¹é…çš„æƒ…å†µä¸‹æ‰å¯ä»¥åŒ¹é…æˆ–è€…æ‰å¯ä»¥ä¸åŒ¹é…ã€‚ æ™ºèƒ½åŒ–çš„ç»“æœ è™½ç„¶åŸºäºé€šé…ç¬¦å’Œæ­£åˆ™è¡¨è¾¾å¼çš„æœç´¢æä¾›äº†éå¸¸çµæ´»çš„æœç´¢,ä½†å®ƒä»¬éƒ½ä¸èƒ½æä¾›ä¸€ç§æ™ºèƒ½åŒ–çš„é€‰æ‹©ç»“æœçš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç‰¹æ®Šè¯çš„æœç´¢å°†ä¼šè¿”å›åŒ…å«è¯¥è¯çš„æ‰€æœ‰è¡Œï¼Œè€Œä¸åŒºåˆ†åŒ…å«å•ä¸ªåŒ¹é…çš„è¡Œå’ŒåŒ…å«å¤šä¸ªåŒ¹é…çš„è¡Œ(æŒ‰ç…§å¯èƒ½æ˜¯æ›´å¥½çš„åŒ¹é…æ¥æ’åˆ—å®ƒä»¬)ã€‚ç±»ä¼¼ï¼Œä¸€ä¸ªç‰¹æ®Šè¯çš„æœç´¢å°†ä¸ä¼šæ‰¾å‡ºä¸åŒ…å«è¯¥è¯ä½†åŒ…å«å…¶ä»–ç›¸å…³è¯çš„è¡Œã€‚ å…¨æ–‡æœ¬æœç´¢æ–¹æ¡ˆï¼šMySQLä¸éœ€è¦åˆ†åˆ«æŸ¥çœ‹æ¯ä¸ªè¡Œï¼Œä¸éœ€è¦åˆ†åˆ«åˆ†æå’Œå¤„ç†æ¯ä¸ªè¯ã€‚MySQLåˆ›å»ºæŒ‡å®šåˆ—ä¸­å„è¯çš„ä¸€ä¸ªç´¢å¼•ï¼Œæœç´¢å¯ä»¥é’ˆå¯¹è¿™äº›è¯è¿›è¡Œã€‚è¿™æ ·ï¼ŒMySQLå¯ä»¥å¿«é€Ÿæœ‰æ•ˆåœ°å†³å®šå“ªäº›è¯åŒ¹é…ï¼ˆå“ªäº›è¡ŒåŒ…å«å®ƒä»¬ï¼‰ï¼Œå“ªäº›è¯ä¸åŒ¹é…ï¼Œå®ƒä»¬çš„åŒ¹é…çš„é¢‘ç‡ï¼Œç­‰ç­‰ã€‚ ä½¿ç”¨å…¨æ–‡æœ¬æœç´¢ä¸ºäº†è¿›è¡Œå…¨æ–‡æœ¬æœç´¢ï¼Œå¿…é¡»ç´¢å¼•è¢«æœç´¢çš„åˆ—ï¼Œè€Œä¸”è¦éšç€æ•°æ®çš„æ”¹å˜ä¸æ–­åœ°é‡æ–°ç´¢å¼•ã€‚åœ¨å¯¹è¡¨åˆ—è¿›è¡Œé€‚å½“è®¾è®¡åï¼ŒMySQLä¼šè‡ªåŠ¨è¿›è¡Œæ‰€æœ‰çš„ç´¢å¼•å’Œé‡æ–°ç´¢å¼•ã€‚åœ¨ç´¢å¼•ä¹‹å,SELECTå¯ä¸Match()å’ŒAgainst(ï¼‰ä¸€èµ·ä½¿ç”¨ä»¥å®é™…æ‰§è¡Œæœç´¢ã€‚ å¯ç”¨å…¨æ–‡æœ¬æœç´¢æ”¯æŒåˆ›å»ºè¡¨æ—¶å¯ç”¨å…¨æ–‡æœ¬æœç´¢CREATE TABLE è¯­å¥ æ¥å—FULLTEXTå­å¥ CREATE TABLE productnotes ( note_id int NOT NULL AUTO_INCREMENT, prod_id char(10) NOT NULL, note_date datetime NOT NULL, note_text text, PRIMARY KEY (note_id), FULLTEXT KEY note_text (note_text)) ENGINE=MyISAM; MySQLæ ¹æ®å­å¥FULLTEXT(note_text)çš„æŒ‡ç¤ºå¯¹å®ƒè¿›è¡Œç´¢å¼•ï¼Œè¿™é‡Œç´¢å¼•å•ä¸ªåˆ—ï¼Œä¹Ÿå¯ä»¥ç´¢å¼•å¤šä¸ªåˆ—ã€‚ **ä¸è¦åœ¨å¯¼å…¥æ•°æ®æ—¶ä½¿ç”¨FULLTEXT ** æ›´æ–°ç´¢å¼•è¦èŠ±æ—¶é—´,è™½ç„¶ä¸æ˜¯å¾ˆå¤š,ä½†æ¯•ç«Ÿè¦èŠ±æ—¶é—´ã€‚å¦‚æœæ­£åœ¨å¯¼å…¥æ•°æ®åˆ°ä¸€ä¸ªæ–°è¡¨,æ­¤æ—¶ä¸åº”è¯¥å¯ç”¨FULLTEXTç´¢å¼•ã€‚åº”è¯¥é¦–å…ˆå¯¼å…¥æ‰€æœ‰æ•°æ®,ç„¶åå†ä¿®æ”¹è¡¨,å®šä¹‰FULLTEXTã€‚è¿™æ ·æœ‰åŠ©äºæ›´å¿«åœ°å¯¼å…¥æ•°æ®(è€Œä¸”ä½¿ç´¢å¼•æ•°æ®çš„æ€»æ—¶é—´å°äºåœ¨å¯¼å…¥æ¯è¡Œæ—¶åˆ†åˆ«è¿›è¡Œç´¢å¼•æ‰€éœ€çš„æ€»æ—¶é—´). é€šè¿‡ Alter Table çš„æ–¹å¼æ¥æ·»åŠ ALTER TABLE productnotes ADD FULLTEXT INDEX ft_prod_name(**note_text ) æˆ–è€…ï¼š ALTER TABLE productnotes ADD FULLTEXT ft_prod_name(**note_text ) ç›´æ¥é€šè¿‡create indexçš„æ–¹å¼CREATE FULLTEXT INDEX ft_prod_name ON productnotes (note_text `) æŒ‡å®šç´¢å¼•çš„é•¿åº¦ï¼š CREATE FULLTEXT INDEX ft_prod_name ON productnotes (note_text `(20)) è¿›è¡Œå…¨æ–‡æœ¬ç´¢ç´¢ä½¿ç”¨å‡½æ•°Match()å’ŒAgainst()Match()è¢«æœç´¢çš„åˆ—ï¼ŒAgainst()æŒ‡å®šè¦ä½¿ç”¨çš„æœç´¢è¡¨è¾¾å¼ SELECT NOTE_TEXT FROM productnotes WHERE MATCH(NOTE_TEXT) Against(â€˜rabbitâ€™) å½“æŸ¥è¯¢ç»“æœå¾ˆå¤šï¼Œå‡ ä¹æ‰€æœ‰è®°å½•éƒ½æœ‰ï¼Œæˆ–è€…æå°‘çš„æ•°æ®ï¼Œéƒ½æœ‰å¯èƒ½ä¼šè¿”å›éæ‰€æœŸæœ›çš„ç»“æœã€‚ å¯ç”¨IN BOOLEAN MODE SELECT NOTE_TEXT FROM productnotes WHERE MATCH(NOTE_TEXT) Against(â€˜rabbitâ€™ IN BOOLEAN MODE) ä½¿ç”¨å®Œæ•´çš„Match()è¯´æ˜ ä¼ é€’ç»™Match()çš„å€¼å¿…é¡»ä¸FULLTEXT()å®šä¹‰ä¸­çš„ç›¸åŒã€‚å¦‚æœæŒ‡å®šå¤šä¸ªåˆ—ï¼Œåˆ™å¿…é¡»åˆ—å‡ºå®ƒä»¬(è€Œä¸”æ¬¡åºæ­£ç¡®)ã€‚ æœç´¢ä¸åŒºåˆ†å¤§å°å†™ é™¤éä½¿ç”¨BINARYæ–¹å¼ï¼Œå¦åˆ™å…¨æ–‡æœ¬æœç´¢ä¸åŒºåˆ†å¤§å°å†™ã€‚ æœç´¢ç»“æœä¸­ï¼Œæ¯è¡Œéƒ½æœ‰ä¸€ä¸ªç­‰çº§å€¼ æ–‡æœ¬ä¸­è¯é å‰çš„è¡Œçš„ç­‰çº§å€¼æ¯”è¯é åçš„è¡Œçš„ç­‰çº§å€¼é«˜ã€‚ æ’åºå¤šä¸ªæœç´¢é¡¹ å¦‚æœæŒ‡å®šå¤šä¸ªæœç´¢é¡¹,åˆ™åŒ…å«å¤šæ•°åŒ¹é…è¯çš„é‚£äº›è¡Œå°†å…·æœ‰æ¯”åŒ…å«è¾ƒå°‘è¯(æˆ–ä»…æœ‰ä¸€ä¸ªåŒ¹é…)çš„é‚£äº›è¡Œé«˜çš„ç­‰çº§å€¼ã€‚(é™åº) ä½¿ç”¨æŸ¥è¯¢æ‹“å±•(anvils)åœ¨ä½¿ç”¨æŸ¥è¯¢æ‰©å±•æ—¶ï¼ŒMySQLå¯¹æ•°æ®å’Œç´¢å¼•è¿›è¡Œä¸¤éæ‰«ææ¥å®Œæˆæœç´¢: é¦–å…ˆï¼Œè¿›è¡Œä¸€ä¸ªåŸºæœ¬çš„å…¨æ–‡æœ¬æœç´¢ï¼Œæ‰¾å‡ºä¸æœç´¢æ¡ä»¶åŒ¹é…çš„æ‰€æœ‰è¡Œ; å…¶æ¬¡ï¼ŒMySQLæ£€æŸ¥è¿™äº›åŒ¹é…è¡Œå¹¶é€‰æ‹©æ‰€æœ‰æœ‰ç”¨çš„è¯ å†å…¶æ¬¡ï¼ŒMySQLå†æ¬¡è¿›è¡Œå…¨æ–‡æœ¬æœç´¢,è¿™æ¬¡ä¸ä»…ä½¿ç”¨åŸæ¥çš„æ¡ä»¶ï¼Œè€Œä¸”è¿˜ä½¿ç”¨æ‰€æœ‰æœ‰ç”¨çš„è¯ã€‚ SELECT note_text FROM productnotes WHERE Match(note_text) Against(â€˜anvils â€˜); |note_text| |Multiple customer returnsï¼Œanvils failing to drop fast enough or ll falling backwards on purchaser. Recommend that customer considers l[ using heavier anvi1s. åªæœ‰ä¸€è¡ŒåŒ…å«è¯anvils,å› æ­¤åªè¿”å›ä¸€è¡Œã€‚ æŸ¥è¯¢æ‹“å±•:SELECT note_text FROM productnotes MHERE Match(note_text) Against(â€˜anvi1sâ€™ WITH QUERY EXPANSION); ä¾‹å­å¯å‚è€ƒç½‘ä¸Šï¼Œè¿™é‡Œä¸è´´å‡ºã€‚ è¡Œè¶Šå¤šè¶Šå¥½è¡¨ä¸­çš„è¡Œè¶Šå¤š ï¼ˆè¿™äº›è¡Œä¸­çš„æ–‡æœ¬å°±è¶Šå¤š),ä½¿ç”¨æŸ¥è¯¢æ‰©å±•è¿”å›çš„ç»“æœè¶Šå¥½ã€‚ å¸ƒå°”æ–‡æœ¬æœç´¢boolean mode(æ²¡æœ‰FULLTEXTç´¢å¼•ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œä½†æ€§èƒ½éšç€æ•°æ®é‡çš„å¢åŠ è€Œé™ä½) è¦åŒ¹é…çš„è¯; è¦æ’æ–¥çš„è¯ï¼ˆå¦‚æœæŸè¡ŒåŒ…å«è¿™ä¸ªè¯ï¼Œåˆ™ä¸è¿”å›è¯¥è¡Œï¼Œå³ä½¿å®ƒåŒ…å«å…¶ä»–æŒ‡å®šçš„è¯ä¹Ÿæ˜¯å¦‚æ­¤); æ’åˆ—æç¤º(æŒ‡å®šæŸäº›è¯æ¯”å…¶ä»–è¯æ›´é‡è¦ï¼Œæ›´é‡è¦çš„è¯ç­‰çº§æ›´é«˜);è¡¨è¾¾å¼åˆ†ç»„;å¦å¤–ä¸€äº›å†…å®¹ã€‚ å…¨æ–‡æœ¬å¸ƒå°”æ“ä½œç¬¦ å¸ƒå°”æ“ä½œç¬¦ è¯´æ˜ + åŒ…å«,è¯å¿…é¡»å­˜åœ¨ - æ’é™¤,è¯å¿…é¡»ä¸å‡ºç° &gt; åŒ…å«,è€Œä¸”å¢åŠ ç­‰çº§å€¼ &lt; åŒ…å«ï¼Œä¸”å‡å°‘ç­‰çº§å€¼ () æŠŠè¯ç»„æˆå­è¡¨è¾¾å¼(å…è®¸è¿™äº›å­è¡¨è¾¾å¼ä½œä¸ºä¸€ä¸ªç»„è¢«åŒ…å«ã€æ’é™¤ã€æ’åˆ—ç­‰) ~ å–æ¶ˆä¸€ä¸ªè¯çš„æ’åºå€¼ * è¯å°¾çš„é€šé…ç¬¦ â€œâ€ å®šä¹‰ä¸€ä¸ªçŸ­è¯­ï¼ˆä¸å•ä¸ªè¯çš„åˆ—è¡¨ä¸ä¸€æ ·ï¼Œå®ƒåŒ¹é…æ•´ä¸ªçŸ­è¯­ä»¥ä¾¿åŒ…å«æˆ–æ’é™¤è¿™ä¸ªçŸ­è¯­) æ’åˆ—è€Œä¸æ’åº åœ¨å¸ƒå°”æ–¹å¼ä¸­ï¼Œä¸æŒ‰ç­‰çº§å€¼é™åºæ’åºè¿”å›çš„è¡Œã€‚ å…¨æ–‡æœ¬æœç´¢çš„ä½¿ç”¨è¯´æ˜ åœ¨ç´¢å¼•å…¨æ–‡æœ¬æ•°æ®æ—¶ï¼ŒçŸ­è¯è¢«å¿½ç•¥ä¸”ä»ç´¢å¼•ä¸­æ’é™¤ã€‚çŸ­è¯å®šä¹‰ä¸ºé‚£äº›å…·æœ‰3ä¸ªæˆ–3ä¸ªä»¥ä¸‹å­—ç¬¦çš„è¯(å¦‚æœéœ€è¦,è¿™ä¸ªæ•°ç›®å¯ä»¥æ›´æ”¹)ã€‚ MySQLå¸¦æœ‰ä¸€ä¸ªå†…å»ºçš„éç”¨è¯(stopwordï¼‰åˆ—è¡¨ï¼Œè¿™äº›è¯åœ¨ç´¢å¼•å…¨æ–‡æœ¬æ•°æ®æ—¶æ€»æ˜¯è¢«å¿½ç•¥ã€‚å¦‚æœéœ€è¦ï¼Œå¯ä»¥è¦†ç›–è¿™ä¸ªåˆ—è¡¨ï¼ˆè¯·å‚é˜…MySQLæ–‡æ¡£ä»¥äº†è§£å¦‚ä½•å®Œæˆæ­¤å·¥ä½œ)ã€‚ è®¸å¤šè¯å‡ºç°çš„é¢‘ç‡å¾ˆé«˜ï¼Œæœç´¢å®ƒä»¬æ²¡æœ‰ç”¨å¤„ï¼ˆè¿”å›å¤ªå¤šçš„ç»“æœ)ã€‚å› æ­¤ï¼ŒMySQLè§„å®šäº†ä¸€æ¡50%è§„åˆ™ï¼Œå¦‚æœä¸€ä¸ªè¯å‡ºç°åœ¨50%ä»¥ä¸Šçš„è¡Œä¸­ï¼Œåˆ™å°†å®ƒä½œä¸ºä¸€ä¸ªéç”¨è¯å¿½ç•¥ã€‚50%è§„åˆ™ä¸ç”¨äºINBOOLEAN MODEã€‚ å¦‚æœè¡¨ä¸­çš„è¡Œæ•°å°‘äº3è¡Œ,åˆ™å…¨æ–‡æœ¬æœç´¢ä¸è¿”å›ç»“æœ(å› ä¸ºæ¯ä¸ªè¯æˆ–è€…ä¸å‡ºç°ï¼Œæˆ–è€…è‡³å°‘å‡ºç°åœ¨50%çš„è¡Œä¸­)ã€‚ å¿½ç•¥è¯ä¸­çš„å•å¼•å·ã€‚ä¾‹å¦‚ï¼Œdonâ€™tç´¢å¼•ä¸ºdontã€‚ ä¸å…·æœ‰è¯åˆ†éš”ç¬¦ï¼ˆåŒ…æ‹¬æ—¥è¯­å’Œæ±‰è¯­ï¼‰çš„è¯­è¨€ä¸èƒ½æ°å½“åœ°è¿”å›å…¨æ–‡æœ¬æœç´¢ç»“æœã€‚å¦‚å‰æ‰€è¿°,ä»…åœ¨My ISAMæ•°æ®åº“å¼•æ“ä¸­æ”¯æŒå…¨æ–‡æœ¬æœç´¢ã€‚ ç›®å‰MySQLä¸æ”¯æŒé¢†è¿‘æ“ä½œç¬¦ æ’å…¥æ•°æ®INSERTæ˜¯ç”¨æ¥æ’å…¥ï¼ˆæˆ–æ·»åŠ ï¼‰è¡Œåˆ°æ•°æ®åº“è¡¨çš„ã€‚æ’å…¥å¯ä»¥ç”¨å‡ ç§æ–¹å¼ä½¿ç”¨: æ’å…¥å®Œæ•´çš„è¡Œ; æ’å…¥è¡Œçš„ä¸€éƒ¨åˆ†; æ’å…¥å¤šè¡Œ; æ’å…¥æŸäº›æŸ¥è¯¢çš„ç»“æœã€‚ MySQLå…è®¸é’ˆå¯¹æ¯ä¸ªè¡¨æˆ–æ¯ä¸ªç”¨æˆ·ä½¿ç”¨å®‰å…¨æœºåˆ¶ç¦æ­¢ä½¿ç”¨INSERTè¯­å¥ æ’å…¥å®Œæ•´çš„è¡ŒINSERTæŒ‡å®šè¡¨åå’Œæ’å…¥åˆ°æ–°è¡Œä¸­çš„å€¼ã€‚ 123INSERT INTO CustomersVALUES(&#39;1000000006&#39;,&#39;Pep E&#39;,&#39;123 Los Street&#39;, &#39;Main York&#39;,&#39;NY&#39;,&#39;11111&#39;,&#39;USA&#39;,NULL,NULL); æ’å…¥æ•°æ®æ—¶ï¼Œå„åˆ—å¿…é¡»ä»¥å®ƒä»¬åœ¨è¡¨å®šä¹‰ä¸­å‡ºç°çš„æ¬¡åºå¡«å……ã€‚ ä¸Šé¢çš„SQLè¯­å¥é«˜åº¦ä¾èµ–äºè¡¨ä¸­åˆ—çš„å®šä¹‰æ¬¡åºï¼Œè¿˜ä¾èµ–äºå…¶å®¹æ˜“è·å¾—çš„æ¬¡åºä¿¡æ¯ã€‚å³ä½¿å¯ä»¥å¾—åˆ°è¿™ç§æ¬¡åºä¿¡æ¯ï¼Œä¹Ÿä¸èƒ½ä¿è¯å„åˆ—åœ¨ä¸‹ä¸€æ¬¡è¡¨ç»“æ„å˜åŠ¨åä¿æŒå®Œå…¨ç›¸åŒçš„æ¬¡åºã€‚å› æ­¤ï¼Œç¼–å†™ä¾èµ–äºç‰¹å®šåˆ—æ¬¡åºçš„SQLè¯­å¥æ˜¯å¾ˆä¸å®‰å…¨çš„ã€‚ å®é™…ä¸Šï¼Œåœ¨æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œæœ€å¥½ç»™å‡ºå¡«å……åˆ—çš„é¡ºåºã€‚ 12345INSERT INTO Customers(cust_id,cust_contact,cust_email, cust_name,cust_address,cust_city, cust_state,cust_zip)VALUES(&#39;1000000006&#39;,NULL,NULL,&#39;Toy Land&#39;,&#39;123 Any Street&#39;, &#39;New York&#39;,&#39;NY&#39;,&#39;11111&#39;); æ€»æ˜¯ä½¿ç”¨åˆ—çš„åˆ—è¡¨ ä¸€èˆ¬ä¸è¦ä½¿ç”¨æ²¡æœ‰æ˜ç¡®ç»™å‡ºåˆ—çš„åˆ—è¡¨çš„INSERTè¯­å¥ã€‚ä½¿ç”¨åˆ—çš„åˆ—è¡¨èƒ½ä½¿SQLä»£ç ç»§ç»­å‘æŒ¥ä½œç”¨,å³ä½¿è¡¨ç»“æ„å‘ç”Ÿäº†å˜åŒ–ã€‚ ä»”ç»†åœ°ç»™å‡ºå€¼ ä¸ç®¡ä½¿ç”¨å“ªç§INSERTè¯­æ³•,éƒ½å¿…é¡»ç»™å‡ºVALUESçš„æ­£ç¡®æ•°ç›®ã€‚å¦‚æœä¸æä¾›åˆ—åï¼Œåˆ™å¿…é¡»ç»™æ¯ä¸ªè¡¨åˆ—æä¾›ä¸€ä¸ªå€¼ã€‚å¦‚æœæä¾›åˆ—å,åˆ™å¿…é¡»å¯¹æ¯ä¸ªåˆ—å‡ºçš„åˆ—ç»™å‡ºä¸€ä¸ªå€¼ã€‚å¦‚æœä¸è¿™æ ·,å°†äº§ç”Ÿä¸€æ¡é”™è¯¯æ¶ˆæ¯,ç›¸åº”çš„è¡Œæ’å…¥ä¸æˆåŠŸã€‚ çœç•¥åˆ— å¦‚æœè¡¨çš„å®šä¹‰å…è®¸,åˆ™å¯ä»¥åœ¨INSERTæ“ä½œä¸­çœç•¥æŸäº›åˆ—ã€‚çœç•¥çš„åˆ—å¿…é¡»æ»¡è¶³ä»¥ä¸‹æŸä¸ªæ¡ä»¶ã€‚ è¯¥åˆ—å®šä¹‰ä¸ºå…è®¸NULLå€¼(æ— å€¼æˆ–ç©ºå€¼)ã€‚ åœ¨è¡¨å®šä¹‰ä¸­ç»™å‡ºé»˜è®¤å€¼ã€‚è¿™è¡¨ç¤ºå¦‚æœä¸ç»™å‡ºå€¼ï¼Œå°†ä½¿ç”¨é»˜è®¤å€¼ã€‚ å¦‚æœå¯¹è¡¨ä¸­ä¸å…è®¸NULLå€¼ä¸”æ²¡æœ‰é»˜è®¤å€¼çš„åˆ—ä¸ç»™å‡ºå€¼,åˆ™MySQLå°†äº§ç”Ÿä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼Œå¹¶ä¸”ç›¸åº”çš„è¡Œæ’å…¥ä¸æˆåŠŸã€‚ æé«˜æ•´ä½“æ€§èƒ½ æ•°æ®åº“ç»å¸¸è¢«å¤šä¸ªå®¢æˆ·è®¿é—®,å¯¹å¤„ç†ä»€ä¹ˆè¯·æ±‚ä»¥åŠç”¨ä»€ä¹ˆæ¬¡åºå¤„ç†è¿›è¡Œç®¡ç†æ˜¯MySQLçš„ä»»åŠ¡ã€‚INSERTæ“ä½œå¯èƒ½å¾ˆè€—æ—¶(ç‰¹åˆ«æ˜¯æœ‰å¾ˆå¤šç´¢å¼•éœ€è¦æ›´æ–°æ—¶)ï¼Œè€Œä¸”å®ƒå¯èƒ½é™ä½ç­‰å¾…å¤„ç†çš„SELECTè¯­å¥çš„æ€§èƒ½ã€‚ å¦‚æœæ•°æ®æ£€ç´¢æ˜¯æœ€é‡è¦çš„(é€šå¸¸æ˜¯è¿™æ ·)ï¼Œåˆ™ä½ å¯ä»¥é€šè¿‡åœ¨INSERTå’ŒINTOä¹‹é—´æ·»åŠ å…³é”®å­—LOW_PRIORITYï¼ŒæŒ‡ç¤ºMySQLé™ä½INSERTè¯­å¥çš„ä¼˜å…ˆçº§,å¦‚ä¸‹æ‰€ç¤º:INSERT LON_PRIORITY INTOé‡Œï¼Œè¿™ä¹Ÿé€‚ç”¨UPDATEå’ŒDELETEè¯­å¥ã€‚ å¤šæ¡INSERTè¯­å¥ å¯ä»¥ä¸€æ¬¡æäº¤ï¼Œæ¯æ¡ä½¿ç”¨ä¸€ä¸ªåˆ†å·ç»“æŸã€‚(å•æ¡è¯­å¥æ¯”å¤šæ¡å¿«) æ’å…¥æ£€ç´¢å‡ºçš„æ•°æ®(ä¸æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨)INSERTå¯ä»¥å°†SELECTè¯­å¥çš„æŸ¥è¯¢ç»“æœæ’å…¥è¡¨ä¸­ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„INSERT SELECTã€‚å®ƒç”±ä¸€æ¡INSERTè¯­å¥å’Œä¸€æ¡SELECTè¯­å¥ç»„æˆã€‚ æŠŠå¦ä¸€ä¸ªè¡¨ä¸­çš„é¡¾å®¢åˆ—åˆå¹¶åˆ°Customersè¡¨ä¸­: 123456INSERT INTO Customers(cust_id,cust_contact,cust_email, cust_name,cust_address,cust_city, cust_state,cust_zip,cust_country)SELECT cust_id,cust_contact,cust_email,cust_name,cust_address, cust_city,cust_state,cust_zip,cust_countryFROM CustNew; æ›´æ–°å’Œåˆ é™¤æ•°æ®æ›´æ–°æ•°æ®æ›´æ–°ï¼ˆä¿®æ”¹ï¼‰è¡¨ä¸­æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ç§UPDATEçš„æ–¹å¼ï¼š æ›´æ–°è¡¨ä¸­çš„ç‰¹å®šè¡Œã€‚ æ›´æ–°è¡¨ä¸­çš„æ‰€æœ‰è¡Œã€‚ åŸºæœ¬çš„UPDATEè¯­å¥ç”±3éƒ¨åˆ†ç»„æˆï¼š è¦æ›´æ–°çš„è¡¨ã€‚ åˆ—åå’Œå®ƒä»¬çš„æ–°å€¼ã€‚ ç¡®å®šè¦æ›´æ–°å“ªäº›è¡Œçš„è¿‡æ»¤æ¡ä»¶ã€‚ ä¸è¦çœç•¥WHEREå­å¥ åœ¨ä½¿ç”¨UPDATEæ—¶ä¸€å®šè¦æ³¨æ„ç»†å¿ƒã€‚å› ä¸ºç¨ä¸æ³¨æ„ï¼Œå°±ä¼šæ›´æ–°è¡¨ä¸­æ‰€æœ‰è¡Œã€‚ 12UPDATE customersSET cust_emai1 &#x3D; &#39;e1mer@fudd.com&#39;WHERE cust_id &#x3D; 10005; åœ¨UPDATEè¯­å¥ä¸­ä½¿ç”¨å­æŸ¥è¯¢ UPDATEè¯­å¥ä¸­å¯ä»¥ä½¿ç”¨å­æŸ¥è¯¢,ä½¿å¾—èƒ½ç”¨SELECTè¯­å¥æ£€ç´¢å‡ºçš„æ•°æ®æ›´æ–°åˆ—æ•°æ®ã€‚ IGNOREå…³é”®å­— å¦‚æœç”¨UPDATEè¯­å¥æ›´æ–°å¤šè¡Œ,å¹¶ä¸”åœ¨æ›´æ–°è¿™äº›è¡Œä¸­çš„ä¸€è¡Œæˆ–å¤šè¡Œæ—¶å‡ºä¸€ä¸ªç°é”™è¯¯,åˆ™æ•´ä¸ªUPDATEæ“ä½œè¢«å–æ¶ˆ(é”™è¯¯å‘ç”Ÿå‰æ›´æ–°çš„æ‰€æœ‰è¡Œè¢«æ¢å¤åˆ°å®ƒä»¬åŸæ¥çš„å€¼)ã€‚ä¸ºå³ä½¿æ˜¯å‘ç”Ÿé”™è¯¯ï¼Œä¹Ÿç»§ç»­è¿›è¡Œæ›´æ–°,å¯ä½¿ç”¨IGNOREå…³é”®å­—ï¼Œ å¦‚ä¸‹æ‰€ç¤º: UPDATE IGNORE customers. åˆ é™¤æ•°æ®ï¼ˆåˆ é™¤è¡¨çš„å†…å®¹è€Œä¸æ˜¯è¡¨æœ¬èº«ï¼‰ä»ä¸€ä¸ªè¡¨ä¸­åˆ é™¤ï¼ˆå»æ‰ï¼‰æ•°æ®ï¼Œå¯ä½¿ç”¨DELETEè¯­å¥ï¼Œä¸¤ç§ä½¿ç”¨DELETEçš„æ–¹å¼ï¼š ä»è¡¨ä¸­åˆ é™¤ç‰¹å®šçš„è¡Œã€‚ ä»è¡¨ä¸­åˆ é™¤æ‰€æœ‰è¡Œã€‚ åŸºæœ¬çš„DELETEè¯­å¥ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š è¦åˆ é™¤çš„è¡¨ã€‚ ç¡®å®šè¦åˆ é™¤å“ªäº›è¡Œçš„è¿‡æ»¤æ¡ä»¶ã€‚ ä¸è¦çœç•¥WHEREå­å¥ åœ¨ä½¿ç”¨DELETEæ—¶ä¸€å®šè¦æ³¨æ„ç»†å¿ƒã€‚å› ä¸ºç¨ä¸æ³¨æ„ï¼Œå°±ä¼šé”™è¯¯åœ°åˆ é™¤è¡¨ä¸­æ‰€æœ‰è¡Œã€‚ å¯ä»¥é™åˆ¶å’Œæ§åˆ¶DELETEè¯­å¥çš„ä½¿ç”¨ï¼ŒMySQLæ²¡æœ‰æ’¤é”€(undo)æŒ‰é’®ï¼Œæ‰€ä»¥ä½ åº”è¯¥å°å¿ƒä½¿ç”¨UPDATEå’ŒDELETEã€‚ DELETE FROM customers WHERE cust_id - 10006; æ›´å¿«çš„åˆ é™¤ å¦‚æœæƒ³ä»è¡¨ä¸­åˆ é™¤æ‰€æœ‰è¡Œ,ä¸è¦ä½¿ç”¨DELETE.å¯ä½¿ç”¨TRUNCATE TABLEè¯­å¥,å®ƒå®Œæˆç›¸åŒçš„å·¥ä½œ,ä½†é€Ÿåº¦æ›´å¿«(TRUNCATEå®é™…æ˜¯åˆ é™¤åŸæ¥çš„è¡¨å¹¶é‡æ–°åˆ›å»ºä¸€ä¸ªè¡¨,è€Œä¸æ˜¯é€è¡Œåˆ é™¤è¡¨ä¸­çš„æ•°æ®)ã€‚ ä¸‹é¢æ˜¯è®¸å¤šSQLç¨‹åºå‘˜ä½¿ç”¨UPDATEæˆ–DELETEæ—¶æ‰€éµå¾ªçš„ä¹ æƒ¯ã€‚ é™¤éç¡®å®æ‰“ç®—æ›´æ–°å’Œåˆ é™¤æ¯ä¸€è¡Œï¼Œå¦åˆ™ç»å¯¹ä¸è¦ä½¿ç”¨ä¸å¸¦WHEREå­å¥çš„UPDATEæˆ–DELETEè¯­å¥ã€‚ ä¿è¯æ¯ä¸ªè¡¨éƒ½æœ‰ä¸»é”®(å¦‚æœå¿˜è®°è¿™ä¸ªå†…å®¹ï¼Œè¯·å‚é˜…ç¬¬15ç« )ï¼Œå°½å¯èƒ½åƒWHEREå­å¥é‚£æ ·ä½¿ç”¨å®ƒ(å¯ä»¥æŒ‡å®šå„ä¸»é”®ã€å¤šä¸ªå€¼æˆ–å€¼çš„èŒƒå›´)ã€‚ åœ¨å¯¹UPDATEæˆ–DELETEè¯­å¥ä½¿ç”¨WHEREå­å¥å‰ï¼Œåº”è¯¥å…ˆç”¨SELECTè¿›è¡Œæµ‹è¯•ï¼Œä¿è¯å®ƒè¿‡æ»¤çš„æ˜¯æ­£ç¡®çš„è®°å½•ï¼Œä»¥é˜²ç¼–å†™çš„WHEREå­å¥ä¸æ­£ç¡®ã€‚ ä½¿ç”¨å¼ºåˆ¶å®æ–½å¼•ç”¨å®Œæ•´æ€§çš„æ•°æ®åº“ï¼Œè¿™æ ·MySQLå°†ä¸å…è®¸åˆ é™¤å…·æœ‰ä¸å…¶ä»–è¡¨ç›¸å…³è”çš„æ•°æ®çš„è¡Œã€‚ï¼ˆæ¯”å¦‚å¤–é”®å…³è”ï¼‰ åˆ›å»ºå’Œæ“çºµè¡¨åˆ›å»ºè¡¨MySQLä¸ä»…ç”¨äºè¡¨æ•°æ®æ“çºµï¼Œè€Œä¸”è¿˜å¯ä»¥ç”¨æ¥æ‰§è¡Œæ•°æ®åº“å’Œè¡¨çš„æ‰€æœ‰æ“ä½œï¼ŒåŒ…æ‹¬è¡¨æœ¬èº«çš„åˆ›å»ºå’Œå¤„ç†ã€‚ ä¸€èˆ¬æœ‰ä¸¤ç§åˆ›å»ºè¡¨çš„æ–¹æ³•: ä½¿ç”¨å…·æœ‰äº¤äº’å¼åˆ›å»ºå’Œç®¡ç†è¡¨çš„å·¥å…·ï¼ˆå¦‚ç¬¬2ç« è®¨è®ºçš„å·¥å…·); è¡¨ä¹Ÿå¯ä»¥ç›´æ¥ç”¨MySQLè¯­å¥æ“çºµã€‚ 123456789CREATE TABLE Products( prod_id char(10) NOT NULL , vend_id char(10) NOT NULL , prod_name char(255) NOT NULL , prod_price decimal(8,2) NOT NULL , prod_desc text NULL, PRIMARY KEY(prod_id))ENGINE&#x3D;InnoDB; ä½¿ç”¨AUTO_INCREMENT(è‡ªå¢åˆå§‹å€¼å¯é€‰)12345CREATE TABLE Products(cust_id int NOT NULL AUTO_INCREMENT,)AUTO_INCREMENT &#x3D; 100; æŒ‡å®šé»˜è®¤å€¼æ·»åŠ é»˜è®¤å€¼çš„æ—¶å€™ï¼Œä½¿ç”¨å…³é”®å­—DEFAULTã€‚ä¸å…è®¸å‡½æ•° ä¸å¤§å¤šæ•°DBMSä¸ä¸€æ ·,MySQLä¸å…è®¸ä½¿ç”¨å‡½æ•°ä½œä¸ºé»˜è®¤å€¼,å®ƒåªæ”¯æŒå¸¸é‡ã€‚ ä½¿ç”¨é»˜è®¤å€¼è€Œä¸æ˜¯NULLå€¼ è®¸å¤šæ•°æ®åº“å¼€å‘äººå‘˜ä½¿ç”¨é»˜è®¤å€¼è€Œä¸æ˜¯NULLåˆ—,ç‰¹åˆ«æ˜¯å¯¹ç”¨äºè®¡ç®—æˆ–æ•°æ®åˆ†ç»„çš„åˆ—æ›´æ˜¯å¦‚æ­¤ã€‚ æ›´æ–°è¡¨ALTERåˆ©ç”¨ALTER TABLEæ›´æ–°è¡¨ï¼Œè¦è€ƒè™‘ï¼šç†æƒ³æƒ…å†µä¸‹ï¼Œä¸è¦åœ¨è¡¨ä¸­åŒ…å«æ•°æ®çš„æ—¶å€™å¯¹å…¶è¿›è¡Œæ›´æ–°ï¼Œåº”è¯¥åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œè€ƒè™‘æœªæ¥çš„æ‰©å±•æ€§ï¼Œé¿å…å¯¹è¡¨çš„ç»“æ„åšå¤§æ”¹åŠ¨ã€‚ æ‰€æœ‰çš„DBMSéƒ½å…è®¸å¯¹ç°æœ‰è¡¨å¢åŠ åˆ—ï¼Œä¸è¿‡å¯¹æ‰€å¢åŠ åˆ—çš„æ•°æ®ç±»å‹ï¼ˆä»¥åŠNULLå’ŒDEFAULTçš„ä½¿ç”¨ï¼‰æœ‰æ‰€é™åˆ¶ã€‚ å¤šæ•°DBMSå…è®¸é‡å‘½åè¡¨ä¸­çš„åˆ—ï¼Œä¸å…è®¸åˆ é™¤æˆ–æ›´æ”¹è¡¨ä¸­çš„åˆ—ã€‚ å¤æ‚çš„è¡¨ç»“æ„æ›´æ”¹ä¸€èˆ¬éœ€è¦æ‰‹åŠ¨åˆ é™¤è¿‡ç¨‹ï¼Œå®ƒæ¶‰åŠä»¥ä¸‹æ­¥éª¤: ç”¨æ–°çš„åˆ—å¸ƒå±€åˆ›å»ºä¸€ä¸ªæ–°è¡¨; ä½¿ç”¨INSERT SELECTè¯­å¥(å…³äºè¿™æ¡è¯­å¥çš„è¯¦ç»†ä»‹ç»ï¼Œä»æ—§è¡¨å¤åˆ¶æ•°æ®åˆ°æ–°è¡¨ã€‚å¦‚æœæœ‰å¿…è¦ï¼Œå¯ä½¿ç”¨è½¬æ¢å‡½æ•°å’Œè®¡ç®—å­—æ®µ; æ£€éªŒåŒ…å«æ‰€éœ€æ•°æ®çš„æ–°è¡¨; é‡å‘½åæ—§è¡¨ï¼ˆå¦‚æœç¡®å®šï¼Œå¯ä»¥åˆ é™¤å®ƒ); ç”¨æ—§è¡¨åŸæ¥çš„åå­—é‡å‘½åæ–°è¡¨; æ ¹æ®éœ€è¦ï¼Œé‡æ–°åˆ›å»ºè§¦å‘å™¨ã€å­˜å‚¨è¿‡ç¨‹ã€ç´¢å¼•å’Œå¤–é”®ã€‚ åˆ é™¤è¡¨DROP TABLE customers2; é‡å‘½åè¡¨RENAME TABLE customers2 TO customers; ä½¿ç”¨è§†å›¾ç†è§£è§†å›¾æœ€å¥½æ–¹æ³•æ˜¯çœ‹ä¸€ä¸ªä¾‹å­ã€‚ç”¨ä¸‹é¢çš„SELECTè¯­å¥ä»3ä¸ªè¡¨ä¸­æ£€ç´¢æ•°æ®:1234SELECT cust_name,cust_contactFROM customers,orders, orderitemsWHERE customers.cust_id &#x3D; orders.cust_idAND orderitems.order_num &#x3D; orders.order_numAND prod_id &#x3D; &#39;TNT2 &#39;; ä¿®æ”¹æˆä¸éœ€è¦çŸ¥é“è”ç»“å…³ç³»çš„è§†å›¾12SELECT cust_nameï¼Œcust_contact FROM productcustomersWHERE prod_id &#x3D; &#39;TNT2&#39;; ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è§†å›¾æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†è§†å›¾åº”ç”¨çš„ä¸€ä¸ªä¾‹å­ã€‚ä¸‹é¢æ˜¯è§†å›¾çš„ä¸€äº›å¸¸è§åº”ç”¨ã€‚ é‡ç”¨SQLè¯­å¥ã€‚ ç®€åŒ–å¤æ‚çš„SQLæ“ä½œã€‚åœ¨ç¼–å†™æŸ¥è¯¢åï¼Œå¯ä»¥æ–¹ä¾¿åœ°é‡ç”¨å®ƒè€Œä¸å¿…çŸ¥é“å®ƒçš„åŸºæœ¬æŸ¥è¯¢ç»†èŠ‚ã€‚ ä½¿ç”¨è¡¨çš„ç»„æˆéƒ¨åˆ†è€Œä¸æ˜¯æ•´ä¸ªè¡¨ã€‚ ä¿æŠ¤æ•°æ®ã€‚å¯ä»¥ç»™ç”¨æˆ·æˆäºˆè¡¨çš„ç‰¹å®šéƒ¨åˆ†çš„è®¿é—®æƒé™è€Œä¸æ˜¯æ•´ä¸ªè¡¨çš„è®¿é—®æƒé™ã€‚ æ›´æ”¹æ•°æ®æ ¼å¼å’Œè¡¨ç¤ºã€‚è§†å›¾å¯è¿”å›ä¸åº•å±‚è¡¨çš„è¡¨ç¤ºå’Œæ ¼å¼ä¸åŒçš„æ•°æ®ã€‚ è§†å›¾çš„è§„åˆ™å’Œé™åˆ¶è§†å›¾åˆ›å»ºå’Œä½¿ç”¨çš„ä¸€äº›æœ€å¸¸è§çš„è§„åˆ™å’Œé™åˆ¶ã€‚ ä¸è¡¨ä¸€æ ·ï¼Œè§†å›¾å¿…é¡»å”¯ä¸€å‘½åï¼ˆä¸èƒ½ç»™è§†å›¾å–ä¸åˆ«çš„è§†å›¾æˆ–è¡¨ç›¸åŒçš„åå­—)ã€‚å¯¹äºå¯ä»¥åˆ›å»ºçš„è§†å›¾æ•°ç›®æ²¡æœ‰é™åˆ¶ã€‚ ä¸ºäº†åˆ›å»ºè§†å›¾ï¼Œå¿…é¡»å…·æœ‰è¶³å¤Ÿçš„è®¿é—®æƒé™ã€‚è¿™äº›é™åˆ¶é€šå¸¸ç”±æ•°æ®åº“ç®¡ç†äººå‘˜æˆäºˆã€‚ è§†å›¾å¯ä»¥åµŒå¥—ï¼Œå³å¯ä»¥åˆ©ç”¨ä»å…¶ä»–è§†å›¾ä¸­æ£€ç´¢æ•°æ®çš„æŸ¥è¯¢æ¥æ„é€ ä¸€ä¸ªè§†å›¾ã€‚ ORDER BYå¯ä»¥ç”¨åœ¨è§†å›¾ä¸­ï¼Œä½†å¦‚æœä»è¯¥è§†å›¾æ£€ç´¢æ•°æ®SELECTä¸­ä¹Ÿå«æœ‰ORDER BYï¼Œé‚£ä¹ˆè¯¥è§†å›¾ä¸­çš„ORDER BYå°†è¢«è¦†ç›–ã€‚ è§†å›¾ä¸èƒ½ç´¢å¼•ï¼Œä¹Ÿä¸èƒ½æœ‰å…³è”çš„è§¦å‘å™¨æˆ–é»˜è®¤å€¼ã€‚ è§†å›¾å¯ä»¥å’Œè¡¨ä¸€èµ·ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œç¼–å†™ä¸€æ¡è”ç»“è¡¨å’Œè§†å›¾çš„SELECTè¯­å¥ã€‚ åˆ›å»ºè§†å›¾è§†å›¾æ˜¯è™šæ‹Ÿçš„è¡¨ï¼ŒåªåŒ…å«ä½¿ç”¨æ—¶åŠ¨æ€æ£€ç´¢æ•°æ®çš„æŸ¥è¯¢ã€‚ è§†å›¾ç”¨CREATE VIEWè¯­å¥æ¥åˆ›å»ºã€‚ ä½¿ç”¨SHOW CREATE VIEW viewname;æ¥æŸ¥çœ‹åˆ›å»ºè§†å›¾çš„è¯­å¥ã€‚ ç”¨DROPåˆ é™¤è§†å›¾ï¼Œå…¶è¯­æ³•ä¸ºDROP VIEW viewname;ã€‚ æ›´æ–°è§†å›¾æ—¶ï¼Œå¯å…ˆç”¨DROPå†ç”¨CREATEï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨CREATE OR REPLACE VIEWã€‚å¦‚æœè¦æ›´æ–°çš„è§†å›¾ä¸å­˜åœ¨ï¼Œåˆ™ç¬¬2æ¡æ›´æ–°è¯­å¥ä¼šåˆ›å»ºä¸€ä¸ªè§†å›¾ï¼›å¦‚æœè¦æ›´æ–°çš„è§†å›¾å­˜åœ¨ï¼Œåˆ™ç¬¬2æ¡æ›´æ–°è¯­å¥ä¼šæ›¿æ¢åŸæœ‰è§†å›¾ã€‚ **åˆ›å»ºå¯é‡ç”¨çš„è§†å›¾ **åˆ›å»ºä¸å—ç‰¹å®šæ•°æ®é™åˆ¶çš„è§†å›¾æ˜¯ä¸€ç§å¥½åŠæ³•ã€‚ä¾‹å¦‚ï¼Œä¸Šé¢åˆ›å»ºçš„è§†å›¾è¿”å›ç”Ÿäº§æ‰€æœ‰äº§å“çš„å®¢æˆ· è€Œä¸ä»…ä»…æ˜¯ç”Ÿäº§TNT2çš„å®¢æˆ·ã€‚æ‰©å±•è§†å›¾çš„èŒƒå›´ä¸ä»…ä½¿å¾—å®ƒèƒ½è¢«é‡ç”¨,è€Œä¸”ç”šè‡³æ›´æœ‰ç”¨ã€‚è¿™æ ·åšä¸éœ€è¦åˆ›å»ºå’Œç»´æŠ¤å¤šä¸ªç±»ä¼¼è§†å›¾ã€‚ åˆ©ç”¨è§†å›¾ç®€åŒ–å¤æ‚çš„è”ç»“å…ˆåˆ›å»ºProductCustomersè§†å›¾ 12345CREATE VIEW ProductCustomers ASSELECT cust_name, cust_contact, prod_idFROM Customers, Orders, OrderItemsWHERE Customers.cust_id &#x3D; Orders.cust_idAND OrderItems.order_num &#x3D; Orders.order_num; æ£€ç´¢è®¢è´­äº†äº§å“RGAN01çš„é¡¾å®¢ 123SELECT cust_name, cust_contactFROM ProductCustomersWHERE prod_id &#x3D; &#39;RGAN01&#39;; ç”¨è§†å›¾é‡æ–°æ ¼å¼åŒ–æ£€ç´¢å‡ºçš„æ•°æ®å°†ä¾›åº”å•†Vendorsè¡¨ä¸­çš„vend_nameå’Œvend_countryåˆå¹¶è¾“å‡ºæ˜¾ç¤º 1234567CREATE VIEW VendorLocations ASSELECT concat(RTRIM(vend_name), &#39;(&#39;, RTRIM(vend_country), &#39;)&#39;)AS vend_titleFROM Vendors;SELECT * FROM VendorLocations; ç”¨è§†å›¾è¿‡æ»¤ä¸æƒ³è¦çš„æ•°æ®å®šä¹‰CustomerEmailListè§†å›¾ï¼Œè¿‡æ»¤æ²¡æœ‰Emailçš„é¡¾å®¢ã€‚ 1234567CREATE VIEW CustomerEmailList ASSELECT cust_id, cust_name, cust_emailFROM CustomersWHERE cust_email IS NOT NULL;SELECT * FROM CustomerEmailList; ä½¿ç”¨è§†å›¾ä¸è®¡ç®—å­—æ®µæ£€ç´¢æŸä¸ªè®¢å•çš„äº§å“ï¼Œè®¡ç®—æ¯ç§äº§å“çš„æ€»ä»·æ ¼ã€‚ 12345678CREATE VIEW OrderItemsExpanded ASSELECT order_num, prod_id, quantity, item_price, quantity * item_price AS expanded_priceFROM OrderItems;SELECT *FROM OrderItemsExpandedWHERE order_num &#x3D; 20008; æ›´æ–°è§†å›¾è¿„ä»Šä¸ºæ­¢çš„æ‰€æœ‰è§†å›¾éƒ½æ˜¯å’ŒSELECTè¯­å¥ä½¿ç”¨çš„ã€‚ç„¶è€Œï¼Œè§†å›¾çš„æ•°æ®èƒ½å¦æ›´æ–°ï¼Ÿç­”æ¡ˆè§†æƒ…å†µè€Œå®šã€‚ é€šå¸¸ï¼Œè§†å›¾æ˜¯å¯æ›´æ–°çš„ï¼Œå³ï¼Œå¯ä»¥å¯¹å®ƒä»¬ä½¿ç”¨INSERTã€UPDATEå’ŒDELETEã€‚æ›´æ–°ä¸€ä¸ªè§†å›¾å°†æ›´æ–°å…¶åŸºè¡¨ï¼Œå¦‚æœå¯¹è§†å›¾å¢åŠ æˆ–è€…åˆ é™¤è¡Œï¼Œå®é™…ä¸Šæ˜¯å¯¹å…¶åŸºè¡¨å¢åŠ æˆ–åˆ é™¤è¡Œã€‚ ä½†æ˜¯ï¼Œå¹¶éæ‰€æœ‰è§†å›¾éƒ½æ˜¯å¯æ›´æ–°çš„ã€‚åŸºæœ¬ä¸Šå¯ä»¥è¯´ï¼Œå¦‚æœMySQLä¸èƒ½æ­£ç¡®åœ°ç¡®å®šè¢«æ›´æ–°çš„åŸºæ•°æ®ï¼Œåˆ™ä¸å…è®¸æ›´æ–°ï¼ˆåŒ…æ‹¬æ’å…¥å’Œåˆ é™¤ï¼‰ã€‚ æ¢å¥è¯è¯´ï¼Œå¦‚æœè§†å›¾å®šä¹‰ä¸­æœ‰ä»¥ä¸‹æ“ä½œï¼Œåˆ™ä¸èƒ½è¿›è¡Œè§†å›¾çš„æ›´æ–°ã€‚ åˆ†ç»„ï¼ˆä½¿ç”¨GROUP BYå’ŒHAVINGï¼‰ã€‚ è”ç»“ã€‚ å­æŸ¥è¯¢ã€‚ å¹¶ã€‚ èšé›†å‡½æ•°ï¼ˆMIN()ã€COUNT()ç­‰ï¼‰ã€‚ DISTINCTã€‚ å¯¼å‡ºï¼ˆè®¡ç®—ï¼‰åˆ—ã€‚ æ¢å¥è¯è¯´ï¼Œæœ¬ç« çš„è®¸å¤šä¾‹å­çš„è§†å›¾éƒ½æ˜¯ä¸å¯æ›´æ–°çš„ã€‚è¿™å¬ä¸Šå»å¥½åƒæ˜¯ä¸€ä¸ªä¸¥é‡çš„é™åˆ¶ï¼Œä½†å®é™…ä¸Šä¸æ˜¯ï¼Œå› ä¸ºè§†å›¾ä¸»è¦ç”¨äºæ•°æ®æ£€ç´¢ã€‚ ä¸€èˆ¬ï¼Œåº”è¯¥å°†è§†å›¾ç”¨äºæ£€ç´¢ï¼ˆSELECTè¯­å¥ï¼‰è€Œä¸ç”¨äºæ›´æ–°ï¼ˆINSERTã€UPDATEå’ŒDELETEï¼‰ã€‚ ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹å­˜å‚¨è¿‡ç¨‹è¿„ä»Šä¸ºæ­¢ï¼Œä½¿ç”¨çš„å¤§å¤šæ•°SQLè¯­å¥éƒ½æ˜¯é’ˆå¯¹ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨çš„å•æ¡è¯­å¥ã€‚å¹¶éæ‰€æœ‰æ“ä½œéƒ½è¿™ä¹ˆç®€å•ï¼Œç»å¸¸ä¼šæœ‰ä¸€ä¸ªå®Œæ•´çš„æ“ä½œéœ€è¦å¤šæ¡è¯­å¥æ‰èƒ½å®Œæˆã€‚ æ¯”å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼š ä¸ºäº†å¤„ç†è®¢å•ï¼Œéœ€è¦æ ¸å¯¹ä»¥ä¿è¯åº“å­˜ä¸­æœ‰ç›¸åº”çš„ç‰©å“ã€‚ å¦‚æœåº“å­˜æœ‰ç‰©å“ï¼Œè¿™äº›ç‰©å“éœ€è¦é¢„å®šä»¥ä¾¿ä¸å°†å®ƒä»¬å†å–ç»™åˆ«çš„äººï¼Œå¹¶ä¸”è¦å‡å°‘å¯ç”¨çš„ç‰©å“æ•°é‡ä»¥åŠåæ˜ æ­£ç¡®çš„åº“å­˜é‡ã€‚ åº“å­˜ä¸­æ²¡æœ‰çš„ç‰©å“éœ€è¦è®¢è´­ï¼Œè¿™éœ€è¦ä¸ä¾›åº”å•†è¿›è¡ŒæŸç§äº¤äº’ã€‚ å…³äºå“ªäº›ç‰©å“å…¥åº“ï¼ˆå¹¶ä¸”å¯ä»¥ç«‹å³å‘è´§ï¼‰å’Œå“ªäº›ç‰©å“é€€è®¢ï¼Œéœ€è¦é€šçŸ¥ç›¸åº”çš„å®¢æˆ·ã€‚ æ‰§è¡Œä¸Šè¿°çš„ä¾‹å­ï¼Œéœ€è¦é’ˆå¯¹è®¸å¤šè¡¨çš„å¤šæ¡SQLè¯­å¥ã€‚æ­¤å¤–ï¼Œéœ€è¦æ‰§è¡Œçš„å…·ä½“è¯­å¥åŠå…¶æ¬¡åºä¹Ÿä¸æ˜¯å›ºå®šçš„ï¼Œå®ƒä»¬å¯èƒ½ä¼šï¼ˆå’Œå°†ï¼‰æ ¹æ®å“ªäº›ç‰©å“åœ¨åº“å­˜ä¸­ï¼Œå“ªäº›ä¸åœ¨è€Œå˜åŒ–ã€‚ å­˜å‚¨è¿‡ç¨‹ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸ºä»¥åçš„ä½¿ç”¨è€Œä¿å­˜çš„ä¸€æ¡æˆ–å¤šæ¡SQLè¯­å¥çš„é›†åˆã€‚å¯å°†å…¶è§†ä¸ºæ‰¹æ–‡ä»¶ï¼Œä½†å®ƒä»¬çš„ä½œç”¨ä¸é™äºæ‰¹å¤„ç†ã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹çš„ä¸»è¦ç†ç”±ï¼š é€šè¿‡æŠŠå¤„ç†å°è£…åœ¨å®¹æ˜“ä½¿ç”¨çš„å•å…ƒä¸­ï¼Œç®€åŒ–å¤æ‚çš„æ“ä½œã€‚ ç”±äºä¸è¦æ±‚åå¤å»ºç«‹ä¸€ç³»åˆ—å¤„ç†æ­¥éª¤ï¼Œè¿™ä¿è¯äº†æ•°æ®çš„å®Œæ•´æ€§ã€‚å¦‚æœæ‰€æœ‰å¼€å‘äººå‘˜å’Œåº”ç”¨ç¨‹åºéƒ½ä½¿ç”¨åŒä¸€ï¼ˆè¯•éªŒå’Œæµ‹è¯•ï¼‰å­˜å‚¨è¿‡ç¨‹ï¼Œåˆ™ä½¿ç”¨çš„ä»£ç éƒ½æ˜¯ç›¸åŒçš„ã€‚ï¼ˆè¿™ä¸€ç‚¹çš„å»¶ä¼¸å°±æ˜¯é˜²æ­¢é”™è¯¯ï¼Œéœ€è¦æ‰§è¡Œçš„æ­¥éª¤è¶Šå¤šï¼Œå‡ºé”™çš„å¯èƒ½æ€§å°±è¶Šå¤§ã€‚é˜²æ­¢é”™è¯¯ä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚ï¼‰ ç®€åŒ–å¯¹å˜åŠ¨çš„ç®¡ç†ã€‚å¦‚æœè¡¨åã€åˆ—åæˆ–ä¸šåŠ¡é€»è¾‘æœ‰å˜åŒ–ï¼Œåªéœ€è¦æ›´æ”¹å­˜å‚¨è¿‡ç¨‹çš„ä»£ç ï¼Œä½¿ç”¨å®ƒçš„äººå‘˜ç”šè‡³ä¸éœ€è¦çŸ¥é“è¿™äº›å˜åŒ–ã€‚ï¼ˆè¿™ä¸€ç‚¹çš„å»¶ä¼¸å°±æ˜¯å®‰å…¨æ€§ï¼Œé€šè¿‡å­˜å‚¨è¿‡ç¨‹é™åˆ¶å¯¹åŸºç¡€æ•°æ®çš„è®¿é—®å‡å°‘äº†æ•°æ®è®¹è¯¯çš„æœºä¼šã€‚ï¼‰ æé«˜æ€§èƒ½ã€‚å› ä¸ºä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ¯”ä½¿ç”¨ç®€å•çš„SQLè¯­å¥è¦å¿«ã€‚ å­˜åœ¨ä¸€äº›åªèƒ½ç”¨åœ¨å•ä¸ªè¯·æ±‚ä¸­çš„MySQLå…ƒç´ å’Œç‰¹æ€§ï¼Œå­˜å‚¨è¿‡ç¨‹å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥ç¼–å†™åŠŸèƒ½æ›´å¼ºæ›´çµæ´»çš„ä»£ç ã€‚ ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹çš„3ä¸ªä¸»è¦å¥½å¤„å°±æ˜¯ï¼šç®€å•ã€å®‰å…¨ã€é«˜æ€§èƒ½ã€‚ å­˜åœ¨çš„ç¼ºé™·ï¼š ä¸€èˆ¬æ¥è¯´ï¼Œå­˜å‚¨è¿‡ç¨‹çš„ç¼–å†™æ¯”åŸºæœ¬SQLè¯­å¥å¤æ‚ï¼Œç¼–å†™å­˜å‚¨è¿‡ç¨‹éœ€è¦æ›´é«˜çš„æŠ€èƒ½ï¼Œæ›´ä¸°å¯Œçš„ç»éªŒã€‚ å¯èƒ½æ²¡æœ‰åˆ›å»ºå­˜å‚¨è¿‡ç¨‹çš„å®‰å…¨è®¿é—®æƒé™ã€‚è®¸å¤šæ•°æ®åº“ç®¡ç†å‘˜é™åˆ¶å­˜å‚¨è¿‡ç¨‹çš„åˆ›å»ºæƒé™ï¼Œå…è®¸ç”¨æˆ·ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œä½†ä¸å…è®¸ä»–ä»¬åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ã€‚ ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹MySQLç§°å­˜å‚¨è¿‡ç¨‹çš„æ‰§è¡Œä¸ºè°ƒç”¨ï¼Œå› æ­¤MySQLæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹çš„è¯­å¥ä¸ºCALLã€‚CALLæ¥å—å­˜å‚¨è¿‡ç¨‹çš„åå­—ä»¥åŠéœ€è¦ä¼ é€’ç»™å®ƒçš„ä»»æ„å‚æ•°ã€‚ 1CALL productpricing(@pricelow,@pricehigh,@priceaverage); æ‰§è¡Œåä¸ºproductpricingçš„å­˜å‚¨è¿‡ç¨‹ï¼Œå®ƒè®¡ç®—å¹¶è¿”å›äº§å“çš„æœ€ä½ã€æœ€é«˜å’Œå¹³å‡ä»·æ ¼ã€‚ åˆ›å»ºå­˜å‚¨è¿‡ç¨‹12345CREATE PROCEDURE productpricing()BEGIN SELECT AVG(prod_price) AS priceaverage FROM Products;END; æ­¤å­˜å‚¨è¿‡ç¨‹åä¸ºåˆ†æproductpricing, ç”¨CREATE PROCEDURE productpricing()è¯­å¥å®šä¹‰ã€‚å¦‚æœå­˜å‚¨è¿‡ç¨‹æ¥å—å‚æ•°ï¼Œå®ƒä»¬å°†åœ¨()ä¸­åˆ—ä¸¾å‡ºæ¥ã€‚æ­¤å­˜å‚¨è¿‡ç¨‹æ²¡æœ‰å‚æ•°ï¼Œä½†åè·Ÿçš„()ä»ç„¶éœ€è¦ã€‚BEGINå’ŒENDè¯­å¥ç”¨æ¥é™å®šå­˜å‚¨è¿‡ç¨‹ä½“ï¼Œè¿‡ç¨‹ä½“æœ¬èº«ä»…æ˜¯ä¸€ä¸ªç®€å•çš„SELECTè¯­å¥ã€‚ ç”±äºé»˜è®¤çš„MySQLè¯­å¥åˆ†éš”ç¬¦ä¸º;ï¼Œå¦‚æœå‘½ä»¤è¡Œå®ç”¨ç¨‹åºè¦è§£é‡Šå­˜å‚¨è¿‡ç¨‹è‡ªèº«å†…çš„;å­—ç¬¦ï¼Œåˆ™å®ƒä»¬æœ€ç»ˆä¸ä¼šæˆä¸ºå­˜å‚¨è¿‡ç¨‹çš„æˆåˆ†ï¼Œè¿™ä¼šå¯¼è‡´å­˜å‚¨è¿‡ç¨‹ä¸­çš„SQLå‡ºç°å¥æ³•é”™è¯¯ è§£å†³åŠæ³•å°±æ˜¯ä½¿ç”¨æ›´æ”¹å‘½ä»¤è¡Œå®ç”¨ç¨‹åºçš„è¯­æ³•åˆ†éš”ç¬¦ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789DELIMITER &#x2F;&#x2F; # ä¸´æ—¶æ”¹æˆ&#x2F;&#x2F;åˆ†éš”ç¬¦CREATE PROCEDURE productpricing()BEGIN SELECT AVG(prod_price) AS priceaverage FROM Products;END&#x2F;&#x2F;DELIMITER ; #æ¢å¤ åˆ†éš”ç¬¦ è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼š 1CALL productpricing(); CALL productpricing();æ‰§è¡Œåˆšåˆ›å»ºçš„å­˜å‚¨è¿‡ç¨‹å¹¶æ˜¾ç¤ºè¿”å›çš„ç»“æœã€‚å› ä¸ºå­˜å‚¨è¿‡ç¨‹å®é™…ä¸Šæ˜¯ä¸€ç§å‡½æ•°ï¼Œæ‰€ä»¥å­˜å‚¨è¿‡ç¨‹ååéœ€è¦æœ‰()ç¬¦å·ï¼Œå³ä½¿ä¸ä¼ é€’å‚æ•°ä¹Ÿéœ€è¦ã€‚ åˆ é™¤å­˜å‚¨è¿‡ç¨‹åˆ é™¤åˆšåˆ›å»ºçš„å­˜å‚¨è¿‡ç¨‹ï¼š 1DROP PROCEDURE productpricing; #ä¸éœ€è¦()ç¬¦å· ä½¿ç”¨å¸¦å‚æ•°çš„å­˜å‚¨è¿‡ç¨‹productpricingåªæ˜¯ä¸€ä¸ªç®€å•çš„å­˜å‚¨è¿‡ç¨‹ï¼Œå®ƒç®€å•åœ°æ˜¾ç¤ºSELECTè¯­å¥çš„ç»“æœã€‚ä¸€èˆ¬ï¼Œå­˜å‚¨è¿‡ç¨‹å¹¶ä¸æ˜¾ç¤ºç»“æœï¼Œè€Œæ˜¯æŠŠç»“æœè¿”å›ç»™ä½ æŒ‡å®šçš„å˜é‡ã€‚ æ³¨æ„ï¼šåˆ›å»ºä¸‹é¢çš„å­˜å‚¨è¿‡ç¨‹çš„æ—¶å€™ï¼Œè®°å¾—å…ˆåˆ é™¤ä»¥å‰åˆ›å»ºçš„productpricingã€‚ 1234567891011121314151617DELIMITER &#x2F;&#x2F;CREATE PROCEDURE productpricing( OUT pl DECIMAL(8,2), OUT ph DECIMAL(8,2), OUT pa DECIMAL(8,2))BEGIN SELECT MIN(prod_price) INTO pl FROM Products; SELECT MAX(prod_price) INTO ph FROM Products; SELECT AVG(prod_price) INTO pa FROM Products;END &#x2F;&#x2F;DELIMITER ; MySQLæ”¯æŒIN(ä¼ é€’ç»™å­˜å‚¨è¿‡ç¨‹)ã€OUT(ä»å­˜å‚¨è¿‡ç¨‹ä¼ å‡º) å‚æ•°çš„æ•°æ®ç±»å‹ å­˜å‚¨è¿‡ç¨‹çš„å‚æ•°å…è®¸çš„æ•°æ®ç±»å‹ä¸è¡¨ä¸­ä½¿ç”¨çš„æ•°æ®ç±»å‹ç›¸åŒã€‚æ³¨æ„,è®°å½•é›†ä¸æ˜¯å…è®¸çš„ç±»å‹,å› æ­¤,ä¸èƒ½é€šè¿‡ä¸€ä¸ªå‚æ•°è¿”å›å¤šä¸ªè¡Œå’Œåˆ—ã€‚è¿™å°±æ˜¯å‰é¢çš„ä¾‹å­ä¸ºä»€ä¹ˆè¦ä½¿ç”¨3ä¸ªå‚æ•°(å’Œ3æ¡SELECTè¯­å¥)çš„åŸå› ã€‚ ä¸ºè°ƒç”¨æ­¤å­˜å‚¨è¿‡ç¨‹ï¼Œå¿…é¡»æŒ‡å®š3ä¸ªå˜é‡åï¼š 123CALL productpricing(@pricelow, @pricehigh, @priceaverage); å˜é‡å æ‰€æœ‰MySQLå˜é‡éƒ½å¿…é¡»ä»¥@å¼€å§‹ã€‚ åœ¨è°ƒç”¨æ—¶ï¼Œè¿™æ¡è¯­å¥å¹¶ä¸æ˜¾ç¤ºä»»ä½•æ•°æ®ã€‚å®ƒè¿”å›ä»¥åå¯ä»¥æ˜¾ç¤ºï¼ˆæˆ–åœ¨å…¶ä»–å¤„ç†ä¸­ä½¿ç”¨ï¼‰çš„å˜é‡ã€‚ 12call productpricing(@max_id)select @max_id åˆ›å»ºå¦ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Œè¿™æ¬¡ä½¿ç”¨INå’ŒOUTå‚æ•°ã€‚ordertotalæ¥å—è®¢å•å·å¹¶è¿”å›è¯¥è®¢å•çš„åˆè®¡ï¼š 1234567891011121314DELIMITER &#x2F;&#x2F;CREATE PROCEDURE ordertotal( IN onumber INT, OUT ototal DECIMAL(8,2))BEGIN SELECT SUM(item_price * quantity) FROM OrderItems WHERE order_num &#x3D; onumber INTO ototal;END &#x2F;&#x2F;DELIMITER ; è°ƒç”¨è¯¥å­˜å‚¨è¿‡ç¨‹æ—¶ï¼Œå¿…é¡»ç»™ordertotalä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè®¢å•å·ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºåŒ…å«è®¡ç®—å‡ºæ¥çš„åˆè®¡çš„å˜é‡åã€‚ 12345CALL ordertotal(20005, @total);SELECT @total;CALL ordertotal(20009, @total);SELECT @total; å»ºç«‹æ™ºèƒ½å­˜å‚¨è¿‡ç¨‹ä¸Šè¿°çš„æ‰€æœ‰å­˜å‚¨è¿‡ç¨‹åŸºæœ¬ä¸Šéƒ½æ˜¯å°è£…MySQLç®€å•çš„SELECTè¯­å¥ï¼Œåªæœ‰åœ¨å­˜å‚¨è¿‡ç¨‹å†…åŒ…å«ä¸šåŠ¡è§„åˆ™å’Œæ™ºèƒ½å¤„ç†æ—¶ï¼Œå®ƒä»¬çš„ä½œç”¨æ‰èƒ½çœŸæ­£æ˜¾ç°å‡ºæ¥ã€‚ è€ƒè™‘å¦‚ä¸‹åœºæ™¯ï¼Œä½ éœ€è¦è·å¾—ä¸ä»¥å‰ä¸€æ ·çš„è®¢å•åˆå¹¶ï¼Œä½†éœ€è¦å¯¹åˆè®¡å¢åŠ è¥ä¸šç¨ï¼Œä¸è¿‡åªé’ˆå¯¹æŸäº›é¡¾å®¢ã€‚é‚£ä¹ˆï¼Œä½ éœ€è¦åšä¸‹é¢å‡ ä»¶äº‹æƒ…ï¼š è·å¾—åˆè®¡ã€‚ æŠŠè¥ä¸šç¨æœ‰æ¡ä»¶åœ°æ·»åŠ åˆ°åˆè®¡ã€‚ è¿”å›åˆè®¡ï¼ˆå¸¦ç¨æˆ–è€…ä¸å¸¦ç¨ï¼‰ã€‚ å­˜å‚¨è¿‡ç¨‹çš„å®Œæ•´å·¥ä½œå¦‚ä¸‹ï¼ˆè®°å¾—å…ˆåˆ é™¤ä»¥å‰åˆ›å»ºçš„ordertotalå­˜å‚¨è¿‡ç¨‹ï¼‰ï¼š 1234567891011121314151617181920212223242526DELIMITER &#x2F;&#x2F;CREATE PROCEDURE ordertotal( IN onumber INT, IN taxable BOOLEAN, OUT ototal DECIMAL(8,2))BEGIN # å£°æ˜å±€éƒ¨å˜é‡ DECLARE total DECIMAL(8,2); DECLARE taxrate INT DEFAULT 6; SELECT SUM(item_price * quantity) FROM OrderItems WHERE order_num &#x3D; onumber INTO total; IF taxable THEN SELECT total + (total&#x2F;100 * taxrate) INTO total; END IF; # ç»“æœä¿å­˜åˆ°ototalä¸­ SELECT total INTO ototal;END &#x2F;&#x2F;DELIMITER ; DECLAREè¯­å¥å®šä¹‰äº†ä¸¤ä¸ªå±€éƒ¨å˜é‡ï¼ŒDECLAREè¦æ±‚æŒ‡å®šå˜é‡åå’Œæ•°æ®ç±»å‹ï¼Œå®ƒæ”¯æŒå¯é€‰çš„é»˜è®¤å€¼ã€‚IFè¯­å¥æ£€æŸ¥taxableæ˜¯å¦ä¸ºçœŸï¼Œå¦‚æœä¸ºçœŸï¼Œåˆ™ç”¨å¦ä¸€ä¸ªSELECTè¯­å¥å¢åŠ è¥ä¸šç¨åˆ°å±€éƒ¨å˜é‡totalã€‚æœ€åï¼Œå°†å±€éƒ¨å˜é‡totalä¿å­˜åˆ°ototalã€‚ è°ƒç”¨è¯¥å­˜å‚¨è¿‡ç¨‹ï¼š 12345CALL ordertotal(20005, 0, @total);SELECT @total;CALL ordertotal(20005, 1, @total);SELECT @total; æ£€æŸ¥å­˜å‚¨è¿‡ç¨‹ä¸ºæ˜¾ç¤ºç”¨æ¥åˆ›å»ºä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹çš„CREATEè¯­å¥ï¼Œä½¿ç”¨SHOW CREATE PROCEDUREè¯­å¥ï¼š 1SHOW CREATE PROCEDURE ordertotal; ä¸ºäº†è·å¾—åŒ…æ‹¬ä½•æ—¶ã€ç”±è°åˆ›å»ºç­‰è¯¦ç»†ä¿¡æ¯çš„å­˜å‚¨è¿‡ç¨‹åˆ—è¡¨ï¼Œä½¿ç”¨SHOW PROCEDURE STATUSã€‚ 1SHOW PROCEDURE STATUS; SHOW PROCEDURE STATUS;æ˜¾ç¤ºäº†å¤ªå¤šæ— å…³ç´§è¦çš„ä¿¡æ¯ï¼Œä¸ºé™åˆ¶å…¶è¾“å‡ºï¼Œå¯ä»¥ä½¿ç”¨LIKEæŒ‡å®šä¸€ä¸ªè¿‡æ»¤æ¨¡å¼ã€‚ä¾‹å¦‚ï¼š 1SHOW PROCEDURE STATUS LIKE &#39;ordertotal&#39;; ä½¿ç”¨æ¸¸æ ‡ä»€ä¹ˆæ˜¯æ¸¸æ ‡(cursor)ï¼ŸMySQLæ£€ç´¢æ“ä½œè¿”å›ä¸€ç»„ç§°ä¸ºç»“æœé›†çš„è¡Œï¼Œè¿™ç»„è¿”å›çš„è¡Œéƒ½æ˜¯ä¸SQLè¯­å¥ç›¸åŒ¹é…çš„è¡Œï¼ˆé›¶è¡Œæˆ–å¤šè¡Œï¼‰ï¼Œä½¿ç”¨ç®€å•çš„SELECTè¯­å¥æ²¡åŠæ³•å¾—åˆ°ç¬¬ä¸€è¡Œã€ä¸‹ä¸€è¡Œæˆ–è€…å‰10è¡Œï¼Œä¹Ÿä¸å­˜åœ¨æ¯æ¬¡ä¸€è¡Œåœ°å¤„ç†æ‰€æœ‰è¡Œçš„ç®€å•æ–¹æ³•ã€‚æœ‰æ—¶ï¼Œéœ€è¦åœ¨æ£€ç´¢å‡ºæ¥çš„è¡Œä¸­å‰è¿›æˆ–åé€€ä¸€è¡Œæˆ–å¤šè¡Œã€‚è¿™å°±æ˜¯ä½¿ç”¨æ¸¸æ ‡çš„åŸå› ã€‚ åªèƒ½ç”¨äºå­˜å‚¨è¿‡ç¨‹ ä¸åƒå¤šæ•°DBMS,MySQLæ¸¸æ ‡åªèƒ½ç”¨äºå­˜å‚¨è¿‡ç¨‹(å’Œå‡½æ•°)ã€‚ ä½¿ç”¨æ¸¸æ ‡ä½¿ç”¨æ¸¸æ ‡æ¶‰åŠå‡ ä¸ªæ˜ç¡®çš„æ­¥éª¤ã€‚ åœ¨èƒ½å¤Ÿä½¿ç”¨æ¸¸æ ‡å‰ï¼Œå¿…é¡»å£°æ˜ï¼ˆå®šä¹‰ï¼‰å®ƒã€‚è¿™ä¸ªè¿‡ç¨‹å®é™…ä¸Šæ²¡æœ‰æ£€ç´¢æ•°æ®ï¼Œå®ƒåªæ˜¯å®šä¹‰è¦ä½¿ç”¨çš„SELECTè¯­å¥ã€‚ å¯¹äºå¡«æœ‰æ•°æ®çš„æ¸¸æ ‡,æ ¹æ®éœ€è¦å–å‡ºï¼ˆæ£€ç´¢ï¼‰å„è¡Œã€‚ åœ¨ç»“æŸæ¸¸æ ‡ä½¿ç”¨æ—¶ï¼Œå¿…é¡»å…³é—­æ¸¸æ ‡ã€‚ åˆ›å»ºæ¸¸æ ‡ä½¿ç”¨DECLAREè¯­å¥åˆ›å»ºæ¸¸æ ‡ 12345CREATE PROCEDURE processorders (BEGIN DECLARE ordernumbers CURSORFOR SELECT order_num FROM orders; END; æ‰“å¼€å’Œå…³é—­æ¸¸æ ‡æ¸¸æ ‡ç”¨OPEN CURSORæ¥æ‰“å¼€ OPEN ordernumbers å½“æ¸¸æ ‡å¤„ç†å®Œæˆåï¼Œåº”å½“ä½¿ç”¨å¦‚ä¸‹è¯­å¥å…³é—­æ¸¸æ ‡ CLOSE ordernumbers; CLOSEé‡Šæ”¾æ¸¸æ ‡ä½¿ç”¨çš„æ‰€æœ‰å†…éƒ¨å†…å­˜å’Œèµ„æºï¼Œå› æ­¤åœ¨æ¯ä¸ªæ¸¸æ ‡ä¸å†éœ€è¦æ—¶éƒ½åº”è¯¥å…³é—­ã€‚ å£°æ˜è¿‡çš„æ¸¸æ ‡ä¸å†éœ€è¦å†æ¬¡å£°æ˜ï¼Œç”¨OPENè¯­å¥æ‰“å¼€å®ƒå°±å¯ä»¥ã€‚ éšå«å…³é—­ å¦‚æœä½ ä¸æ˜ç¡®å…³é—­æ¸¸æ ‡ï¼ŒMySQLå°†ä¼šåœ¨åˆ°è¾¾ENDè¯­å¥æ—¶è‡ªåŠ¨å…³é—­å®ƒã€‚ 12345678910CREATE PROCEDURE processorders(BEGIN -- Declare the cursor DECLARE ordernumbers CURSORFOR SELECT order_num FROM orders; -- 0pen the cursor OPEN ordernumbers; -- Close the cursor CLOSE ordernumbers;END; ä½¿ç”¨æ¸¸æ ‡æ•°æ®ä½¿ç”¨FETCHè¯­å¥åˆ†åˆ«è®¿é—®å®ƒçš„æ¯ä¸€è¡Œ FETCHæŒ‡å®šæœç´¢ä»€ä¹ˆæ•°æ®ï¼ˆæ‰€éœ€çš„åˆ—ï¼‰ï¼Œç„¶åæ¸¸æ ‡å‘å‰ç§»åŠ¨ï¼Œä¸é‡å¤è¯»å–åŒä¸€è¡Œ ä¸€ä¸ªä¾‹å­ 123456789101112131415161718192021CREATE PROCEDURE processorders()BEGINâ€‹ DECLARE o INT;â€‹ DECLARE ordernumbers CURSORâ€‹ FORâ€‹ SELECT order_num FROM orders;â€‹ â€‹ OPEN ordernumners;â€‹ FETCH ordernumbers INTO o;â€‹ CLOSE ordernumbers;END; ä½¿ç”¨è§¦å‘å™¨æ‰§è¡ŒæŸæ¡MySQLè¯­å¥æ—¶è§¦å‘äº‹ä»¶çš„å¤„ç† DELETE; INSERT; UPDATE åˆ›å»ºè§¦å‘å™¨åœ¨åˆ›å»ºè§¦å‘å™¨æ—¶ï¼Œéœ€è¦ç»™å‡º4æ¡ä¿¡æ¯:1234567å”¯ä¸€çš„è§¦å‘å™¨å;è§¦å‘å™¨å…³è”çš„è¡¨;è§¦å‘å™¨åº”è¯¥å“åº”çš„æ´»åŠ¨ï¼ˆDELETEã€INSERTæˆ–UPDATE);è§¦å‘å™¨ä½•æ—¶æ‰§è¡Œï¼ˆå¤„ç†ä¹‹å‰æˆ–ä¹‹å)ã€‚ åˆ›å»ºè§¦å‘å™¨CREATE TRIGGER 123CREATE TRIGGR newproduct AFTER INSERT ON productsFOR EACH ROW SELECT &#39;Product added&#39; åˆ é™¤è§¦å‘å™¨1DROP TRIGGER newproduct INSERT è§¦å‘å™¨åœ¨INSERTè§¦å‘å™¨åœ¨INSERTè¯­å¥æ‰§è¡Œä¹‹å‰æˆ–ä¹‹åï¼Œéœ€è¦çŸ¥é“ä»¥ä¸‹å‡ ç‚¹ï¼š åœ¨INSERTè§¦å‘å™¨ä»£ç å†…ï¼Œå¯å¼•ç”¨ä¸€ä¸ªåä¸ºNEWçš„è™šæ‹Ÿè¡¨ï¼Œè®¿é—®è¢«æ’å…¥çš„è¡Œ; åœ¨BEFORE INSERTè§¦å‘å™¨ä¸­ï¼ŒNEWä¸­çš„å€¼ä¹Ÿå¯ä»¥è¢«æ›´æ–°ï¼ˆå…è®¸æ›´æ”¹è¢«æ’å…¥çš„å€¼); å¯¹äºAUTO_INCREMENTåˆ—ï¼ŒNEWåœ¨INSERTæ‰§è¡Œä¹‹å‰åŒ…å«0ï¼Œåœ¨INSERTæ‰§è¡Œä¹‹ååŒ…å«æ–°çš„è‡ªåŠ¨ç”Ÿæˆå€¼ã€‚ ä¾‹å­ AUTO_INCREMENTåˆ—å…·æœ‰MySQLè‡ªåŠ¨èµ‹äºˆçš„å€¼ 123CREATE TRIGGER neworder AFTER INSERT ON ordersFOR EACH ROW SELECT NEW.order_num DELETEè§¦å‘å™¨åœ¨DELETEè§¦å‘å™¨åœ¨DELETEè¯­å¥æ‰§è¡Œä¹‹å‰æˆ–ä¹‹åï¼Œéœ€è¦çŸ¥é“ä»¥ä¸‹å‡ ç‚¹ï¼š åœ¨DELETEè§¦å‘å™¨ä»£ç å†…ï¼Œä½ å¯ä»¥å¼•ç”¨ä¸€ä¸ªåä¸ºOLDçš„è™šæ‹Ÿè¡¨,è®¿é—®è¢«åˆ é™¤çš„è¡Œ; OLDä¸­çš„å€¼å…¨éƒ½æ˜¯åªè¯»çš„ï¼Œä¸èƒ½æ›´æ–° 123456CREATE TRIGGER deleteorder BEFORE DELETE ON ordersFOR EACH ROWBEGIN INSERT INTO archive_orders(order_num,order_date,cust_id) VALUES(OLD.order_num,OLD.order_date,OLD.cust_id);END; UPDATEè§¦å‘å™¨åœ¨UPDATEè§¦å‘å™¨åœ¨UPDATEè¯­å¥æ‰§è¡Œä¹‹å‰æˆ–ä¹‹åï¼Œéœ€è¦çŸ¥é“ä»¥ä¸‹å‡ ç‚¹ï¼š åœ¨UPDATEè§¦å‘å™¨ä»£ç ä¸­ï¼Œä½ å¯ä»¥å¼•ç”¨ä¸€ä¸ªåä¸ºOLDçš„è™šæ‹Ÿè¡¨è®¿é—®ä»¥å‰ï¼ˆUPDATEè¯­å¥å‰ï¼‰çš„å€¼ï¼Œå¼•ç”¨ä¸€ä¸ªåä¸ºNEWçš„è™šæ‹Ÿè¡¨è®¿é—®æ›´æ–°åçš„å€¼ åœ¨BEFORE UPDATEè§¦å‘å™¨ä¸­ï¼ŒNEWä¸­çš„å€¼å¯èƒ½ä¹Ÿè¢«æ›´æ–°ï¼ˆå…è®¸æ›´æ”¹å°†è¦ç”¨äºUPDATEè¯­å¥ä¸­çš„å€¼ï¼‰ OLDä¸­çš„å€¼å…¨éƒ½æ˜¯åªè¯»çš„ï¼Œä¸èƒ½æ›´æ–° 12CREATE TRIGGER updatevendor BEFORE UPDATE ON vendorsFOR EACH ROW SET NEW.vend_state &#x3D; Upper(NEW.vend.state); ç®¡ç†äº‹åŠ¡å¤„ç†COMMIT å’Œ ROLLBACKäº‹åŠ¡å¤„ç†å¯ä»¥ç”¨æ¥ç»´æŠ¤æ•°æ®åº“çš„å®Œæ•´æ€§ï¼Œå®ƒä¿è¯æˆæ‰¹çš„MySQLæ“ä½œè¦ä¹ˆå®Œå…¨æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œã€‚ å…³ç³»æ•°æ®åº“ä¸­Aè¡¨å’ŒBè¡¨ä¸²è¡Œæ‰§è¡Œæ’å…¥æˆ–æ›´æ–°æ“ä½œï¼Œå½“Aè¡¨æ‰§è¡Œæ“ä½œå®Œï¼ŒBæ“ä½œæ‰§è¡Œå‡ºé”™ã€‚å¯åˆ©ç”¨äº‹åŠ¡å¤„ç†æ‰§è¡Œå›é€€æ“ä½œä»¥æ¢å¤æ•°æ®åº“åˆ°æŸä¸ªå·²çŸ¥ä¸”å®‰å…¨çš„çŠ¶æ€ã€‚ äº‹åŠ¡å¤„ç†çš„å‡ ä¸ªæœ¯è¯­ï¼š äº‹åŠ¡(transactionï¼‰æŒ‡ä¸€ç»„SQLè¯­å¥; å›é€€ï¼ˆrollback)æŒ‡æ’¤é”€æŒ‡å®šSQLè¯­å¥çš„è¿‡ç¨‹; æäº¤ï¼ˆcommitï¼‰æŒ‡å°†æœªå­˜å‚¨çš„SQLè¯­å¥ç»“æœå†™å…¥æ•°æ®åº“è¡¨; ä¿ç•™ç‚¹(savepointï¼‰æŒ‡äº‹åŠ¡å¤„ç†ä¸­è®¾ç½®çš„ä¸´æ—¶å ä½ç¬¦(place-holder&gt;ï¼Œä½ å¯ä»¥å¯¹å®ƒå‘å¸ƒå›é€€ï¼ˆä¸å›é€€æ•´ä¸ªäº‹åŠ¡å¤„ç†ä¸åŒ)ã€‚ æ§åˆ¶äº‹åŠ¡å¤„ç†MySQLä½¿ç”¨ä¸‹é¢çš„è¯­å¥æ¥æ ‡è¯†äº‹åŠ¡çš„å¼€å§‹ï¼š 1START TRANSACTION ä½¿ç”¨ROLLBACKï¼ˆåªèƒ½åœ¨ä¸€ä¸ªäº‹åŠ¡å¤„ç†å†…ä½¿ç”¨ï¼‰123456SELECT * FROM ordertotals;START TRANSACTION;DELETE FROM ordertotals;SELECT * FROM ordertotals;ROLLBACK;SELECT * FROM ordertotals; å“ªäº›è¯­å¥å¯ä»¥å›é€€? äº‹åŠ¡å¤„ç†ç”¨æ¥ç®¡ç†INSERTã€ UPDATEå’ŒDELETEè¯­å¥ã€‚ä½ ä¸èƒ½å›é€€SELECTè¯­å¥ã€‚(è¿™æ ·åšä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚)ä½ ä¸èƒ½å›é€€CREATEæˆ–DROPæ“ä½œã€‚äº‹åŠ¡å¤„ç†å—ä¸­å¯ä»¥ä½¿ç”¨è¿™ä¸¤æ¡è¯­å¥,ä½†å¦‚æœä½ æ‰§è¡Œå›é€€,å®ƒä»¬ä¸ä¼šè¢«æ’¤é”€ã€‚ ä½¿ç”¨COMMITä¸€èˆ¬MySQLè¯­å¥éƒ½æ˜¯ç›´æ¥é’ˆå¯¹æ•°æ®åº“è¡¨æ‰§è¡Œå’Œç¼–å†™çš„ï¼Œè¿™å°±æ˜¯éšå«æäº¤ï¼Œå³æäº¤æ˜¯è‡ªåŠ¨è¿›è¡Œçš„ã€‚ä½†æ˜¯åœ¨äº‹åŠ¡å¤„ç†å—ä¸­ï¼Œæäº¤ä¸ä¼šè‡ªåŠ¨è¿›è¡Œï¼Œéœ€è¦ä½¿ç”¨COMMITè¯­å¥è¿›è¡Œæäº¤ 1234START TRANSACTIONDELETE FROM orderitems WHERE order_num &#x3D; 20010;DELETE FROM orders WHERE order_num &#x3D; 20010;COMMIT; éšå«äº‹åŠ¡å…³é—­ï¼š å½“COMMITæˆ–ROLLBACKè¯­å¥æ‰§è¡Œåï¼Œäº‹åŠ¡ä¼šè‡ªåŠ¨å…³é—­ ä½¿ç”¨ä¿ç•™ç‚¹ä¸ºäº†æ”¯æŒå›é€€éƒ¨åˆ†äº‹åŠ¡å¤„ç†ï¼Œå¿…é¡»èƒ½åœ¨äº‹åŠ¡å¤„ç†å—ä¸­åˆé€‚çš„ä½ç½®æ”¾ç½®å ä½ç¬¦ã€‚è¿™æ ·ï¼Œå¦‚æœéœ€è¦å›é€€ï¼Œå¯ä»¥å›é€€åˆ°æŸä¸ªå ä½ç¬¦123SAVEPOINT delete1;ROLLBACK TO delete1; ä¿ç•™ç‚¹åœ¨äº‹åŠ¡å¤„ç†å®Œæˆï¼ˆæ‰§è¡Œä¸€æ¡ROLLBACKæˆ–COMMITï¼‰åè‡ªåŠ¨é‡Šæ”¾ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨RELEASE SAVEPOINTæ˜ç¡®åœ°é‡Šæ”¾ä¿ç•™ç‚¹ æ›´æ”¹é»˜è®¤çš„æäº¤è¡Œä¸º1SET autocommit&#x3D;0; autocommitæ ‡å¿—å†³å®šæ˜¯å¦è‡ªåŠ¨æäº¤æ›´æ”¹ï¼Œä¸ç®¡æœ‰æ²¡æœ‰COMMITè¯­å¥ã€‚è®¾ç½®autocommitä¸º0æŒ‡ç¤ºMySQLä¸è‡ªåŠ¨æäº¤æ›´æ”¹ï¼ˆç›´åˆ°autocommitè¢«è®¾ç½®ä¸ºçœŸä¸ºæ­¢ï¼‰ å…¨çƒåŒ–å’Œæœ¬åœ°åŒ–å­—ç¬¦é›†å’Œæ ¡å¯¹é¡ºåºæ•°æ®åº“è¡¨è¢«ç”¨æ¥å­˜å‚¨å’Œæ£€ç´¢æ•°æ®ã€‚ä¸åŒçš„è¯­è¨€å’Œå­—ç¬¦é›†éœ€è¦ä»¥ä¸åŒçš„æ–¹å¼å­˜å‚¨å’Œæ£€ç´¢ã€‚å› æ­¤ï¼ŒMySQLéœ€è¦é€‚åº”ä¸åŒçš„å­—ç¬¦é›†(ä¸åŒçš„å­—æ¯å’Œå­—ç¬¦)ï¼Œé€‚åº”ä¸åŒçš„æ’åºå’Œæ£€ç´¢æ•°æ®çš„æ–¹æ³•ã€‚ åœ¨è®¨è®ºå¤šç§è¯­è¨€å’Œå­—ç¬¦é›†æ—¶ï¼Œå°†ä¼šé‡åˆ°ä»¥ä¸‹é‡è¦æœ¯è¯­; å­—ç¬¦é›†ä¸ºå­—æ¯å’Œç¬¦å·çš„é›†åˆ; ç¼–ç ä¸ºæŸä¸ªå­—ç¬¦é›†æˆå‘˜çš„å†…éƒ¨è¡¨ç¤º; æ ¡å¯¹ä¸ºè§„å®šå­—ç¬¦å¦‚ä½•æ¯”è¾ƒçš„æŒ‡ä»¤ã€‚ ä½¿ç”¨å­—ç¬¦é›†å’Œæ ¡å¯¹é¡ºåºæŸ¥çœ‹æ‰€æ”¯æŒçš„å­—ç¬¦é›†å®Œæ•´åˆ—è¡¨ 1SHOW CHARACTER SET æŸ¥çœ‹æ‰€æ”¯æŒæ ¡å¯¹çš„å®Œæ•´åˆ—è¡¨ 1SHOW COLLATION å®‰å…¨ç®¡ç†ç”¨æˆ·åº”è¯¥å¯¹ä»–ä»¬éœ€è¦çš„æ•°æ®å…·æœ‰é€‚å½“çš„è®¿é—®æƒ è®¿é—®æ§åˆ¶å¤šæ•°ç”¨æˆ·åªéœ€è¦å¯¹è¡¨è¿›è¡Œè¯»å’Œå†™ï¼Œä½†å°‘æ•°ç”¨æˆ·ç”šè‡³éœ€è¦èƒ½åˆ›å»ºå’Œåˆ é™¤è¡¨; æŸäº›ç”¨æˆ·éœ€è¦è¯»è¡¨ï¼Œä½†å¯èƒ½ä¸éœ€è¦æ›´æ–°è¡¨; ä½ å¯èƒ½æƒ³å…è®¸ç”¨æˆ·æ·»åŠ æ•°æ®ï¼Œä½†ä¸å…è®¸ä»–ä»¬åˆ é™¤æ•°æ®; æŸäº›ç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰å¯èƒ½éœ€è¦å¤„ç†ç”¨æˆ·è´¦å·çš„æƒé™ï¼Œä½†å¤šæ•°ç”¨æˆ·ä¸éœ€è¦; ä½ å¯èƒ½æƒ³è®©ç”¨æˆ·é€šè¿‡å­˜å‚¨è¿‡ç¨‹è®¿é—®æ•°æ®ï¼Œä½†ä¸å…è®¸ä»–ä»¬ç›´æ¥è®¿é—®æ•°æ®;: ä½ å¯èƒ½æƒ³æ ¹æ®ç”¨æˆ·ç™»å½•çš„åœ°ç‚¹é™åˆ¶å¯¹æŸäº›åŠŸèƒ½çš„è®¿é—®ã€‚ ç®¡ç†ç”¨æˆ·MySQLç”¨æˆ·è´¦å·å’Œä¿¡æ¯å­˜å‚¨åœ¨åä¸ºmysqlçš„MySQLæ•°æ®åº“ä¸­ã€‚ 123USE mysql;SELECT user FROM user åˆ›å»ºç”¨æˆ·è´¦å·1CREATE USER BEN IDENTIFIDE BY &#39;p@$$w0rd&#39; é‡æ–°å‘½åä¸€ä¸ªç”¨æˆ·è´¦å·123##### RENAME USER ben TO bforta; åˆ é™¤ç”¨æˆ·å¸å·123##### DROP USER bforta; è®¾ç½®è®¿é—®æƒé™123##### SHOW GRANTS FOR bforata; ä¸ºè®¾ç½®æƒé™ï¼Œä½¿ç”¨GRANTè¯­å¥ã€‚GRANTè¦æ±‚ä½ è‡³å°‘ç»™å‡ºä»¥ä¸‹ä¿¡æ¯: è¦æˆäºˆçš„æƒé™; è¢«æˆäºˆè®¿é—®æƒé™çš„æ•°æ®åº“æˆ–è¡¨; ç”¨æˆ·åã€‚ 1GRANT SLECT ON crashcourse.* TO bforta #æˆäºˆç”¨æˆ·åœ¨crashcourseæ•°æ®åº“æ‰€æœ‰è¡¨çš„selectæƒé™ GRANTçš„åæ“ä½œï¼ŒREVOKEæ’¤é”€ç‰¹å®šæƒé™123##### REVOKE SELECT ON crashcourse.* FROM bforta; #å¦‚æœæƒé™ä¸å­˜åœ¨ä¼šæŠ¥é”™ GRANTå’ŒREVOKEå¯åœ¨å‡ ä¸ªå±‚æ¬¡ä¸Šæ§åˆ¶è®¿é—®æƒé™: æ•´ä¸ªæœåŠ¡å™¨ï¼Œä½¿ç”¨GRANT ALLå’ŒREVOKE ALL; æ•´ä¸ªæ•°æ®åº“ï¼Œä½¿ç”¨ON database.*; ç‰¹å®šçš„è¡¨ï¼Œä½¿ç”¨ON database.table;å£ç‰¹å®šçš„åˆ—; ç‰¹å®šçš„å­˜å‚¨è¿‡ç¨‹ã€‚ æƒé™ è¯´æ˜ ALL é™¤GRANT OPTIONå¤–çš„æ‰€æœ‰æƒé™ ALTER ä½¿ç”¨ALTER TABLE ä½¿ç”¨ALTER TABLE ä½¿ç”¨ALTER PROCEDUREå’ŒDROP PROCEDURE CREATE ä½¿ç”¨CREATE TABLE CREATE ROUTINE ä½¿ç”¨CREATE PROCEDURE CREATE TEMPORARY TABLES ä½¿ç”¨CREATE TEMPORARY TABLE CREATE USER ä½¿ç”¨CREATE USERã€DROP USERã€RENAME USERå’ŒREVOKE ALL PRIVILEGES CREATE VIEW ä½¿ç”¨CREATE VIEW DELETE ä½¿ç”¨DELETE DROP ä½¿ç”¨DROP TABLE EXECUTE ä½¿ç”¨CALLå’Œå­˜å‚¨è¿‡ç¨‹ FILE ä½¿ç”¨SELECT INTO OUTFILEå’ŒLOAD DATA INFILE GRANT OPTION ä½¿ç”¨GRANTå’ŒREVOKE INDEX ä½¿ç”¨CREATE INDEXå’ŒDROP INDEX INSERT ä½¿ç”¨INSERT LOCK TABLES ä½¿ç”¨LOCK TABLES PROCESS ä½¿ç”¨SHOW FULL PROCESSLIST RELOAD ä½¿ç”¨FLUSH REPLICATION CLIENT æœåŠ¡å™¨ä½ç½®çš„è®¿é—® REPLICATION SLAVE ç”±å¤åˆ¶ä»å±ä½¿ç”¨ ä½¿ç”¨SELECT ä½¿ç”¨SELECT SHOW DATABASES ä½¿ç”¨SHOW DATABASES SHOW VIEW ä½¿ç”¨SHOW CREATE VIEW SHUTDOWN ä½¿ç”¨mysqladmin shutdownï¼ˆç”¨æ¥å…³é—­MySQL) SUPER ä½¿ç”¨CHANGE MASTERã€KILLã€LOGSã€PURGEã€MASTERå’ŒSET GLOBALã€‚è¿˜å…è®¸mysqladminè°ƒè¯•ç™»å½• UPDATE ä½¿ç”¨UPDATE USAGE æ— è®¿é—®æƒé™ æ›´æ”¹å£ä»¤SET PASSWORD SET PASSWORD FOR bforta = Password(â€˜n3wp@$$s0rdâ€™) æ•°æ®åº“ç»´æŠ¤å¤‡ä»½ä½¿ç”¨å‘½ä»¤è¡Œå®ç”¨ç¨‹åºmysqldumpè½¬å‚¨æ‰€æœ‰æ•°æ®åº“å†…å®¹åˆ°æŸä¸ªå¤–éƒ¨æ–‡ä»¶ã€‚åœ¨è¿›è¡Œå¸¸è§„å¤‡ä»½å‰è¿™ä¸ªå®ç”¨ç¨‹åºåº”è¯¥æ­£å¸¸è¿è¡Œï¼Œä»¥ä¾¿èƒ½æ­£ç¡®åœ°å¤‡ä»½è½¬å‚¨æ–‡ä»¶ã€‚ å¯ç”¨å‘½ä»¤è¡Œå®ç”¨ç¨‹åºmysqlhotcopyä»ä¸€ä¸ªæ•°æ®åº“å¤åˆ¶æ‰€æœ‰æ•°æ®(å¹¶éæ‰€æœ‰æ•°æ®åº“å¼•æ“éƒ½æ”¯æŒè¿™ä¸ªå®ç”¨ç¨‹åº)ã€‚ å¯ä»¥ä½¿ç”¨MySQLçš„BACKUP TABLEæˆ–SELECT INTO OUTFILEè½¬å‚¨æ‰€æœ‰æ•°æ®åˆ°æŸä¸ªå¤–éƒ¨æ–‡ä»¶ã€‚è¿™ä¸¤æ¡è¯­å¥éƒ½æ¥å—å°†è¦åˆ›å»ºçš„ç³»ç»Ÿæ–‡ä»¶å,æ­¤ç³»ç»Ÿæ–‡ä»¶å¿…é¡»ä¸å­˜åœ¨ï¼Œå¦åˆ™ä¼šå‡ºé”™ã€‚æ•°æ®å¯ä»¥ç”¨RESTORETABLEæ¥å¤åŸã€‚ ANALYZE TABLEï¼Œç”¨æ¥æ£€æŸ¥è¡¨é”®æ˜¯å¦æ­£ç¡®ã€‚ è¯Šæ–­å¯åŠ¨é—®é¢˜æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶é”™è¯¯æ—¥å¿—/data/hostname.err æŸ¥è¯¢æ—¥å¿—/data/hostname.log äºŒè¿›åˆ¶æ—¥å¿—/data/hostname-bin ç¼“æ…¢æŸ¥è¯¢æ—¥å¿—/data/hostname-slow.log æ”¹å–„æ€§èƒ½é¦–å…ˆï¼ŒMySQLï¼ˆä¸æ‰€æœ‰DBMSä¸€æ ·ï¼‰å…·æœ‰ç‰¹å®šçš„ç¡¬ä»¶å»ºè®®ã€‚åœ¨å­¦ä¹ å’Œç ”ç©¶MySQLæ—¶ï¼Œä½¿ç”¨ä»»ä½•æ—§çš„è®¡ç®—æœºä½œä¸ºæœåŠ¡å™¨éƒ½å¯ä»¥ã€‚ä½†å¯¹ç”¨äºç”Ÿäº§çš„æœåŠ¡å™¨æ¥è¯´ï¼Œåº”è¯¥åšæŒéµå¾ªè¿™äº›ç¡¬ä»¶å»ºè®®ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå…³é”®çš„ç”Ÿäº§DBMSåº”è¯¥è¿è¡Œåœ¨è‡ªå·±çš„ä¸“ç”¨æœåŠ¡å™¨ä¸Šã€‚ MySQLæ˜¯ç”¨ä¸€ç³»åˆ—çš„é»˜è®¤è®¾ç½®é¢„å…ˆé…ç½®çš„ï¼Œä»è¿™äº›è®¾ç½®å¼€å§‹é€šå¸¸æ˜¯å¾ˆå¥½çš„ã€‚ä½†è¿‡ä¸€æ®µæ—¶é—´åä½ å¯èƒ½éœ€è¦è°ƒæ•´å†…å­˜åˆ†é…ã€ç¼“å†²åŒºå¤§å°ç­‰ã€‚(ä¸ºæŸ¥çœ‹å½“å‰è®¾ç½®,å¯ä½¿ç”¨SHOw VARIABLES;å’Œ SHOWSTATUS;ã€‚) MySQLä¸€ä¸ªå¤šç”¨æˆ·å¤šçº¿ç¨‹çš„DBMSï¼Œæ¢è¨€ä¹‹ï¼Œå®ƒç»å¸¸åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚å¦‚æœè¿™äº›ä»»åŠ¡ä¸­çš„æŸä¸€ä¸ªæ‰§è¡Œç¼“æ…¢ï¼Œåˆ™æ‰€æœ‰è¯·æ±‚éƒ½ä¼šæ‰§è¡Œç¼“æ…¢ã€‚å¦‚æœä½ é‡åˆ°æ˜¾è‘—çš„æ€§èƒ½ä¸è‰¯,å¯ä½¿ç”¨SHOW PROCESSL ISTæ˜¾ç¤ºæ‰€æœ‰æ´»åŠ¨è¿›ç¨‹(ä»¥åŠå®ƒä»¬çš„çº¿ç¨‹IDå’Œæ‰§è¡Œæ—¶é—´)ã€‚ä½ è¿˜å¯ä»¥ç”¨KILLå‘½ä»¤ç»ˆç»“æŸä¸ªç‰¹å®šçš„è¿›ç¨‹(ä½¿ç”¨è¿™ä¸ªå‘½ä»¤éœ€è¦ä½œä¸ºç®¡ç†å‘˜ç™»å½•)ã€‚ æ€»æ˜¯æœ‰ä¸æ­¢ä¸€ç§æ–¹æ³•ç¼–å†™åŒä¸€æ¡SELECTè¯­å¥ã€‚åº”è¯¥è¯•éªŒè”ç»“ã€å¹¶ã€å­æŸ¥è¯¢ç­‰ï¼Œæ‰¾å‡ºæœ€ä½³çš„æ–¹æ³•ã€‚ ä½¿ç”¨EXPLAINè¯­å¥è®©MySQLè§£é‡Šå®ƒå°†å¦‚ä½•æ‰§è¡Œä¸€æ¡SELECTè¯­å¥ã€‚ä¸€èˆ¬æ¥è¯´,å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œå¾—æ¯”ä¸€æ¡ä¸€æ¡åœ°æ‰§è¡Œå…¶ä¸­çš„å„æ¡MySQLè¯­å¥å¿«ã€‚ åº”è¯¥æ€»æ˜¯ä½¿ç”¨æ­£ç¡®çš„æ•°æ®ç±»å‹ã€‚ å†³ä¸è¦æ£€ç´¢æ¯”éœ€æ±‚è¿˜è¦å¤šçš„æ•°æ®ã€‚æ¢è¨€ä¹‹ï¼Œä¸è¦ç”¨SELECT *ï¼ˆé™¤éä½ çœŸæ­£éœ€è¦æ¯ä¸ªåˆ—)ã€‚æœ‰çš„æ“ä½œï¼ˆåŒ…æ‹¬INSERTï¼‰æ”¯æŒä¸€ä¸ªå¯é€‰çš„DELAYEDå…³é”®å­—ï¼Œå¦‚æœä½¿ç”¨å®ƒï¼Œå°†æŠŠæ§åˆ¶ç«‹å³è¿”å›ç»™è°ƒç”¨ç¨‹åºï¼Œå¹¶ä¸”ä¸€æ—¦æœ‰å¯èƒ½å°±å®é™…æ‰§è¡Œè¯¥æ“ä½œã€‚ åœ¨å¯¼å…¥æ•°æ®æ—¶ï¼Œåº”è¯¥å…³é—­è‡ªåŠ¨æäº¤ã€‚ä½ å¯èƒ½è¿˜æƒ³åˆ é™¤ç´¢å¼•(åŒ…æ‹¬FULLTEXTç´¢å¼•)ï¼Œç„¶ååœ¨å¯¼å…¥å®Œæˆåå†é‡å»ºå®ƒä»¬ã€‚ å¿…é¡»ç´¢å¼•æ•°æ®åº“è¡¨ä»¥æ”¹å–„æ•°æ®æ£€ç´¢çš„æ€§èƒ½ã€‚ç¡®å®šç´¢å¼•ä»€ä¹ˆä¸æ˜¯ä¸€ä»¶å¾®ä¸è¶³é“çš„ä»»åŠ¡ï¼Œéœ€è¦åˆ†æä½¿ç”¨çš„SELECTè¯­å¥ä»¥æ‰¾å‡ºé‡å¤çš„WHEREå’ŒORDER BYå­å¥ã€‚å¦‚æœä¸€ä¸ªç®€å•çš„WHEREå­å¥è¿”å›ç»“æœæ‰€èŠ±çš„æ—¶é—´å¤ªé•¿ï¼Œåˆ™å¯ä»¥æ–­å®šå…¶ä¸­ä½¿ç”¨çš„åˆ—(æˆ–å‡ ä¸ªåˆ—ï¼‰å°±æ˜¯éœ€è¦ç´¢å¼•çš„å¯¹è±¡ã€‚ ä½ çš„SELECTè¯­å¥ä¸­æœ‰ä¸€ç³»åˆ—å¤æ‚çš„ORæ¡ä»¶å—?é€šè¿‡ä½¿ç”¨å¤šæ¡SELECTè¯­å¥å’Œè¿æ¥å®ƒä»¬çš„UNIONè¯­å¥ï¼Œä½ èƒ½çœ‹åˆ°æå¤§çš„æ€§èƒ½æ”¹è¿›ã€‚ ç´¢å¼•æ”¹å–„æ•°æ®æ£€ç´¢çš„æ€§èƒ½,ä½†æŸå®³æ•°æ®æ’å…¥ã€åˆ é™¤å’Œæ›´æ–°çš„æ€§èƒ½ã€‚å¦‚æœä½ æœ‰ä¸€äº›è¡¨ï¼Œå®ƒä»¬æ”¶é›†æ•°æ®ä¸”ä¸ç»å¸¸è¢«æœç´¢ï¼Œåˆ™åœ¨æœ‰å¿…è¦ä¹‹å‰ä¸è¦ç´¢å¼•å®ƒä»¬ã€‚(ç´¢å¼•å¯æ ¹æ®éœ€è¦æ·»åŠ å’Œåˆ é™¤ã€‚) LIKEå¾ˆæ…¢ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæœ€å¥½æ˜¯ä½¿ç”¨FULLTEXTè€Œä¸æ˜¯LIKEã€‚æ•°æ®åº“æ˜¯ä¸æ–­å˜åŒ–çš„å®ä½“ã€‚ä¸€ç»„ä¼˜åŒ–è‰¯å¥½çš„è¡¨ä¸€ä¼šå„¿åå¯èƒ½å°±é¢ç›®å…¨éäº†ã€‚ç”±äºè¡¨çš„ä½¿ç”¨å’Œå†…å®¹çš„æ›´æ”¹ï¼Œç†æƒ³çš„ä¼˜åŒ–å’Œé…ç½®ä¹Ÿä¼šæ”¹å˜ã€‚ æœ€é‡è¦çš„è§„åˆ™å°±æ˜¯ï¼Œæ¯æ¡è§„åˆ™åœ¨æŸäº›æ¡ä»¶ä¸‹éƒ½ä¼šè¢«æ‰“ç ´ã€‚","categories":[{"name":"Mysql","slug":"Mysql","permalink":"http://www.postman.life/categories/Mysql/"}],"tags":[]},{"title":"Hello World","slug":"hello-world","date":"2020-11-17T14:39:02.458Z","updated":"2020-11-09T15:41:46.323Z","comments":true,"path":"2020/11/17/hello-world/","link":"","permalink":"http://www.postman.life/2020/11/17/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}],"categories":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"http://www.postman.life/categories/ElasticSearch/"},{"name":"Linux","slug":"Linux","permalink":"http://www.postman.life/categories/Linux/"},{"name":"Bochs","slug":"Linux/Bochs","permalink":"http://www.postman.life/categories/Linux/Bochs/"},{"name":"Mysql","slug":"Mysql","permalink":"http://www.postman.life/categories/Mysql/"}],"tags":[]}